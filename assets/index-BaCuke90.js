(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function i(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(u){if(u.ep)return;u.ep=!0;const h=i(u);fetch(u.href,h)}})();var wu={exports:{}},Zr={};var xp;function Gx(){if(xp)return Zr;xp=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function i(o,u,h){var f=null;if(h!==void 0&&(f=""+h),u.key!==void 0&&(f=""+u.key),"key"in u){h={};for(var p in u)p!=="key"&&(h[p]=u[p])}else h=u;return u=h.ref,{$$typeof:s,type:o,key:f,ref:u!==void 0?u:null,props:h}}return Zr.Fragment=a,Zr.jsx=i,Zr.jsxs=i,Zr}var vp;function qx(){return vp||(vp=1,wu.exports=Gx()),wu.exports}var r=qx(),ju={exports:{}},we={};var wp;function Px(){if(wp)return we;wp=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),v=Symbol.iterator;function w(T){return T===null||typeof T!="object"?null:(T=v&&T[v]||T["@@iterator"],typeof T=="function"?T:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function q(T,V,W){this.props=T,this.context=V,this.refs=E,this.updater=W||_}q.prototype.isReactComponent={},q.prototype.setState=function(T,V){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,V,"setState")},q.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function U(){}U.prototype=q.prototype;function A(T,V,W){this.props=T,this.context=V,this.refs=E,this.updater=W||_}var I=A.prototype=new U;I.constructor=A,S(I,q.prototype),I.isPureReactComponent=!0;var L=Array.isArray;function G(){}var Z={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function xe(T,V,W){var F=W.ref;return{$$typeof:s,type:T,key:V,ref:F!==void 0?F:null,props:W}}function Le(T,V){return xe(T.type,V,T.props)}function ht(T){return typeof T=="object"&&T!==null&&T.$$typeof===s}function Ye(T){var V={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(W){return V[W]})}var ee=/\/+/g;function Q(T,V){return typeof T=="object"&&T!==null&&T.key!=null?Ye(""+T.key):V.toString(36)}function D(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(G,G):(T.status="pending",T.then(function(V){T.status==="pending"&&(T.status="fulfilled",T.value=V)},function(V){T.status==="pending"&&(T.status="rejected",T.reason=V)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function N(T,V,W,F,me){var ve=typeof T;(ve==="undefined"||ve==="boolean")&&(T=null);var se=!1;if(T===null)se=!0;else switch(ve){case"bigint":case"string":case"number":se=!0;break;case"object":switch(T.$$typeof){case s:case a:se=!0;break;case x:return se=T._init,N(se(T._payload),V,W,F,me)}}if(se)return me=me(T),se=F===""?"."+Q(T,0):F,L(me)?(W="",se!=null&&(W=se.replace(ee,"$&/")+"/"),N(me,V,W,"",function(Lt){return Lt})):me!=null&&(ht(me)&&(me=Le(me,W+(me.key==null||T&&T.key===me.key?"":(""+me.key).replace(ee,"$&/")+"/")+se)),V.push(me)),1;se=0;var $e=F===""?".":F+":";if(L(T))for(var Oe=0;Oe<T.length;Oe++)F=T[Oe],ve=$e+Q(F,Oe),se+=N(F,V,W,ve,me);else if(Oe=w(T),typeof Oe=="function")for(T=Oe.call(T),Oe=0;!(F=T.next()).done;)F=F.value,ve=$e+Q(F,Oe++),se+=N(F,V,W,ve,me);else if(ve==="object"){if(typeof T.then=="function")return N(D(T),V,W,F,me);throw V=String(T),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return se}function C(T,V,W){if(T==null)return T;var F=[],me=0;return N(T,F,"","",function(ve){return V.call(W,ve,me++)}),F}function $(T){if(T._status===-1){var V=T._result;V=V(),V.then(function(W){(T._status===0||T._status===-1)&&(T._status=1,T._result=W)},function(W){(T._status===0||T._status===-1)&&(T._status=2,T._result=W)}),T._status===-1&&(T._status=0,T._result=V)}if(T._status===1)return T._result.default;throw T._result}var ae=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},ce={map:C,forEach:function(T,V,W){C(T,function(){V.apply(this,arguments)},W)},count:function(T){var V=0;return C(T,function(){V++}),V},toArray:function(T){return C(T,function(V){return V})||[]},only:function(T){if(!ht(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return we.Activity=j,we.Children=ce,we.Component=q,we.Fragment=i,we.Profiler=u,we.PureComponent=A,we.StrictMode=o,we.Suspense=m,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,we.__COMPILER_RUNTIME={__proto__:null,c:function(T){return Z.H.useMemoCache(T)}},we.cache=function(T){return function(){return T.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(T,V,W){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var F=S({},T.props),me=T.key;if(V!=null)for(ve in V.key!==void 0&&(me=""+V.key),V)!X.call(V,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&V.ref===void 0||(F[ve]=V[ve]);var ve=arguments.length-2;if(ve===1)F.children=W;else if(1<ve){for(var se=Array(ve),$e=0;$e<ve;$e++)se[$e]=arguments[$e+2];F.children=se}return xe(T.type,me,F)},we.createContext=function(T){return T={$$typeof:f,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:h,_context:T},T},we.createElement=function(T,V,W){var F,me={},ve=null;if(V!=null)for(F in V.key!==void 0&&(ve=""+V.key),V)X.call(V,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(me[F]=V[F]);var se=arguments.length-2;if(se===1)me.children=W;else if(1<se){for(var $e=Array(se),Oe=0;Oe<se;Oe++)$e[Oe]=arguments[Oe+2];me.children=$e}if(T&&T.defaultProps)for(F in se=T.defaultProps,se)me[F]===void 0&&(me[F]=se[F]);return xe(T,ve,me)},we.createRef=function(){return{current:null}},we.forwardRef=function(T){return{$$typeof:p,render:T}},we.isValidElement=ht,we.lazy=function(T){return{$$typeof:x,_payload:{_status:-1,_result:T},_init:$}},we.memo=function(T,V){return{$$typeof:g,type:T,compare:V===void 0?null:V}},we.startTransition=function(T){var V=Z.T,W={};Z.T=W;try{var F=T(),me=Z.S;me!==null&&me(W,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(G,ae)}catch(ve){ae(ve)}finally{V!==null&&W.types!==null&&(V.types=W.types),Z.T=V}},we.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},we.use=function(T){return Z.H.use(T)},we.useActionState=function(T,V,W){return Z.H.useActionState(T,V,W)},we.useCallback=function(T,V){return Z.H.useCallback(T,V)},we.useContext=function(T){return Z.H.useContext(T)},we.useDebugValue=function(){},we.useDeferredValue=function(T,V){return Z.H.useDeferredValue(T,V)},we.useEffect=function(T,V){return Z.H.useEffect(T,V)},we.useEffectEvent=function(T){return Z.H.useEffectEvent(T)},we.useId=function(){return Z.H.useId()},we.useImperativeHandle=function(T,V,W){return Z.H.useImperativeHandle(T,V,W)},we.useInsertionEffect=function(T,V){return Z.H.useInsertionEffect(T,V)},we.useLayoutEffect=function(T,V){return Z.H.useLayoutEffect(T,V)},we.useMemo=function(T,V){return Z.H.useMemo(T,V)},we.useOptimistic=function(T,V){return Z.H.useOptimistic(T,V)},we.useReducer=function(T,V,W){return Z.H.useReducer(T,V,W)},we.useRef=function(T){return Z.H.useRef(T)},we.useState=function(T){return Z.H.useState(T)},we.useSyncExternalStore=function(T,V,W){return Z.H.useSyncExternalStore(T,V,W)},we.useTransition=function(){return Z.H.useTransition()},we.version="19.2.3",we}var jp;function rd(){return jp||(jp=1,ju.exports=Px()),ju.exports}var O=rd(),Su={exports:{}},Xr={},Nu={exports:{}},_u={};var Sp;function Ix(){return Sp||(Sp=1,(function(s){function a(N,C){var $=N.length;N.push(C);e:for(;0<$;){var ae=$-1>>>1,ce=N[ae];if(0<u(ce,C))N[ae]=C,N[$]=ce,$=ae;else break e}}function i(N){return N.length===0?null:N[0]}function o(N){if(N.length===0)return null;var C=N[0],$=N.pop();if($!==C){N[0]=$;e:for(var ae=0,ce=N.length,T=ce>>>1;ae<T;){var V=2*(ae+1)-1,W=N[V],F=V+1,me=N[F];if(0>u(W,$))F<ce&&0>u(me,W)?(N[ae]=me,N[F]=$,ae=F):(N[ae]=W,N[V]=$,ae=V);else if(F<ce&&0>u(me,$))N[ae]=me,N[F]=$,ae=F;else break e}}return C}function u(N,C){var $=N.sortIndex-C.sortIndex;return $!==0?$:N.id-C.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var m=[],g=[],x=1,j=null,v=3,w=!1,_=!1,S=!1,E=!1,q=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function I(N){for(var C=i(g);C!==null;){if(C.callback===null)o(g);else if(C.startTime<=N)o(g),C.sortIndex=C.expirationTime,a(m,C);else break;C=i(g)}}function L(N){if(S=!1,I(N),!_)if(i(m)!==null)_=!0,G||(G=!0,Ye());else{var C=i(g);C!==null&&D(L,C.startTime-N)}}var G=!1,Z=-1,X=5,xe=-1;function Le(){return E?!0:!(s.unstable_now()-xe<X)}function ht(){if(E=!1,G){var N=s.unstable_now();xe=N;var C=!0;try{e:{_=!1,S&&(S=!1,U(Z),Z=-1),w=!0;var $=v;try{t:{for(I(N),j=i(m);j!==null&&!(j.expirationTime>N&&Le());){var ae=j.callback;if(typeof ae=="function"){j.callback=null,v=j.priorityLevel;var ce=ae(j.expirationTime<=N);if(N=s.unstable_now(),typeof ce=="function"){j.callback=ce,I(N),C=!0;break t}j===i(m)&&o(m),I(N)}else o(m);j=i(m)}if(j!==null)C=!0;else{var T=i(g);T!==null&&D(L,T.startTime-N),C=!1}}break e}finally{j=null,v=$,w=!1}C=void 0}}finally{C?Ye():G=!1}}}var Ye;if(typeof A=="function")Ye=function(){A(ht)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Q=ee.port2;ee.port1.onmessage=ht,Ye=function(){Q.postMessage(null)}}else Ye=function(){q(ht,0)};function D(N,C){Z=q(function(){N(s.unstable_now())},C)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(N){N.callback=null},s.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<N?Math.floor(1e3/N):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_next=function(N){switch(v){case 1:case 2:case 3:var C=3;break;default:C=v}var $=v;v=C;try{return N()}finally{v=$}},s.unstable_requestPaint=function(){E=!0},s.unstable_runWithPriority=function(N,C){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=v;v=N;try{return C()}finally{v=$}},s.unstable_scheduleCallback=function(N,C,$){var ae=s.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ae+$:ae):$=ae,N){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=$+ce,N={id:x++,callback:C,priorityLevel:N,startTime:$,expirationTime:ce,sortIndex:-1},$>ae?(N.sortIndex=$,a(g,N),i(m)===null&&N===i(g)&&(S?(U(Z),Z=-1):S=!0,D(L,$-ae))):(N.sortIndex=ce,a(m,N),_||w||(_=!0,G||(G=!0,Ye()))),N},s.unstable_shouldYield=Le,s.unstable_wrapCallback=function(N){var C=v;return function(){var $=v;v=C;try{return N.apply(this,arguments)}finally{v=$}}}})(_u)),_u}var Np;function Vx(){return Np||(Np=1,Nu.exports=Ix()),Nu.exports}var ku={exports:{}},kt={};var _p;function Kx(){if(_p)return kt;_p=1;var s=rd();function a(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},u=Symbol.for("react.portal");function h(m,g,x){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:j==null?null:""+j,children:m,containerInfo:g,implementation:x}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,kt.createPortal=function(m,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return h(m,g,null,x)},kt.flushSync=function(m){var g=f.T,x=o.p;try{if(f.T=null,o.p=2,m)return m()}finally{f.T=g,o.p=x,o.d.f()}},kt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(m,g))},kt.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},kt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var x=g.as,j=p(x,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?o.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:j,integrity:v,fetchPriority:w}):x==="script"&&o.d.X(m,{crossOrigin:j,integrity:v,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},kt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=p(g.as,g.crossOrigin);o.d.M(m,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(m)},kt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,j=p(x,g.crossOrigin);o.d.L(m,x,{crossOrigin:j,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},kt.preloadModule=function(m,g){if(typeof m=="string")if(g){var x=p(g.as,g.crossOrigin);o.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(m)},kt.requestFormReset=function(m){o.d.r(m)},kt.unstable_batchedUpdates=function(m,g){return m(g)},kt.useFormState=function(m,g,x){return f.H.useFormState(m,g,x)},kt.useFormStatus=function(){return f.H.useHostTransitionStatus()},kt.version="19.2.3",kt}var kp;function kg(){if(kp)return ku.exports;kp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),ku.exports=Kx(),ku.exports}var Tp;function Yx(){if(Tp)return Xr;Tp=1;var s=Vx(),a=rd(),i=kg();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(h(e)!==e)throw Error(o(188))}function g(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,l=t;;){var c=n.return;if(c===null)break;var d=c.alternate;if(d===null){if(l=c.return,l!==null){n=l;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===n)return m(c),e;if(d===l)return m(c),t;d=d.sibling}throw Error(o(188))}if(n.return!==l.return)n=c,l=d;else{for(var y=!1,b=c.child;b;){if(b===n){y=!0,n=c,l=d;break}if(b===l){y=!0,l=c,n=d;break}b=b.sibling}if(!y){for(b=d.child;b;){if(b===n){y=!0,n=d,l=c;break}if(b===l){y=!0,l=d,n=c;break}b=b.sibling}if(!y)throw Error(o(189))}}if(n.alternate!==l)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),A=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),xe=Symbol.for("react.activity"),Le=Symbol.for("react.memo_cache_sentinel"),ht=Symbol.iterator;function Ye(e){return e===null||typeof e!="object"?null:(e=ht&&e[ht]||e["@@iterator"],typeof e=="function"?e:null)}var ee=Symbol.for("react.client.reference");function Q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ee?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case q:return"Profiler";case E:return"StrictMode";case L:return"Suspense";case G:return"SuspenseList";case xe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case A:return e.displayName||"Context";case U:return(e._context.displayName||"Context")+".Consumer";case I:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return t=e.displayName||null,t!==null?t:Q(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return Q(e(t))}catch{}}return null}var D=Array.isArray,N=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},ae=[],ce=-1;function T(e){return{current:e}}function V(e){0>ce||(e.current=ae[ce],ae[ce]=null,ce--)}function W(e,t){ce++,ae[ce]=e.current,e.current=t}var F=T(null),me=T(null),ve=T(null),se=T(null);function $e(e,t){switch(W(ve,t),W(me,e),W(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?qm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=qm(t),e=Pm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(F),W(F,e)}function Oe(){V(F),V(me),V(ve)}function Lt(e){e.memoizedState!==null&&W(se,e);var t=F.current,n=Pm(t,e.type);t!==n&&(W(me,e),W(F,n))}function ca(e){me.current===e&&(V(F),V(me)),se.current===e&&(V(se),Yr._currentValue=$)}var Ia,yd;function Sn(e){if(Ia===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ia=t&&t[1]||"",yd=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ia+e+yd}var no=!1;function so(e,t){if(!e||no)return"";no=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(P){var H=P}Reflect.construct(e,[],J)}else{try{J.call()}catch(P){H=P}e.call(J.prototype)}}else{try{throw Error()}catch(P){H=P}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(P){if(P&&H&&typeof P.stack=="string")return[P.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),y=d[0],b=d[1];if(y&&b){var k=y.split(`
`),z=b.split(`
`);for(c=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;if(l===k.length||c===z.length)for(l=k.length-1,c=z.length-1;1<=l&&0<=c&&k[l]!==z[c];)c--;for(;1<=l&&0<=c;l--,c--)if(k[l]!==z[c]){if(l!==1||c!==1)do if(l--,c--,0>c||k[l]!==z[c]){var K=`
`+k[l].replace(" at new "," at ");return e.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",e.displayName)),K}while(1<=l&&0<=c);break}}}finally{no=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Sn(n):""}function by(e,t){switch(e.tag){case 26:case 27:case 5:return Sn(e.type);case 16:return Sn("Lazy");case 13:return e.child!==t&&t!==null?Sn("Suspense Fallback"):Sn("Suspense");case 19:return Sn("SuspenseList");case 0:case 15:return so(e.type,!1);case 11:return so(e.type.render,!1);case 1:return so(e.type,!0);case 31:return Sn("Activity");default:return""}}function bd(e){try{var t="",n=null;do t+=by(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ro=Object.prototype.hasOwnProperty,io=s.unstable_scheduleCallback,lo=s.unstable_cancelCallback,xy=s.unstable_shouldYield,vy=s.unstable_requestPaint,Bt=s.unstable_now,wy=s.unstable_getCurrentPriorityLevel,xd=s.unstable_ImmediatePriority,vd=s.unstable_UserBlockingPriority,yi=s.unstable_NormalPriority,jy=s.unstable_LowPriority,wd=s.unstable_IdlePriority,Sy=s.log,Ny=s.unstable_setDisableYieldValue,rr=null,zt=null;function Va(e){if(typeof Sy=="function"&&Ny(e),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(rr,e)}catch{}}var $t=Math.clz32?Math.clz32:Ty,_y=Math.log,ky=Math.LN2;function Ty(e){return e>>>=0,e===0?32:31-(_y(e)/ky|0)|0}var bi=256,xi=262144,vi=4194304;function Nn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function wi(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var c=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?c=Nn(l):(y&=b,y!==0?c=Nn(y):n||(n=b&~e,n!==0&&(c=Nn(n))))):(b=l&~d,b!==0?c=Nn(b):y!==0?c=Nn(y):n||(n=l&~e,n!==0&&(c=Nn(n)))),c===0?0:t!==0&&t!==c&&(t&d)===0&&(d=c&-c,n=t&-t,d>=n||d===32&&(n&4194048)!==0)?t:c}function ir(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ey(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jd(){var e=vi;return vi<<=1,(vi&62914560)===0&&(vi=4194304),e}function oo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function lr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ry(e,t,n,l,c,d){var y=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var b=e.entanglements,k=e.expirationTimes,z=e.hiddenUpdates;for(n=y&~n;0<n;){var K=31-$t(n),J=1<<K;b[K]=0,k[K]=-1;var H=z[K];if(H!==null)for(z[K]=null,K=0;K<H.length;K++){var P=H[K];P!==null&&(P.lane&=-536870913)}n&=~J}l!==0&&Sd(e,l,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~t))}function Sd(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-$t(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function Nd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-$t(n),c=1<<l;c&t|e[l]&t&&(e[l]|=t),n&=~c}}function _d(e,t){var n=t&-t;return n=(n&42)!==0?1:co(n),(n&(e.suspendedLanes|t))!==0?0:n}function co(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function uo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function kd(){var e=C.p;return e!==0?e:(e=window.event,e===void 0?32:hp(e.type))}function Td(e,t){var n=C.p;try{return C.p=e,t()}finally{C.p=n}}var Ka=Math.random().toString(36).slice(2),xt="__reactFiber$"+Ka,Rt="__reactProps$"+Ka,ts="__reactContainer$"+Ka,ho="__reactEvents$"+Ka,Cy="__reactListeners$"+Ka,Ay="__reactHandles$"+Ka,Ed="__reactResources$"+Ka,or="__reactMarker$"+Ka;function fo(e){delete e[xt],delete e[Rt],delete e[ho],delete e[Cy],delete e[Ay]}function as(e){var t=e[xt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ts]||n[xt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qm(e);e!==null;){if(n=e[xt])return n;e=Qm(e)}return t}e=n,n=e.parentNode}return null}function ns(e){if(e=e[xt]||e[ts]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function cr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function ss(e){var t=e[Ed];return t||(t=e[Ed]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function yt(e){e[or]=!0}var Rd=new Set,Cd={};function _n(e,t){rs(e,t),rs(e+"Capture",t)}function rs(e,t){for(Cd[e]=t,e=0;e<t.length;e++)Rd.add(t[e])}var Oy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ad={},Od={};function Dy(e){return ro.call(Od,e)?!0:ro.call(Ad,e)?!1:Oy.test(e)?Od[e]=!0:(Ad[e]=!0,!1)}function ji(e,t,n){if(Dy(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Si(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Sa(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function Zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function My(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,d=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){n=""+y,d.call(this,y)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(y){n=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function mo(e){if(!e._valueTracker){var t=Dd(e)?"checked":"value";e._valueTracker=My(e,t,""+e[t])}}function Md(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=Dd(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function Ni(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Uy=/[\n"\\]/g;function Xt(e){return e.replace(Uy,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function po(e,t,n,l,c,d,y,b){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Zt(t)):e.value!==""+Zt(t)&&(e.value=""+Zt(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?go(e,y,Zt(t)):n!=null?go(e,y,Zt(n)):l!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Zt(b):e.removeAttribute("name")}function Ud(e,t,n,l,c,d,y,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||n!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){mo(e);return}n=n!=null?""+Zt(n):"",t=t!=null?""+Zt(t):n,b||t===e.value||(e.value=t),e.defaultValue=t}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),mo(e)}function go(e,t,n){t==="number"&&Ni(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function is(e,t,n,l){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&l&&(e[n].defaultSelected=!0)}else{for(n=""+Zt(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Ld(e,t,n){if(t!=null&&(t=""+Zt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Zt(n):""}function Bd(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(o(92));if(D(l)){if(1<l.length)throw Error(o(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=Zt(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),mo(e)}function ls(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ly=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zd(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Ly.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function $d(e,t,n){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var c in t)l=t[c],t.hasOwnProperty(c)&&n[c]!==l&&zd(e,c,l)}else for(var d in t)t.hasOwnProperty(d)&&zd(e,d,t[d])}function yo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var By=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _i(e){return zy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Na(){}var bo=null;function xo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var os=null,cs=null;function Hd(e){var t=ns(e);if(t&&(e=t.stateNode)){var n=e[Rt]||null;e:switch(e=t.stateNode,t.type){case"input":if(po(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Xt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var c=l[Rt]||null;if(!c)throw Error(o(90));po(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&Md(l)}break e;case"textarea":Ld(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&is(e,!!n.multiple,t,!1)}}}var vo=!1;function Gd(e,t,n){if(vo)return e(t,n);vo=!0;try{var l=e(t);return l}finally{if(vo=!1,(os!==null||cs!==null)&&(hl(),os&&(t=os,e=cs,cs=os=null,Hd(t),e)))for(t=0;t<e.length;t++)Hd(e[t])}}function ur(e,t){var n=e.stateNode;if(n===null)return null;var l=n[Rt]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var _a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wo=!1;if(_a)try{var dr={};Object.defineProperty(dr,"passive",{get:function(){wo=!0}}),window.addEventListener("test",dr,dr),window.removeEventListener("test",dr,dr)}catch{wo=!1}var Ya=null,jo=null,ki=null;function qd(){if(ki)return ki;var e,t=jo,n=t.length,l,c="value"in Ya?Ya.value:Ya.textContent,d=c.length;for(e=0;e<n&&t[e]===c[e];e++);var y=n-e;for(l=1;l<=y&&t[n-l]===c[d-l];l++);return ki=c.slice(e,1<l?1-l:void 0)}function Ti(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ei(){return!0}function Pd(){return!1}function Ct(e){function t(n,l,c,d,y){this._reactName=n,this._targetInst=c,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(n=e[b],this[b]=n?n(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ei:Pd,this.isPropagationStopped=Pd,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),t}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=Ct(kn),hr=j({},kn,{view:0,detail:0}),$y=Ct(hr),So,No,fr,Ci=j({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ko,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fr&&(fr&&e.type==="mousemove"?(So=e.screenX-fr.screenX,No=e.screenY-fr.screenY):No=So=0,fr=e),So)},movementY:function(e){return"movementY"in e?e.movementY:No}}),Id=Ct(Ci),Hy=j({},Ci,{dataTransfer:0}),Gy=Ct(Hy),qy=j({},hr,{relatedTarget:0}),_o=Ct(qy),Py=j({},kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Iy=Ct(Py),Vy=j({},kn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ky=Ct(Vy),Yy=j({},kn,{data:0}),Vd=Ct(Yy),Jy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Qy[e])?!!t[e]:!1}function ko(){return Zy}var Xy=j({},hr,{key:function(e){if(e.key){var t=Jy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ti(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ko,charCode:function(e){return e.type==="keypress"?Ti(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ti(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fy=Ct(Xy),eb=j({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kd=Ct(eb),tb=j({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ko}),ab=Ct(tb),nb=j({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),sb=Ct(nb),rb=j({},Ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ib=Ct(rb),lb=j({},kn,{newState:0,oldState:0}),ob=Ct(lb),cb=[9,13,27,32],To=_a&&"CompositionEvent"in window,mr=null;_a&&"documentMode"in document&&(mr=document.documentMode);var ub=_a&&"TextEvent"in window&&!mr,Yd=_a&&(!To||mr&&8<mr&&11>=mr),Jd=" ",Wd=!1;function Qd(e,t){switch(e){case"keyup":return cb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var us=!1;function db(e,t){switch(e){case"compositionend":return Zd(t);case"keypress":return t.which!==32?null:(Wd=!0,Jd);case"textInput":return e=t.data,e===Jd&&Wd?null:e;default:return null}}function hb(e,t){if(us)return e==="compositionend"||!To&&Qd(e,t)?(e=qd(),ki=jo=Ya=null,us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yd&&t.locale!=="ko"?null:t.data;default:return null}}var fb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fb[e.type]:t==="textarea"}function Fd(e,t,n,l){os?cs?cs.push(l):cs=[l]:os=l,t=xl(t,"onChange"),0<t.length&&(n=new Ri("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var pr=null,gr=null;function mb(e){Lm(e,0)}function Ai(e){var t=cr(e);if(Md(t))return e}function eh(e,t){if(e==="change")return t}var th=!1;if(_a){var Eo;if(_a){var Ro="oninput"in document;if(!Ro){var ah=document.createElement("div");ah.setAttribute("oninput","return;"),Ro=typeof ah.oninput=="function"}Eo=Ro}else Eo=!1;th=Eo&&(!document.documentMode||9<document.documentMode)}function nh(){pr&&(pr.detachEvent("onpropertychange",sh),gr=pr=null)}function sh(e){if(e.propertyName==="value"&&Ai(gr)){var t=[];Fd(t,gr,e,xo(e)),Gd(mb,t)}}function pb(e,t,n){e==="focusin"?(nh(),pr=t,gr=n,pr.attachEvent("onpropertychange",sh)):e==="focusout"&&nh()}function gb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ai(gr)}function yb(e,t){if(e==="click")return Ai(t)}function bb(e,t){if(e==="input"||e==="change")return Ai(t)}function xb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:xb;function yr(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var c=n[l];if(!ro.call(t,c)||!Ht(e[c],t[c]))return!1}return!0}function rh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ih(e,t){var n=rh(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rh(n)}}function lh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ni(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ni(e.document)}return t}function Co(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var vb=_a&&"documentMode"in document&&11>=document.documentMode,ds=null,Ao=null,br=null,Oo=!1;function ch(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Oo||ds==null||ds!==Ni(l)||(l=ds,"selectionStart"in l&&Co(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),br&&yr(br,l)||(br=l,l=xl(Ao,"onSelect"),0<l.length&&(t=new Ri("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=ds)))}function Tn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hs={animationend:Tn("Animation","AnimationEnd"),animationiteration:Tn("Animation","AnimationIteration"),animationstart:Tn("Animation","AnimationStart"),transitionrun:Tn("Transition","TransitionRun"),transitionstart:Tn("Transition","TransitionStart"),transitioncancel:Tn("Transition","TransitionCancel"),transitionend:Tn("Transition","TransitionEnd")},Do={},uh={};_a&&(uh=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function En(e){if(Do[e])return Do[e];if(!hs[e])return e;var t=hs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uh)return Do[e]=t[n];return e}var dh=En("animationend"),hh=En("animationiteration"),fh=En("animationstart"),wb=En("transitionrun"),jb=En("transitionstart"),Sb=En("transitioncancel"),mh=En("transitionend"),ph=new Map,Mo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mo.push("scrollEnd");function ua(e,t){ph.set(e,t),_n(t,[e])}var Oi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ft=[],fs=0,Uo=0;function Di(){for(var e=fs,t=Uo=fs=0;t<e;){var n=Ft[t];Ft[t++]=null;var l=Ft[t];Ft[t++]=null;var c=Ft[t];Ft[t++]=null;var d=Ft[t];if(Ft[t++]=null,l!==null&&c!==null){var y=l.pending;y===null?c.next=c:(c.next=y.next,y.next=c),l.pending=c}d!==0&&gh(n,c,d)}}function Mi(e,t,n,l){Ft[fs++]=e,Ft[fs++]=t,Ft[fs++]=n,Ft[fs++]=l,Uo|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Lo(e,t,n,l){return Mi(e,t,n,l),Ui(e)}function Rn(e,t){return Mi(e,null,null,t),Ui(e)}function gh(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var c=!1,d=e.return;d!==null;)d.childLanes|=n,l=d.alternate,l!==null&&(l.childLanes|=n),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&t!==null&&(c=31-$t(n),e=d.hiddenUpdates,l=e[c],l===null?e[c]=[t]:l.push(t),t.lane=n|536870912),d):null}function Ui(e){if(50<Hr)throw Hr=0,Vc=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ms={};function Nb(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,n,l){return new Nb(e,t,n,l)}function Bo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ka(e,t){var n=e.alternate;return n===null?(n=Gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function yh(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Li(e,t,n,l,c,d){var y=0;if(l=e,typeof e=="function")Bo(e)&&(y=1);else if(typeof e=="string")y=Rx(e,n,F.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case xe:return e=Gt(31,n,t,c),e.elementType=xe,e.lanes=d,e;case S:return Cn(n.children,c,d,t);case E:y=8,c|=24;break;case q:return e=Gt(12,n,t,c|2),e.elementType=q,e.lanes=d,e;case L:return e=Gt(13,n,t,c),e.elementType=L,e.lanes=d,e;case G:return e=Gt(19,n,t,c),e.elementType=G,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:y=10;break e;case U:y=9;break e;case I:y=11;break e;case Z:y=14;break e;case X:y=16,l=null;break e}y=29,n=Error(o(130,e===null?"null":typeof e,"")),l=null}return t=Gt(y,n,t,c),t.elementType=e,t.type=l,t.lanes=d,t}function Cn(e,t,n,l){return e=Gt(7,e,l,t),e.lanes=n,e}function zo(e,t,n){return e=Gt(6,e,null,t),e.lanes=n,e}function bh(e){var t=Gt(18,null,null,0);return t.stateNode=e,t}function $o(e,t,n){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var xh=new WeakMap;function ea(e,t){if(typeof e=="object"&&e!==null){var n=xh.get(e);return n!==void 0?n:(t={value:e,source:t,stack:bd(t)},xh.set(e,t),t)}return{value:e,source:t,stack:bd(t)}}var ps=[],gs=0,Bi=null,xr=0,ta=[],aa=0,Ja=null,ba=1,xa="";function Ta(e,t){ps[gs++]=xr,ps[gs++]=Bi,Bi=e,xr=t}function vh(e,t,n){ta[aa++]=ba,ta[aa++]=xa,ta[aa++]=Ja,Ja=e;var l=ba;e=xa;var c=32-$t(l)-1;l&=~(1<<c),n+=1;var d=32-$t(t)+c;if(30<d){var y=c-c%5;d=(l&(1<<y)-1).toString(32),l>>=y,c-=y,ba=1<<32-$t(t)+c|n<<c|l,xa=d+e}else ba=1<<d|n<<c|l,xa=e}function Ho(e){e.return!==null&&(Ta(e,1),vh(e,1,0))}function Go(e){for(;e===Bi;)Bi=ps[--gs],ps[gs]=null,xr=ps[--gs],ps[gs]=null;for(;e===Ja;)Ja=ta[--aa],ta[aa]=null,xa=ta[--aa],ta[aa]=null,ba=ta[--aa],ta[aa]=null}function wh(e,t){ta[aa++]=ba,ta[aa++]=xa,ta[aa++]=Ja,ba=t.id,xa=t.overflow,Ja=e}var vt=null,Je=null,Ae=!1,Wa=null,na=!1,qo=Error(o(519));function Qa(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vr(ea(t,e)),qo}function jh(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[xt]=e,t[Rt]=l,n){case"dialog":Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":case"embed":Ee("load",t);break;case"video":case"audio":for(n=0;n<qr.length;n++)Ee(qr[n],t);break;case"source":Ee("error",t);break;case"img":case"image":case"link":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"input":Ee("invalid",t),Ud(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ee("invalid",t);break;case"textarea":Ee("invalid",t),Bd(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||Hm(t.textContent,n)?(l.popover!=null&&(Ee("beforetoggle",t),Ee("toggle",t)),l.onScroll!=null&&Ee("scroll",t),l.onScrollEnd!=null&&Ee("scrollend",t),l.onClick!=null&&(t.onclick=Na),t=!0):t=!1,t||Qa(e,!0)}function Sh(e){for(vt=e.return;vt;)switch(vt.tag){case 5:case 31:case 13:na=!1;return;case 27:case 3:na=!0;return;default:vt=vt.return}}function ys(e){if(e!==vt)return!1;if(!Ae)return Sh(e),Ae=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||iu(e.type,e.memoizedProps)),n=!n),n&&Je&&Qa(e),Sh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Je=Wm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Je=Wm(e)}else t===27?(t=Je,dn(e.type)?(e=du,du=null,Je=e):Je=t):Je=vt?ra(e.stateNode.nextSibling):null;return!0}function An(){Je=vt=null,Ae=!1}function Po(){var e=Wa;return e!==null&&(Mt===null?Mt=e:Mt.push.apply(Mt,e),Wa=null),e}function vr(e){Wa===null?Wa=[e]:Wa.push(e)}var Io=T(null),On=null,Ea=null;function Za(e,t,n){W(Io,t._currentValue),t._currentValue=n}function Ra(e){e._currentValue=Io.current,V(Io)}function Vo(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function Ko(e,t,n,l){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var y=c.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=c;for(var k=0;k<t.length;k++)if(b.context===t[k]){d.lanes|=n,b=d.alternate,b!==null&&(b.lanes|=n),Vo(d.return,n,e),l||(y=null);break e}d=b.next}}else if(c.tag===18){if(y=c.return,y===null)throw Error(o(341));y.lanes|=n,d=y.alternate,d!==null&&(d.lanes|=n),Vo(y,n,e),y=null}else y=c.child;if(y!==null)y.return=c;else for(y=c;y!==null;){if(y===e){y=null;break}if(c=y.sibling,c!==null){c.return=y.return,y=c;break}y=y.return}c=y}}function bs(e,t,n,l){e=null;for(var c=t,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var y=c.alternate;if(y===null)throw Error(o(387));if(y=y.memoizedProps,y!==null){var b=c.type;Ht(c.pendingProps.value,y.value)||(e!==null?e.push(b):e=[b])}}else if(c===se.current){if(y=c.alternate,y===null)throw Error(o(387));y.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Yr):e=[Yr])}c=c.return}e!==null&&Ko(t,e,n,l),t.flags|=262144}function zi(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Dn(e){On=e,Ea=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function wt(e){return Nh(On,e)}function $i(e,t){return On===null&&Dn(e),Nh(e,t)}function Nh(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ea===null){if(e===null)throw Error(o(308));Ea=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ea=Ea.next=t;return n}var _b=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},kb=s.unstable_scheduleCallback,Tb=s.unstable_NormalPriority,it={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yo(){return{controller:new _b,data:new Map,refCount:0}}function wr(e){e.refCount--,e.refCount===0&&kb(Tb,function(){e.controller.abort()})}var jr=null,Jo=0,xs=0,vs=null;function Eb(e,t){if(jr===null){var n=jr=[];Jo=0,xs=Zc(),vs={status:"pending",value:void 0,then:function(l){n.push(l)}}}return Jo++,t.then(_h,_h),t}function _h(){if(--Jo===0&&jr!==null){vs!==null&&(vs.status="fulfilled");var e=jr;jr=null,xs=0,vs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Rb(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(l.status="rejected",l.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),l}var kh=N.S;N.S=function(e,t){um=Bt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Eb(e,t),kh!==null&&kh(e,t)};var Mn=T(null);function Wo(){var e=Mn.current;return e!==null?e:Ie.pooledCache}function Hi(e,t){t===null?W(Mn,Mn.current):W(Mn,t.pool)}function Th(){var e=Wo();return e===null?null:{parent:it._currentValue,pool:e}}var ws=Error(o(460)),Qo=Error(o(474)),Gi=Error(o(542)),qi={then:function(){}};function Eh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Rh(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Na,Na),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ah(e),e;default:if(typeof t.status=="string")t.then(Na,Na);else{if(e=Ie,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=l}},function(l){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ah(e),e}throw Ln=t,ws}}function Un(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ln=n,ws):n}}var Ln=null;function Ch(){if(Ln===null)throw Error(o(459));var e=Ln;return Ln=null,e}function Ah(e){if(e===ws||e===Gi)throw Error(o(483))}var js=null,Sr=0;function Pi(e){var t=Sr;return Sr+=1,js===null&&(js=[]),Rh(js,e,t)}function Nr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ii(e,t){throw t.$$typeof===v?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Oh(e){function t(M,R){if(e){var B=M.deletions;B===null?(M.deletions=[R],M.flags|=16):B.push(R)}}function n(M,R){if(!e)return null;for(;R!==null;)t(M,R),R=R.sibling;return null}function l(M){for(var R=new Map;M!==null;)M.key!==null?R.set(M.key,M):R.set(M.index,M),M=M.sibling;return R}function c(M,R){return M=ka(M,R),M.index=0,M.sibling=null,M}function d(M,R,B){return M.index=B,e?(B=M.alternate,B!==null?(B=B.index,B<R?(M.flags|=67108866,R):B):(M.flags|=67108866,R)):(M.flags|=1048576,R)}function y(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function b(M,R,B,Y){return R===null||R.tag!==6?(R=zo(B,M.mode,Y),R.return=M,R):(R=c(R,B),R.return=M,R)}function k(M,R,B,Y){var he=B.type;return he===S?K(M,R,B.props.children,Y,B.key):R!==null&&(R.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===X&&Un(he)===R.type)?(R=c(R,B.props),Nr(R,B),R.return=M,R):(R=Li(B.type,B.key,B.props,null,M.mode,Y),Nr(R,B),R.return=M,R)}function z(M,R,B,Y){return R===null||R.tag!==4||R.stateNode.containerInfo!==B.containerInfo||R.stateNode.implementation!==B.implementation?(R=$o(B,M.mode,Y),R.return=M,R):(R=c(R,B.children||[]),R.return=M,R)}function K(M,R,B,Y,he){return R===null||R.tag!==7?(R=Cn(B,M.mode,Y,he),R.return=M,R):(R=c(R,B),R.return=M,R)}function J(M,R,B){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=zo(""+R,M.mode,B),R.return=M,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case w:return B=Li(R.type,R.key,R.props,null,M.mode,B),Nr(B,R),B.return=M,B;case _:return R=$o(R,M.mode,B),R.return=M,R;case X:return R=Un(R),J(M,R,B)}if(D(R)||Ye(R))return R=Cn(R,M.mode,B,null),R.return=M,R;if(typeof R.then=="function")return J(M,Pi(R),B);if(R.$$typeof===A)return J(M,$i(M,R),B);Ii(M,R)}return null}function H(M,R,B,Y){var he=R!==null?R.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return he!==null?null:b(M,R,""+B,Y);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return B.key===he?k(M,R,B,Y):null;case _:return B.key===he?z(M,R,B,Y):null;case X:return B=Un(B),H(M,R,B,Y)}if(D(B)||Ye(B))return he!==null?null:K(M,R,B,Y,null);if(typeof B.then=="function")return H(M,R,Pi(B),Y);if(B.$$typeof===A)return H(M,R,$i(M,B),Y);Ii(M,B)}return null}function P(M,R,B,Y,he){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return M=M.get(B)||null,b(R,M,""+Y,he);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return M=M.get(Y.key===null?B:Y.key)||null,k(R,M,Y,he);case _:return M=M.get(Y.key===null?B:Y.key)||null,z(R,M,Y,he);case X:return Y=Un(Y),P(M,R,B,Y,he)}if(D(Y)||Ye(Y))return M=M.get(B)||null,K(R,M,Y,he,null);if(typeof Y.then=="function")return P(M,R,B,Pi(Y),he);if(Y.$$typeof===A)return P(M,R,B,$i(R,Y),he);Ii(R,Y)}return null}function re(M,R,B,Y){for(var he=null,De=null,oe=R,Ne=R=0,Ce=null;oe!==null&&Ne<B.length;Ne++){oe.index>Ne?(Ce=oe,oe=null):Ce=oe.sibling;var Me=H(M,oe,B[Ne],Y);if(Me===null){oe===null&&(oe=Ce);break}e&&oe&&Me.alternate===null&&t(M,oe),R=d(Me,R,Ne),De===null?he=Me:De.sibling=Me,De=Me,oe=Ce}if(Ne===B.length)return n(M,oe),Ae&&Ta(M,Ne),he;if(oe===null){for(;Ne<B.length;Ne++)oe=J(M,B[Ne],Y),oe!==null&&(R=d(oe,R,Ne),De===null?he=oe:De.sibling=oe,De=oe);return Ae&&Ta(M,Ne),he}for(oe=l(oe);Ne<B.length;Ne++)Ce=P(oe,M,Ne,B[Ne],Y),Ce!==null&&(e&&Ce.alternate!==null&&oe.delete(Ce.key===null?Ne:Ce.key),R=d(Ce,R,Ne),De===null?he=Ce:De.sibling=Ce,De=Ce);return e&&oe.forEach(function(gn){return t(M,gn)}),Ae&&Ta(M,Ne),he}function ge(M,R,B,Y){if(B==null)throw Error(o(151));for(var he=null,De=null,oe=R,Ne=R=0,Ce=null,Me=B.next();oe!==null&&!Me.done;Ne++,Me=B.next()){oe.index>Ne?(Ce=oe,oe=null):Ce=oe.sibling;var gn=H(M,oe,Me.value,Y);if(gn===null){oe===null&&(oe=Ce);break}e&&oe&&gn.alternate===null&&t(M,oe),R=d(gn,R,Ne),De===null?he=gn:De.sibling=gn,De=gn,oe=Ce}if(Me.done)return n(M,oe),Ae&&Ta(M,Ne),he;if(oe===null){for(;!Me.done;Ne++,Me=B.next())Me=J(M,Me.value,Y),Me!==null&&(R=d(Me,R,Ne),De===null?he=Me:De.sibling=Me,De=Me);return Ae&&Ta(M,Ne),he}for(oe=l(oe);!Me.done;Ne++,Me=B.next())Me=P(oe,M,Ne,Me.value,Y),Me!==null&&(e&&Me.alternate!==null&&oe.delete(Me.key===null?Ne:Me.key),R=d(Me,R,Ne),De===null?he=Me:De.sibling=Me,De=Me);return e&&oe.forEach(function(Hx){return t(M,Hx)}),Ae&&Ta(M,Ne),he}function qe(M,R,B,Y){if(typeof B=="object"&&B!==null&&B.type===S&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case w:e:{for(var he=B.key;R!==null;){if(R.key===he){if(he=B.type,he===S){if(R.tag===7){n(M,R.sibling),Y=c(R,B.props.children),Y.return=M,M=Y;break e}}else if(R.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===X&&Un(he)===R.type){n(M,R.sibling),Y=c(R,B.props),Nr(Y,B),Y.return=M,M=Y;break e}n(M,R);break}else t(M,R);R=R.sibling}B.type===S?(Y=Cn(B.props.children,M.mode,Y,B.key),Y.return=M,M=Y):(Y=Li(B.type,B.key,B.props,null,M.mode,Y),Nr(Y,B),Y.return=M,M=Y)}return y(M);case _:e:{for(he=B.key;R!==null;){if(R.key===he)if(R.tag===4&&R.stateNode.containerInfo===B.containerInfo&&R.stateNode.implementation===B.implementation){n(M,R.sibling),Y=c(R,B.children||[]),Y.return=M,M=Y;break e}else{n(M,R);break}else t(M,R);R=R.sibling}Y=$o(B,M.mode,Y),Y.return=M,M=Y}return y(M);case X:return B=Un(B),qe(M,R,B,Y)}if(D(B))return re(M,R,B,Y);if(Ye(B)){if(he=Ye(B),typeof he!="function")throw Error(o(150));return B=he.call(B),ge(M,R,B,Y)}if(typeof B.then=="function")return qe(M,R,Pi(B),Y);if(B.$$typeof===A)return qe(M,R,$i(M,B),Y);Ii(M,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,R!==null&&R.tag===6?(n(M,R.sibling),Y=c(R,B),Y.return=M,M=Y):(n(M,R),Y=zo(B,M.mode,Y),Y.return=M,M=Y),y(M)):n(M,R)}return function(M,R,B,Y){try{Sr=0;var he=qe(M,R,B,Y);return js=null,he}catch(oe){if(oe===ws||oe===Gi)throw oe;var De=Gt(29,oe,null,M.mode);return De.lanes=Y,De.return=M,De}}}var Bn=Oh(!0),Dh=Oh(!1),Xa=!1;function Zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function en(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ue&2)!==0){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,t=Ui(e),gh(e,null,n),t}return Mi(e,l,t,n),Ui(e)}function _r(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Nd(e,n)}}function Fo(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var c=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var y={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};d===null?c=d=y:d=d.next=y,n=n.next}while(n!==null);d===null?c=d=t:d=d.next=t}else c=d=t;n={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ec=!1;function kr(){if(ec){var e=vs;if(e!==null)throw e}}function Tr(e,t,n,l){ec=!1;var c=e.updateQueue;Xa=!1;var d=c.firstBaseUpdate,y=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var k=b,z=k.next;k.next=null,y===null?d=z:y.next=z,y=k;var K=e.alternate;K!==null&&(K=K.updateQueue,b=K.lastBaseUpdate,b!==y&&(b===null?K.firstBaseUpdate=z:b.next=z,K.lastBaseUpdate=k))}if(d!==null){var J=c.baseState;y=0,K=z=k=null,b=d;do{var H=b.lane&-536870913,P=H!==b.lane;if(P?(Re&H)===H:(l&H)===H){H!==0&&H===xs&&(ec=!0),K!==null&&(K=K.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var re=e,ge=b;H=t;var qe=n;switch(ge.tag){case 1:if(re=ge.payload,typeof re=="function"){J=re.call(qe,J,H);break e}J=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ge.payload,H=typeof re=="function"?re.call(qe,J,H):re,H==null)break e;J=j({},J,H);break e;case 2:Xa=!0}}H=b.callback,H!==null&&(e.flags|=64,P&&(e.flags|=8192),P=c.callbacks,P===null?c.callbacks=[H]:P.push(H))}else P={lane:H,tag:b.tag,payload:b.payload,callback:b.callback,next:null},K===null?(z=K=P,k=J):K=K.next=P,y|=H;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;P=b,b=P.next,P.next=null,c.lastBaseUpdate=P,c.shared.pending=null}}while(!0);K===null&&(k=J),c.baseState=k,c.firstBaseUpdate=z,c.lastBaseUpdate=K,d===null&&(c.shared.lanes=0),rn|=y,e.lanes=y,e.memoizedState=J}}function Mh(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Uh(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Mh(n[e],t)}var Ss=T(null),Vi=T(0);function Lh(e,t){e=za,W(Vi,e),W(Ss,t),za=e|t.baseLanes}function tc(){W(Vi,za),W(Ss,Ss.current)}function ac(){za=Vi.current,V(Ss),V(Vi)}var qt=T(null),sa=null;function tn(e){var t=e.alternate;W(st,st.current&1),W(qt,e),sa===null&&(t===null||Ss.current!==null||t.memoizedState!==null)&&(sa=e)}function nc(e){W(st,st.current),W(qt,e),sa===null&&(sa=e)}function Bh(e){e.tag===22?(W(st,st.current),W(qt,e),sa===null&&(sa=e)):an()}function an(){W(st,st.current),W(qt,qt.current)}function Pt(e){V(qt),sa===e&&(sa=null),V(st)}var st=T(0);function Ki(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||cu(n)||uu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ca=0,je=null,He=null,lt=null,Yi=!1,Ns=!1,zn=!1,Ji=0,Er=0,_s=null,Cb=0;function Fe(){throw Error(o(321))}function sc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function rc(e,t,n,l,c,d){return Ca=d,je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?wf:vc,zn=!1,d=n(l,c),zn=!1,Ns&&(d=$h(t,n,l,c)),zh(e),d}function zh(e){N.H=Ar;var t=He!==null&&He.next!==null;if(Ca=0,lt=He=je=null,Yi=!1,Er=0,_s=null,t)throw Error(o(300));e===null||ot||(e=e.dependencies,e!==null&&zi(e)&&(ot=!0))}function $h(e,t,n,l){je=e;var c=0;do{if(Ns&&(_s=null),Er=0,Ns=!1,25<=c)throw Error(o(301));if(c+=1,lt=He=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}N.H=jf,d=t(n,l)}while(Ns);return d}function Ab(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?Rr(t):t,e=e.useState()[0],(He!==null?He.memoizedState:null)!==e&&(je.flags|=1024),t}function ic(){var e=Ji!==0;return Ji=0,e}function lc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oc(e){if(Yi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Yi=!1}Ca=0,lt=He=je=null,Ns=!1,Er=Ji=0,_s=null}function Et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?je.memoizedState=lt=e:lt=lt.next=e,lt}function rt(){if(He===null){var e=je.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=lt===null?je.memoizedState:lt.next;if(t!==null)lt=t,He=e;else{if(e===null)throw je.alternate===null?Error(o(467)):Error(o(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},lt===null?je.memoizedState=lt=e:lt=lt.next=e}return lt}function Wi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rr(e){var t=Er;return Er+=1,_s===null&&(_s=[]),e=Rh(_s,e,t),t=je,(lt===null?t.memoizedState:lt.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?wf:vc),e}function Qi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Rr(e);if(e.$$typeof===A)return wt(e)}throw Error(o(438,String(e)))}function cc(e){var t=null,n=je.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Wi(),je.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=Le;return t.index++,n}function Aa(e,t){return typeof t=="function"?t(e):t}function Zi(e){var t=rt();return uc(t,He,e)}function uc(e,t,n){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=n;var c=e.baseQueue,d=l.pending;if(d!==null){if(c!==null){var y=c.next;c.next=d.next,d.next=y}t.baseQueue=c=d,l.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{t=c.next;var b=y=null,k=null,z=t,K=!1;do{var J=z.lane&-536870913;if(J!==z.lane?(Re&J)===J:(Ca&J)===J){var H=z.revertLane;if(H===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),J===xs&&(K=!0);else if((Ca&H)===H){z=z.next,H===xs&&(K=!0);continue}else J={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},k===null?(b=k=J,y=d):k=k.next=J,je.lanes|=H,rn|=H;J=z.action,zn&&n(d,J),d=z.hasEagerState?z.eagerState:n(d,J)}else H={lane:J,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},k===null?(b=k=H,y=d):k=k.next=H,je.lanes|=J,rn|=J;z=z.next}while(z!==null&&z!==t);if(k===null?y=d:k.next=b,!Ht(d,e.memoizedState)&&(ot=!0,K&&(n=vs,n!==null)))throw n;e.memoizedState=d,e.baseState=y,e.baseQueue=k,l.lastRenderedState=d}return c===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function dc(e){var t=rt(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var l=n.dispatch,c=n.pending,d=t.memoizedState;if(c!==null){n.pending=null;var y=c=c.next;do d=e(d,y.action),y=y.next;while(y!==c);Ht(d,t.memoizedState)||(ot=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,l]}function Hh(e,t,n){var l=je,c=rt(),d=Ae;if(d){if(n===void 0)throw Error(o(407));n=n()}else n=t();var y=!Ht((He||c).memoizedState,n);if(y&&(c.memoizedState=n,ot=!0),c=c.queue,mc(Ph.bind(null,l,c,e),[e]),c.getSnapshot!==t||y||lt!==null&&lt.memoizedState.tag&1){if(l.flags|=2048,ks(9,{destroy:void 0},qh.bind(null,l,c,n,t),null),Ie===null)throw Error(o(349));d||(Ca&127)!==0||Gh(l,t,n)}return n}function Gh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=je.updateQueue,t===null?(t=Wi(),je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qh(e,t,n,l){t.value=n,t.getSnapshot=l,Ih(t)&&Vh(e)}function Ph(e,t,n){return n(function(){Ih(t)&&Vh(e)})}function Ih(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function Vh(e){var t=Rn(e,2);t!==null&&Ut(t,e,2)}function hc(e){var t=Et();if(typeof e=="function"){var n=e;if(e=n(),zn){Va(!0);try{n()}finally{Va(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:e},t}function Kh(e,t,n,l){return e.baseState=n,uc(e,He,typeof l=="function"?l:Aa)}function Ob(e,t,n,l,c){if(el(e))throw Error(o(485));if(e=t.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};N.T!==null?n(!0):d.isTransition=!1,l(d),n=t.pending,n===null?(d.next=t.pending=d,Yh(t,d)):(d.next=n.next,t.pending=n.next=d)}}function Yh(e,t){var n=t.action,l=t.payload,c=e.state;if(t.isTransition){var d=N.T,y={};N.T=y;try{var b=n(c,l),k=N.S;k!==null&&k(y,b),Jh(e,t,b)}catch(z){fc(e,t,z)}finally{d!==null&&y.types!==null&&(d.types=y.types),N.T=d}}else try{d=n(c,l),Jh(e,t,d)}catch(z){fc(e,t,z)}}function Jh(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){Wh(e,t,l)},function(l){return fc(e,t,l)}):Wh(e,t,n)}function Wh(e,t,n){t.status="fulfilled",t.value=n,Qh(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Yh(e,n)))}function fc(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,Qh(t),t=t.next;while(t!==l)}e.action=null}function Qh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Zh(e,t){return t}function Xh(e,t){if(Ae){var n=Ie.formState;if(n!==null){e:{var l=je;if(Ae){if(Je){t:{for(var c=Je,d=na;c.nodeType!==8;){if(!d){c=null;break t}if(c=ra(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Je=ra(c.nextSibling),l=c.data==="F!";break e}}Qa(l)}l=!1}l&&(t=n[0])}}return n=Et(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zh,lastRenderedState:t},n.queue=l,n=bf.bind(null,je,l),l.dispatch=n,l=hc(!1),d=xc.bind(null,je,!1,l.queue),l=Et(),c={state:t,dispatch:null,action:e,pending:null},l.queue=c,n=Ob.bind(null,je,c,d,n),c.dispatch=n,l.memoizedState=e,[t,n,!1]}function Fh(e){var t=rt();return ef(t,He,e)}function ef(e,t,n){if(t=uc(e,t,Zh)[0],e=Zi(Aa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Rr(t)}catch(y){throw y===ws?Gi:y}else l=t;t=rt();var c=t.queue,d=c.dispatch;return n!==t.memoizedState&&(je.flags|=2048,ks(9,{destroy:void 0},Db.bind(null,c,n),null)),[l,d,e]}function Db(e,t){e.action=t}function tf(e){var t=rt(),n=He;if(n!==null)return ef(t,n,e);rt(),t=t.memoizedState,n=rt();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function ks(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=je.updateQueue,t===null&&(t=Wi(),je.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function af(){return rt().memoizedState}function Xi(e,t,n,l){var c=Et();je.flags|=e,c.memoizedState=ks(1|t,{destroy:void 0},n,l===void 0?null:l)}function Fi(e,t,n,l){var c=rt();l=l===void 0?null:l;var d=c.memoizedState.inst;He!==null&&l!==null&&sc(l,He.memoizedState.deps)?c.memoizedState=ks(t,d,n,l):(je.flags|=e,c.memoizedState=ks(1|t,d,n,l))}function nf(e,t){Xi(8390656,8,e,t)}function mc(e,t){Fi(2048,8,e,t)}function Mb(e){je.flags|=4;var t=je.updateQueue;if(t===null)t=Wi(),je.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function sf(e){var t=rt().memoizedState;return Mb({ref:t,nextImpl:e}),function(){if((Ue&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function rf(e,t){return Fi(4,2,e,t)}function lf(e,t){return Fi(4,4,e,t)}function of(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cf(e,t,n){n=n!=null?n.concat([e]):null,Fi(4,4,of.bind(null,t,e),n)}function pc(){}function uf(e,t){var n=rt();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&sc(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function df(e,t){var n=rt();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&sc(t,l[1]))return l[0];if(l=e(),zn){Va(!0);try{e()}finally{Va(!1)}}return n.memoizedState=[l,t],l}function gc(e,t,n){return n===void 0||(Ca&1073741824)!==0&&(Re&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=hm(),je.lanes|=e,rn|=e,n)}function hf(e,t,n,l){return Ht(n,t)?n:Ss.current!==null?(e=gc(e,n,l),Ht(e,t)||(ot=!0),e):(Ca&42)===0||(Ca&1073741824)!==0&&(Re&261930)===0?(ot=!0,e.memoizedState=n):(e=hm(),je.lanes|=e,rn|=e,t)}function ff(e,t,n,l,c){var d=C.p;C.p=d!==0&&8>d?d:8;var y=N.T,b={};N.T=b,xc(e,!1,t,n);try{var k=c(),z=N.S;if(z!==null&&z(b,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var K=Rb(k,l);Cr(e,t,K,Kt(e))}else Cr(e,t,l,Kt(e))}catch(J){Cr(e,t,{then:function(){},status:"rejected",reason:J},Kt())}finally{C.p=d,y!==null&&b.types!==null&&(y.types=b.types),N.T=y}}function Ub(){}function yc(e,t,n,l){if(e.tag!==5)throw Error(o(476));var c=mf(e).queue;ff(e,c,t,$,n===null?Ub:function(){return pf(e),n(l)})}function mf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:$},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function pf(e){var t=mf(e);t.next===null&&(t=e.alternate.memoizedState),Cr(e,t.next.queue,{},Kt())}function bc(){return wt(Yr)}function gf(){return rt().memoizedState}function yf(){return rt().memoizedState}function Lb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Kt();e=Fa(n);var l=en(t,e,n);l!==null&&(Ut(l,t,n),_r(l,t,n)),t={cache:Yo()},e.payload=t;return}t=t.return}}function Bb(e,t,n){var l=Kt();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},el(e)?xf(t,n):(n=Lo(e,t,n,l),n!==null&&(Ut(n,e,l),vf(n,t,l)))}function bf(e,t,n){var l=Kt();Cr(e,t,n,l)}function Cr(e,t,n,l){var c={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(el(e))xf(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var y=t.lastRenderedState,b=d(y,n);if(c.hasEagerState=!0,c.eagerState=b,Ht(b,y))return Mi(e,t,c,0),Ie===null&&Di(),!1}catch{}if(n=Lo(e,t,c,l),n!==null)return Ut(n,e,l),vf(n,t,l),!0}return!1}function xc(e,t,n,l){if(l={lane:2,revertLane:Zc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},el(e)){if(t)throw Error(o(479))}else t=Lo(e,n,l,2),t!==null&&Ut(t,e,2)}function el(e){var t=e.alternate;return e===je||t!==null&&t===je}function xf(e,t){Ns=Yi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vf(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Nd(e,n)}}var Ar={readContext:wt,use:Qi,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe};Ar.useEffectEvent=Fe;var wf={readContext:wt,use:Qi,useCallback:function(e,t){return Et().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:nf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Xi(4194308,4,of.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xi(4194308,4,e,t)},useInsertionEffect:function(e,t){Xi(4,2,e,t)},useMemo:function(e,t){var n=Et();t=t===void 0?null:t;var l=e();if(zn){Va(!0);try{e()}finally{Va(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=Et();if(n!==void 0){var c=n(t);if(zn){Va(!0);try{n(t)}finally{Va(!1)}}}else c=t;return l.memoizedState=l.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},l.queue=e,e=e.dispatch=Bb.bind(null,je,e),[l.memoizedState,e]},useRef:function(e){var t=Et();return e={current:e},t.memoizedState=e},useState:function(e){e=hc(e);var t=e.queue,n=bf.bind(null,je,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:pc,useDeferredValue:function(e,t){var n=Et();return gc(n,e,t)},useTransition:function(){var e=hc(!1);return e=ff.bind(null,je,e.queue,!0,!1),Et().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=je,c=Et();if(Ae){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),Ie===null)throw Error(o(349));(Re&127)!==0||Gh(l,t,n)}c.memoizedState=n;var d={value:n,getSnapshot:t};return c.queue=d,nf(Ph.bind(null,l,d,e),[e]),l.flags|=2048,ks(9,{destroy:void 0},qh.bind(null,l,d,n,t),null),n},useId:function(){var e=Et(),t=Ie.identifierPrefix;if(Ae){var n=xa,l=ba;n=(l&~(1<<32-$t(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Ji++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Cb++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:bc,useFormState:Xh,useActionState:Xh,useOptimistic:function(e){var t=Et();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=xc.bind(null,je,!0,n),n.dispatch=t,[e,t]},useMemoCache:cc,useCacheRefresh:function(){return Et().memoizedState=Lb.bind(null,je)},useEffectEvent:function(e){var t=Et(),n={impl:e};return t.memoizedState=n,function(){if((Ue&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},vc={readContext:wt,use:Qi,useCallback:uf,useContext:wt,useEffect:mc,useImperativeHandle:cf,useInsertionEffect:rf,useLayoutEffect:lf,useMemo:df,useReducer:Zi,useRef:af,useState:function(){return Zi(Aa)},useDebugValue:pc,useDeferredValue:function(e,t){var n=rt();return hf(n,He.memoizedState,e,t)},useTransition:function(){var e=Zi(Aa)[0],t=rt().memoizedState;return[typeof e=="boolean"?e:Rr(e),t]},useSyncExternalStore:Hh,useId:gf,useHostTransitionStatus:bc,useFormState:Fh,useActionState:Fh,useOptimistic:function(e,t){var n=rt();return Kh(n,He,e,t)},useMemoCache:cc,useCacheRefresh:yf};vc.useEffectEvent=sf;var jf={readContext:wt,use:Qi,useCallback:uf,useContext:wt,useEffect:mc,useImperativeHandle:cf,useInsertionEffect:rf,useLayoutEffect:lf,useMemo:df,useReducer:dc,useRef:af,useState:function(){return dc(Aa)},useDebugValue:pc,useDeferredValue:function(e,t){var n=rt();return He===null?gc(n,e,t):hf(n,He.memoizedState,e,t)},useTransition:function(){var e=dc(Aa)[0],t=rt().memoizedState;return[typeof e=="boolean"?e:Rr(e),t]},useSyncExternalStore:Hh,useId:gf,useHostTransitionStatus:bc,useFormState:tf,useActionState:tf,useOptimistic:function(e,t){var n=rt();return He!==null?Kh(n,He,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:cc,useCacheRefresh:yf};jf.useEffectEvent=sf;function wc(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:j({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jc={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Kt(),c=Fa(l);c.payload=t,n!=null&&(c.callback=n),t=en(e,c,l),t!==null&&(Ut(t,e,l),_r(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Kt(),c=Fa(l);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=en(e,c,l),t!==null&&(Ut(t,e,l),_r(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kt(),l=Fa(n);l.tag=2,t!=null&&(l.callback=t),t=en(e,l,n),t!==null&&(Ut(t,e,n),_r(t,e,n))}};function Sf(e,t,n,l,c,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,y):t.prototype&&t.prototype.isPureReactComponent?!yr(n,l)||!yr(c,d):!0}function Nf(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&jc.enqueueReplaceState(t,t.state,null)}function $n(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=j({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}function _f(e){Oi(e)}function kf(e){console.error(e)}function Tf(e){Oi(e)}function tl(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Ef(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Sc(e,t,n){return n=Fa(n),n.tag=3,n.payload={element:null},n.callback=function(){tl(e,t)},n}function Rf(e){return e=Fa(e),e.tag=3,e}function Cf(e,t,n,l){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=l.value;e.payload=function(){return c(d)},e.callback=function(){Ef(t,n,l)}}var y=n.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Ef(t,n,l),typeof c!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function zb(e,t,n,l,c){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&bs(t,n,c,!0),n=qt.current,n!==null){switch(n.tag){case 31:case 13:return sa===null?fl():n.alternate===null&&et===0&&(et=3),n.flags&=-257,n.flags|=65536,n.lanes=c,l===qi?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),Jc(e,l,c)),!1;case 22:return n.flags|=65536,l===qi?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),Jc(e,l,c)),!1}throw Error(o(435,n.tag))}return Jc(e,l,c),fl(),!1}if(Ae)return t=qt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,l!==qo&&(e=Error(o(422),{cause:l}),vr(ea(e,n)))):(l!==qo&&(t=Error(o(423),{cause:l}),vr(ea(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,l=ea(l,n),c=Sc(e.stateNode,l,c),Fo(e,c),et!==4&&(et=2)),!1;var d=Error(o(520),{cause:l});if(d=ea(d,n),$r===null?$r=[d]:$r.push(d),et!==4&&(et=2),t===null)return!0;l=ea(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=Sc(n.stateNode,l,e),Fo(n,e),!1;case 1:if(t=n.type,d=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ln===null||!ln.has(d))))return n.flags|=65536,c&=-c,n.lanes|=c,c=Rf(c),Cf(c,e,n,l),Fo(n,c),!1}n=n.return}while(n!==null);return!1}var Nc=Error(o(461)),ot=!1;function jt(e,t,n,l){t.child=e===null?Dh(t,null,n,l):Bn(t,e.child,n,l)}function Af(e,t,n,l,c){n=n.render;var d=t.ref;if("ref"in l){var y={};for(var b in l)b!=="ref"&&(y[b]=l[b])}else y=l;return Dn(t),l=rc(e,t,n,y,d,c),b=ic(),e!==null&&!ot?(lc(e,t,c),Oa(e,t,c)):(Ae&&b&&Ho(t),t.flags|=1,jt(e,t,l,c),t.child)}function Of(e,t,n,l,c){if(e===null){var d=n.type;return typeof d=="function"&&!Bo(d)&&d.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=d,Df(e,t,d,l,c)):(e=Li(n.type,null,l,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!Oc(e,c)){var y=d.memoizedProps;if(n=n.compare,n=n!==null?n:yr,n(y,l)&&e.ref===t.ref)return Oa(e,t,c)}return t.flags|=1,e=ka(d,l),e.ref=t.ref,e.return=t,t.child=e}function Df(e,t,n,l,c){if(e!==null){var d=e.memoizedProps;if(yr(d,l)&&e.ref===t.ref)if(ot=!1,t.pendingProps=l=d,Oc(e,c))(e.flags&131072)!==0&&(ot=!0);else return t.lanes=e.lanes,Oa(e,t,c)}return _c(e,t,n,l,c)}function Mf(e,t,n,l){var c=l.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|n:n,e!==null){for(l=t.child=e.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~d}else l=0,t.child=null;return Uf(e,t,d,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Hi(t,d!==null?d.cachePool:null),d!==null?Lh(t,d):tc(),Bh(t);else return l=t.lanes=536870912,Uf(e,t,d!==null?d.baseLanes|n:n,n,l)}else d!==null?(Hi(t,d.cachePool),Lh(t,d),an(),t.memoizedState=null):(e!==null&&Hi(t,null),tc(),an());return jt(e,t,c,n),t.child}function Or(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Uf(e,t,n,l,c){var d=Wo();return d=d===null?null:{parent:it._currentValue,pool:d},t.memoizedState={baseLanes:n,cachePool:d},e!==null&&Hi(t,null),tc(),Bh(t),e!==null&&bs(e,t,l,!0),t.childLanes=c,null}function al(e,t){return t=sl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Lf(e,t,n){return Bn(t,e.child,null,n),e=al(t,t.pendingProps),e.flags|=2,Pt(t),t.memoizedState=null,e}function $b(e,t,n){var l=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ae){if(l.mode==="hidden")return e=al(t,l),t.lanes=536870912,Or(null,e);if(nc(t),(e=Je)?(e=Jm(e,na),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ja!==null?{id:ba,overflow:xa}:null,retryLane:536870912,hydrationErrors:null},n=bh(e),n.return=t,t.child=n,vt=t,Je=null)):e=null,e===null)throw Qa(t);return t.lanes=536870912,null}return al(t,l)}var d=e.memoizedState;if(d!==null){var y=d.dehydrated;if(nc(t),c)if(t.flags&256)t.flags&=-257,t=Lf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(ot||bs(e,t,n,!1),c=(n&e.childLanes)!==0,ot||c){if(l=Ie,l!==null&&(y=_d(l,n),y!==0&&y!==d.retryLane))throw d.retryLane=y,Rn(e,y),Ut(l,e,y),Nc;fl(),t=Lf(e,t,n)}else e=d.treeContext,Je=ra(y.nextSibling),vt=t,Ae=!0,Wa=null,na=!1,e!==null&&wh(t,e),t=al(t,l),t.flags|=4096;return t}return e=ka(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function nl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function _c(e,t,n,l,c){return Dn(t),n=rc(e,t,n,l,void 0,c),l=ic(),e!==null&&!ot?(lc(e,t,c),Oa(e,t,c)):(Ae&&l&&Ho(t),t.flags|=1,jt(e,t,n,c),t.child)}function Bf(e,t,n,l,c,d){return Dn(t),t.updateQueue=null,n=$h(t,l,n,c),zh(e),l=ic(),e!==null&&!ot?(lc(e,t,d),Oa(e,t,d)):(Ae&&l&&Ho(t),t.flags|=1,jt(e,t,n,d),t.child)}function zf(e,t,n,l,c){if(Dn(t),t.stateNode===null){var d=ms,y=n.contextType;typeof y=="object"&&y!==null&&(d=wt(y)),d=new n(l,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=jc,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=l,d.state=t.memoizedState,d.refs={},Zo(t),y=n.contextType,d.context=typeof y=="object"&&y!==null?wt(y):ms,d.state=t.memoizedState,y=n.getDerivedStateFromProps,typeof y=="function"&&(wc(t,n,y,l),d.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&jc.enqueueReplaceState(d,d.state,null),Tr(t,l,d,c),kr(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){d=t.stateNode;var b=t.memoizedProps,k=$n(n,b);d.props=k;var z=d.context,K=n.contextType;y=ms,typeof K=="object"&&K!==null&&(y=wt(K));var J=n.getDerivedStateFromProps;K=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||z!==y)&&Nf(t,d,l,y),Xa=!1;var H=t.memoizedState;d.state=H,Tr(t,l,d,c),kr(),z=t.memoizedState,b||H!==z||Xa?(typeof J=="function"&&(wc(t,n,J,l),z=t.memoizedState),(k=Xa||Sf(t,n,k,l,H,z,y))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=z),d.props=l,d.state=z,d.context=y,l=k):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{d=t.stateNode,Xo(e,t),y=t.memoizedProps,K=$n(n,y),d.props=K,J=t.pendingProps,H=d.context,z=n.contextType,k=ms,typeof z=="object"&&z!==null&&(k=wt(z)),b=n.getDerivedStateFromProps,(z=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==J||H!==k)&&Nf(t,d,l,k),Xa=!1,H=t.memoizedState,d.state=H,Tr(t,l,d,c),kr();var P=t.memoizedState;y!==J||H!==P||Xa||e!==null&&e.dependencies!==null&&zi(e.dependencies)?(typeof b=="function"&&(wc(t,n,b,l),P=t.memoizedState),(K=Xa||Sf(t,n,K,l,H,P,k)||e!==null&&e.dependencies!==null&&zi(e.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,P,k),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,P,k)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=P),d.props=l,d.state=P,d.context=k,l=K):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),l=!1)}return d=l,nl(e,t),l=(t.flags&128)!==0,d||l?(d=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&l?(t.child=Bn(t,e.child,null,c),t.child=Bn(t,null,n,c)):jt(e,t,n,c),t.memoizedState=d.state,e=t.child):e=Oa(e,t,c),e}function $f(e,t,n,l){return An(),t.flags|=256,jt(e,t,n,l),t.child}var kc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tc(e){return{baseLanes:e,cachePool:Th()}}function Ec(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Vt),e}function Hf(e,t,n){var l=t.pendingProps,c=!1,d=(t.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(st.current&2)!==0),y&&(c=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ae){if(c?tn(t):an(),(e=Je)?(e=Jm(e,na),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ja!==null?{id:ba,overflow:xa}:null,retryLane:536870912,hydrationErrors:null},n=bh(e),n.return=t,t.child=n,vt=t,Je=null)):e=null,e===null)throw Qa(t);return uu(e)?t.lanes=32:t.lanes=536870912,null}var b=l.children;return l=l.fallback,c?(an(),c=t.mode,b=sl({mode:"hidden",children:b},c),l=Cn(l,c,n,null),b.return=t,l.return=t,b.sibling=l,t.child=b,l=t.child,l.memoizedState=Tc(n),l.childLanes=Ec(e,y,n),t.memoizedState=kc,Or(null,l)):(tn(t),Rc(t,b))}var k=e.memoizedState;if(k!==null&&(b=k.dehydrated,b!==null)){if(d)t.flags&256?(tn(t),t.flags&=-257,t=Cc(e,t,n)):t.memoizedState!==null?(an(),t.child=e.child,t.flags|=128,t=null):(an(),b=l.fallback,c=t.mode,l=sl({mode:"visible",children:l.children},c),b=Cn(b,c,n,null),b.flags|=2,l.return=t,b.return=t,l.sibling=b,t.child=l,Bn(t,e.child,null,n),l=t.child,l.memoizedState=Tc(n),l.childLanes=Ec(e,y,n),t.memoizedState=kc,t=Or(null,l));else if(tn(t),uu(b)){if(y=b.nextSibling&&b.nextSibling.dataset,y)var z=y.dgst;y=z,l=Error(o(419)),l.stack="",l.digest=y,vr({value:l,source:null,stack:null}),t=Cc(e,t,n)}else if(ot||bs(e,t,n,!1),y=(n&e.childLanes)!==0,ot||y){if(y=Ie,y!==null&&(l=_d(y,n),l!==0&&l!==k.retryLane))throw k.retryLane=l,Rn(e,l),Ut(y,e,l),Nc;cu(b)||fl(),t=Cc(e,t,n)}else cu(b)?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,Je=ra(b.nextSibling),vt=t,Ae=!0,Wa=null,na=!1,e!==null&&wh(t,e),t=Rc(t,l.children),t.flags|=4096);return t}return c?(an(),b=l.fallback,c=t.mode,k=e.child,z=k.sibling,l=ka(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,z!==null?b=ka(z,b):(b=Cn(b,c,n,null),b.flags|=2),b.return=t,l.return=t,l.sibling=b,t.child=l,Or(null,l),l=t.child,b=e.child.memoizedState,b===null?b=Tc(n):(c=b.cachePool,c!==null?(k=it._currentValue,c=c.parent!==k?{parent:k,pool:k}:c):c=Th(),b={baseLanes:b.baseLanes|n,cachePool:c}),l.memoizedState=b,l.childLanes=Ec(e,y,n),t.memoizedState=kc,Or(e.child,l)):(tn(t),n=e.child,e=n.sibling,n=ka(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=n,t.memoizedState=null,n)}function Rc(e,t){return t=sl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function sl(e,t){return e=Gt(22,e,null,t),e.lanes=0,e}function Cc(e,t,n){return Bn(t,e.child,null,n),e=Rc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gf(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Vo(e.return,t,n)}function Ac(e,t,n,l,c,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:c,treeForkCount:d}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=n,y.tailMode=c,y.treeForkCount=d)}function qf(e,t,n){var l=t.pendingProps,c=l.revealOrder,d=l.tail;l=l.children;var y=st.current,b=(y&2)!==0;if(b?(y=y&1|2,t.flags|=128):y&=1,W(st,y),jt(e,t,l,n),l=Ae?xr:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gf(e,n,t);else if(e.tag===19)Gf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&Ki(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),Ac(t,!1,c,n,d,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Ki(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}Ac(t,!0,n,null,d,l);break;case"together":Ac(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Oa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rn|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(bs(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=ka(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ka(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Oc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&zi(e)))}function Hb(e,t,n){switch(t.tag){case 3:$e(t,t.stateNode.containerInfo),Za(t,it,e.memoizedState.cache),An();break;case 27:case 5:Lt(t);break;case 4:$e(t,t.stateNode.containerInfo);break;case 10:Za(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,nc(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(tn(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Hf(e,t,n):(tn(t),e=Oa(e,t,n),e!==null?e.sibling:null);tn(t);break;case 19:var c=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(bs(e,t,n,!1),l=(n&t.childLanes)!==0),c){if(l)return qf(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),W(st,st.current),l)break;return null;case 22:return t.lanes=0,Mf(e,t,n,t.pendingProps);case 24:Za(t,it,e.memoizedState.cache)}return Oa(e,t,n)}function Pf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ot=!0;else{if(!Oc(e,n)&&(t.flags&128)===0)return ot=!1,Hb(e,t,n);ot=(e.flags&131072)!==0}else ot=!1,Ae&&(t.flags&1048576)!==0&&vh(t,xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Un(t.elementType),t.type=e,typeof e=="function")Bo(e)?(l=$n(e,l),t.tag=1,t=zf(null,t,e,l,n)):(t.tag=0,t=_c(null,t,e,l,n));else{if(e!=null){var c=e.$$typeof;if(c===I){t.tag=11,t=Af(null,t,e,l,n);break e}else if(c===Z){t.tag=14,t=Of(null,t,e,l,n);break e}}throw t=Q(e)||e,Error(o(306,t,""))}}return t;case 0:return _c(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,c=$n(l,t.pendingProps),zf(e,t,l,c,n);case 3:e:{if($e(t,t.stateNode.containerInfo),e===null)throw Error(o(387));l=t.pendingProps;var d=t.memoizedState;c=d.element,Xo(e,t),Tr(t,l,null,n);var y=t.memoizedState;if(l=y.cache,Za(t,it,l),l!==d.cache&&Ko(t,[it],n,!0),kr(),l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=$f(e,t,l,n);break e}else if(l!==c){c=ea(Error(o(424)),t),vr(c),t=$f(e,t,l,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Je=ra(e.firstChild),vt=t,Ae=!0,Wa=null,na=!0,n=Dh(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(An(),l===c){t=Oa(e,t,n);break e}jt(e,t,l,n)}t=t.child}return t;case 26:return nl(e,t),e===null?(n=ep(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ae||(n=t.type,e=t.pendingProps,l=vl(ve.current).createElement(n),l[xt]=t,l[Rt]=e,St(l,n,e),yt(l),t.stateNode=l):t.memoizedState=ep(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Lt(t),e===null&&Ae&&(l=t.stateNode=Zm(t.type,t.pendingProps,ve.current),vt=t,na=!0,c=Je,dn(t.type)?(du=c,Je=ra(l.firstChild)):Je=c),jt(e,t,t.pendingProps.children,n),nl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ae&&((c=l=Je)&&(l=gx(l,t.type,t.pendingProps,na),l!==null?(t.stateNode=l,vt=t,Je=ra(l.firstChild),na=!1,c=!0):c=!1),c||Qa(t)),Lt(t),c=t.type,d=t.pendingProps,y=e!==null?e.memoizedProps:null,l=d.children,iu(c,d)?l=null:y!==null&&iu(c,y)&&(t.flags|=32),t.memoizedState!==null&&(c=rc(e,t,Ab,null,null,n),Yr._currentValue=c),nl(e,t),jt(e,t,l,n),t.child;case 6:return e===null&&Ae&&((e=n=Je)&&(n=yx(n,t.pendingProps,na),n!==null?(t.stateNode=n,vt=t,Je=null,e=!0):e=!1),e||Qa(t)),null;case 13:return Hf(e,t,n);case 4:return $e(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Bn(t,null,l,n):jt(e,t,l,n),t.child;case 11:return Af(e,t,t.type,t.pendingProps,n);case 7:return jt(e,t,t.pendingProps,n),t.child;case 8:return jt(e,t,t.pendingProps.children,n),t.child;case 12:return jt(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,Za(t,t.type,l.value),jt(e,t,l.children,n),t.child;case 9:return c=t.type._context,l=t.pendingProps.children,Dn(t),c=wt(c),l=l(c),t.flags|=1,jt(e,t,l,n),t.child;case 14:return Of(e,t,t.type,t.pendingProps,n);case 15:return Df(e,t,t.type,t.pendingProps,n);case 19:return qf(e,t,n);case 31:return $b(e,t,n);case 22:return Mf(e,t,n,t.pendingProps);case 24:return Dn(t),l=wt(it),e===null?(c=Wo(),c===null&&(c=Ie,d=Yo(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=n),c=d),t.memoizedState={parent:l,cache:c},Zo(t),Za(t,it,c)):((e.lanes&n)!==0&&(Xo(e,t),Tr(t,null,null,n),kr()),c=e.memoizedState,d=t.memoizedState,c.parent!==l?(c={parent:l,cache:l},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Za(t,it,l)):(l=d.cache,Za(t,it,l),l!==c.cache&&Ko(t,[it],n,!0))),jt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Da(e){e.flags|=4}function Dc(e,t,n,l,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(gm())e.flags|=8192;else throw Ln=qi,Qo}else e.flags&=-16777217}function If(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!rp(t))if(gm())e.flags|=8192;else throw Ln=qi,Qo}function rl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?jd():536870912,e.lanes|=t,Cs|=t)}function Dr(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function We(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Gb(e,t,n){var l=t.pendingProps;switch(Go(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(t),null;case 1:return We(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Ra(it),Oe(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ys(t)?Da(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Po())),We(t),null;case 26:var c=t.type,d=t.memoizedState;return e===null?(Da(t),d!==null?(We(t),If(t,d)):(We(t),Dc(t,c,null,l,n))):d?d!==e.memoizedState?(Da(t),We(t),If(t,d)):(We(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Da(t),We(t),Dc(t,c,e,l,n)),null;case 27:if(ca(t),n=ve.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Da(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return We(t),null}e=F.current,ys(t)?jh(t):(e=Zm(c,l,n),t.stateNode=e,Da(t))}return We(t),null;case 5:if(ca(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Da(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return We(t),null}if(d=F.current,ys(t))jh(t);else{var y=vl(ve.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?y.createElement(c,{is:l.is}):y.createElement(c)}}d[xt]=t,d[Rt]=l;e:for(y=t.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}t.stateNode=d;e:switch(St(d,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Da(t)}}return We(t),Dc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Da(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(e=ve.current,ys(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,c=vt,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}e[xt]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||Hm(e.nodeValue,n)),e||Qa(t,!0)}else e=vl(e).createTextNode(l),e[xt]=t,t.stateNode=e}return We(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=ys(t),n!==null){if(e===null){if(!l)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[xt]=t}else An(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;We(t),e=!1}else n=Po(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Pt(t),t):(Pt(t),null);if((t.flags&128)!==0)throw Error(o(558))}return We(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=ys(t),l!==null&&l.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[xt]=t}else An(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;We(t),c=!1}else c=Po(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Pt(t),t):(Pt(t),null)}return Pt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),rl(t,t.updateQueue),We(t),null);case 4:return Oe(),e===null&&tu(t.stateNode.containerInfo),We(t),null;case 10:return Ra(t.type),We(t),null;case 19:if(V(st),l=t.memoizedState,l===null)return We(t),null;if(c=(t.flags&128)!==0,d=l.rendering,d===null)if(c)Dr(l,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=Ki(e),d!==null){for(t.flags|=128,Dr(l,!1),e=d.updateQueue,t.updateQueue=e,rl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)yh(n,e),n=n.sibling;return W(st,st.current&1|2),Ae&&Ta(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Bt()>ul&&(t.flags|=128,c=!0,Dr(l,!1),t.lanes=4194304)}else{if(!c)if(e=Ki(d),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,rl(t,e),Dr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ae)return We(t),null}else 2*Bt()-l.renderingStartTime>ul&&n!==536870912&&(t.flags|=128,c=!0,Dr(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(e=l.last,e!==null?e.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Bt(),e.sibling=null,n=st.current,W(st,c?n&1|2:n&1),Ae&&Ta(t,l.treeForkCount),e):(We(t),null);case 22:case 23:return Pt(t),ac(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(We(t),t.subtreeFlags&6&&(t.flags|=8192)):We(t),n=t.updateQueue,n!==null&&rl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&V(Mn),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ra(it),We(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function qb(e,t){switch(Go(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ra(it),Oe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ca(t),null;case 31:if(t.memoizedState!==null){if(Pt(t),t.alternate===null)throw Error(o(340));An()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Pt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));An()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V(st),null;case 4:return Oe(),null;case 10:return Ra(t.type),null;case 22:case 23:return Pt(t),ac(),e!==null&&V(Mn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ra(it),null;case 25:return null;default:return null}}function Vf(e,t){switch(Go(t),t.tag){case 3:Ra(it),Oe();break;case 26:case 27:case 5:ca(t);break;case 4:Oe();break;case 31:t.memoizedState!==null&&Pt(t);break;case 13:Pt(t);break;case 19:V(st);break;case 10:Ra(t.type);break;case 22:case 23:Pt(t),ac(),e!==null&&V(Mn);break;case 24:Ra(it)}}function Mr(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var c=l.next;n=c;do{if((n.tag&e)===e){l=void 0;var d=n.create,y=n.inst;l=d(),y.destroy=l}n=n.next}while(n!==c)}}catch(b){ze(t,t.return,b)}}function nn(e,t,n){try{var l=t.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var d=c.next;l=d;do{if((l.tag&e)===e){var y=l.inst,b=y.destroy;if(b!==void 0){y.destroy=void 0,c=t;var k=n,z=b;try{z()}catch(K){ze(c,k,K)}}}l=l.next}while(l!==d)}}catch(K){ze(t,t.return,K)}}function Kf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Uh(t,n)}catch(l){ze(e,e.return,l)}}}function Yf(e,t,n){n.props=$n(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){ze(e,t,l)}}function Ur(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(c){ze(e,t,c)}}function va(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(c){ze(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){ze(e,t,c)}else n.current=null}function Jf(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(c){ze(e,e.return,c)}}function Mc(e,t,n){try{var l=e.stateNode;ux(l,e.type,n,t),l[Rt]=t}catch(c){ze(e,e.return,c)}}function Wf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&dn(e.type)||e.tag===4}function Uc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&dn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lc(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Na));else if(l!==4&&(l===27&&dn(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Lc(e,t,n),e=e.sibling;e!==null;)Lc(e,t,n),e=e.sibling}function il(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&dn(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(il(e,t,n),e=e.sibling;e!==null;)il(e,t,n),e=e.sibling}function Qf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);St(t,l,n),t[xt]=e,t[Rt]=n}catch(d){ze(e,e.return,d)}}var Ma=!1,ct=!1,Bc=!1,Zf=typeof WeakSet=="function"?WeakSet:Set,bt=null;function Pb(e,t){if(e=e.containerInfo,su=Tl,e=oh(e),Co(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var c=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var y=0,b=-1,k=-1,z=0,K=0,J=e,H=null;t:for(;;){for(var P;J!==n||c!==0&&J.nodeType!==3||(b=y+c),J!==d||l!==0&&J.nodeType!==3||(k=y+l),J.nodeType===3&&(y+=J.nodeValue.length),(P=J.firstChild)!==null;)H=J,J=P;for(;;){if(J===e)break t;if(H===n&&++z===c&&(b=y),H===d&&++K===l&&(k=y),(P=J.nextSibling)!==null)break;J=H,H=J.parentNode}J=P}n=b===-1||k===-1?null:{start:b,end:k}}else n=null}n=n||{start:0,end:0}}else n=null;for(ru={focusedElem:e,selectionRange:n},Tl=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){switch(t=bt,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)c=e[n],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,n=t,c=d.memoizedProps,d=d.memoizedState,l=n.stateNode;try{var re=$n(n.type,c);e=l.getSnapshotBeforeUpdate(re,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(ge){ze(n,n.return,ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ou(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ou(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}}function Xf(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:La(e,n),l&4&&Mr(5,n);break;case 1:if(La(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(y){ze(n,n.return,y)}else{var c=$n(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){ze(n,n.return,y)}}l&64&&Kf(n),l&512&&Ur(n,n.return);break;case 3:if(La(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Uh(e,t)}catch(y){ze(n,n.return,y)}}break;case 27:t===null&&l&4&&Qf(n);case 26:case 5:La(e,n),t===null&&l&4&&Jf(n),l&512&&Ur(n,n.return);break;case 12:La(e,n);break;case 31:La(e,n),l&4&&tm(e,n);break;case 13:La(e,n),l&4&&am(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Xb.bind(null,n),bx(e,n))));break;case 22:if(l=n.memoizedState!==null||Ma,!l){t=t!==null&&t.memoizedState!==null||ct,c=Ma;var d=ct;Ma=l,(ct=t)&&!d?Ba(e,n,(n.subtreeFlags&8772)!==0):La(e,n),Ma=c,ct=d}break;case 30:break;default:La(e,n)}}function Ff(e){var t=e.alternate;t!==null&&(e.alternate=null,Ff(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&fo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qe=null,At=!1;function Ua(e,t,n){for(n=n.child;n!==null;)em(e,t,n),n=n.sibling}function em(e,t,n){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(rr,n)}catch{}switch(n.tag){case 26:ct||va(n,t),Ua(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ct||va(n,t);var l=Qe,c=At;dn(n.type)&&(Qe=n.stateNode,At=!1),Ua(e,t,n),Ir(n.stateNode),Qe=l,At=c;break;case 5:ct||va(n,t);case 6:if(l=Qe,c=At,Qe=null,Ua(e,t,n),Qe=l,At=c,Qe!==null)if(At)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(n.stateNode)}catch(d){ze(n,t,d)}else try{Qe.removeChild(n.stateNode)}catch(d){ze(n,t,d)}break;case 18:Qe!==null&&(At?(e=Qe,Km(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),zs(e)):Km(Qe,n.stateNode));break;case 4:l=Qe,c=At,Qe=n.stateNode.containerInfo,At=!0,Ua(e,t,n),Qe=l,At=c;break;case 0:case 11:case 14:case 15:nn(2,n,t),ct||nn(4,n,t),Ua(e,t,n);break;case 1:ct||(va(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Yf(n,t,l)),Ua(e,t,n);break;case 21:Ua(e,t,n);break;case 22:ct=(l=ct)||n.memoizedState!==null,Ua(e,t,n),ct=l;break;default:Ua(e,t,n)}}function tm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{zs(e)}catch(n){ze(t,t.return,n)}}}function am(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zs(e)}catch(n){ze(t,t.return,n)}}function Ib(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Zf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Zf),t;default:throw Error(o(435,e.tag))}}function ll(e,t){var n=Ib(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var c=Fb.bind(null,e,l);l.then(c,c)}})}function Ot(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var c=n[l],d=e,y=t,b=y;e:for(;b!==null;){switch(b.tag){case 27:if(dn(b.type)){Qe=b.stateNode,At=!1;break e}break;case 5:Qe=b.stateNode,At=!1;break e;case 3:case 4:Qe=b.stateNode.containerInfo,At=!0;break e}b=b.return}if(Qe===null)throw Error(o(160));em(d,y,c),Qe=null,At=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)nm(t,e),t=t.sibling}var da=null;function nm(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ot(t,e),Dt(e),l&4&&(nn(3,e,e.return),Mr(3,e),nn(5,e,e.return));break;case 1:Ot(t,e),Dt(e),l&512&&(ct||n===null||va(n,n.return)),l&64&&Ma&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var c=da;if(Ot(t,e),Dt(e),l&512&&(ct||n===null||va(n,n.return)),l&4){var d=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":d=c.getElementsByTagName("title")[0],(!d||d[or]||d[xt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(l),c.head.insertBefore(d,c.querySelector("head > title"))),St(d,l,n),d[xt]=e,yt(d),l=d;break e;case"link":var y=np("link","href",c).get(l+(n.href||""));if(y){for(var b=0;b<y.length;b++)if(d=y[b],d.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&d.getAttribute("rel")===(n.rel==null?null:n.rel)&&d.getAttribute("title")===(n.title==null?null:n.title)&&d.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){y.splice(b,1);break t}}d=c.createElement(l),St(d,l,n),c.head.appendChild(d);break;case"meta":if(y=np("meta","content",c).get(l+(n.content||""))){for(b=0;b<y.length;b++)if(d=y[b],d.getAttribute("content")===(n.content==null?null:""+n.content)&&d.getAttribute("name")===(n.name==null?null:n.name)&&d.getAttribute("property")===(n.property==null?null:n.property)&&d.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&d.getAttribute("charset")===(n.charSet==null?null:n.charSet)){y.splice(b,1);break t}}d=c.createElement(l),St(d,l,n),c.head.appendChild(d);break;default:throw Error(o(468,l))}d[xt]=e,yt(d),l=d}e.stateNode=l}else sp(c,e.type,e.stateNode);else e.stateNode=ap(c,l,e.memoizedProps);else d!==l?(d===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):d.count--,l===null?sp(c,e.type,e.stateNode):ap(c,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Mc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ot(t,e),Dt(e),l&512&&(ct||n===null||va(n,n.return)),n!==null&&l&4&&Mc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ot(t,e),Dt(e),l&512&&(ct||n===null||va(n,n.return)),e.flags&32){c=e.stateNode;try{ls(c,"")}catch(re){ze(e,e.return,re)}}l&4&&e.stateNode!=null&&(c=e.memoizedProps,Mc(e,c,n!==null?n.memoizedProps:c)),l&1024&&(Bc=!0);break;case 6:if(Ot(t,e),Dt(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(re){ze(e,e.return,re)}}break;case 3:if(Sl=null,c=da,da=wl(t.containerInfo),Ot(t,e),da=c,Dt(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{zs(t.containerInfo)}catch(re){ze(e,e.return,re)}Bc&&(Bc=!1,sm(e));break;case 4:l=da,da=wl(e.stateNode.containerInfo),Ot(t,e),Dt(e),da=l;break;case 12:Ot(t,e),Dt(e);break;case 31:Ot(t,e),Dt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ll(e,l)));break;case 13:Ot(t,e),Dt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(cl=Bt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ll(e,l)));break;case 22:c=e.memoizedState!==null;var k=n!==null&&n.memoizedState!==null,z=Ma,K=ct;if(Ma=z||c,ct=K||k,Ot(t,e),ct=K,Ma=z,Dt(e),l&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||k||Ma||ct||Hn(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){k=n=t;try{if(d=k.stateNode,c)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{b=k.stateNode;var J=k.memoizedProps.style,H=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(re){ze(k,k.return,re)}}}else if(t.tag===6){if(n===null){k=t;try{k.stateNode.nodeValue=c?"":k.memoizedProps}catch(re){ze(k,k.return,re)}}}else if(t.tag===18){if(n===null){k=t;try{var P=k.stateNode;c?Ym(P,!0):Ym(k.stateNode,!1)}catch(re){ze(k,k.return,re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,ll(e,n))));break;case 19:Ot(t,e),Dt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ll(e,l)));break;case 30:break;case 21:break;default:Ot(t,e),Dt(e)}}function Dt(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(Wf(l)){n=l;break}l=l.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var c=n.stateNode,d=Uc(e);il(e,d,c);break;case 5:var y=n.stateNode;n.flags&32&&(ls(y,""),n.flags&=-33);var b=Uc(e);il(e,b,y);break;case 3:case 4:var k=n.stateNode.containerInfo,z=Uc(e);Lc(e,z,k);break;default:throw Error(o(161))}}catch(K){ze(e,e.return,K)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;sm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function La(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Xf(e,t.alternate,t),t=t.sibling}function Hn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:nn(4,t,t.return),Hn(t);break;case 1:va(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Yf(t,t.return,n),Hn(t);break;case 27:Ir(t.stateNode);case 26:case 5:va(t,t.return),Hn(t);break;case 22:t.memoizedState===null&&Hn(t);break;case 30:Hn(t);break;default:Hn(t)}e=e.sibling}}function Ba(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,c=e,d=t,y=d.flags;switch(d.tag){case 0:case 11:case 15:Ba(c,d,n),Mr(4,d);break;case 1:if(Ba(c,d,n),l=d,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(z){ze(l,l.return,z)}if(l=d,c=l.updateQueue,c!==null){var b=l.stateNode;try{var k=c.shared.hiddenCallbacks;if(k!==null)for(c.shared.hiddenCallbacks=null,c=0;c<k.length;c++)Mh(k[c],b)}catch(z){ze(l,l.return,z)}}n&&y&64&&Kf(d),Ur(d,d.return);break;case 27:Qf(d);case 26:case 5:Ba(c,d,n),n&&l===null&&y&4&&Jf(d),Ur(d,d.return);break;case 12:Ba(c,d,n);break;case 31:Ba(c,d,n),n&&y&4&&tm(c,d);break;case 13:Ba(c,d,n),n&&y&4&&am(c,d);break;case 22:d.memoizedState===null&&Ba(c,d,n),Ur(d,d.return);break;case 30:break;default:Ba(c,d,n)}t=t.sibling}}function zc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&wr(n))}function $c(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wr(e))}function ha(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)rm(e,t,n,l),t=t.sibling}function rm(e,t,n,l){var c=t.flags;switch(t.tag){case 0:case 11:case 15:ha(e,t,n,l),c&2048&&Mr(9,t);break;case 1:ha(e,t,n,l);break;case 3:ha(e,t,n,l),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wr(e)));break;case 12:if(c&2048){ha(e,t,n,l),e=t.stateNode;try{var d=t.memoizedProps,y=d.id,b=d.onPostCommit;typeof b=="function"&&b(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){ze(t,t.return,k)}}else ha(e,t,n,l);break;case 31:ha(e,t,n,l);break;case 13:ha(e,t,n,l);break;case 23:break;case 22:d=t.stateNode,y=t.alternate,t.memoizedState!==null?d._visibility&2?ha(e,t,n,l):Lr(e,t):d._visibility&2?ha(e,t,n,l):(d._visibility|=2,Ts(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),c&2048&&zc(y,t);break;case 24:ha(e,t,n,l),c&2048&&$c(t.alternate,t);break;default:ha(e,t,n,l)}}function Ts(e,t,n,l,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,y=t,b=n,k=l,z=y.flags;switch(y.tag){case 0:case 11:case 15:Ts(d,y,b,k,c),Mr(8,y);break;case 23:break;case 22:var K=y.stateNode;y.memoizedState!==null?K._visibility&2?Ts(d,y,b,k,c):Lr(d,y):(K._visibility|=2,Ts(d,y,b,k,c)),c&&z&2048&&zc(y.alternate,y);break;case 24:Ts(d,y,b,k,c),c&&z&2048&&$c(y.alternate,y);break;default:Ts(d,y,b,k,c)}t=t.sibling}}function Lr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,c=l.flags;switch(l.tag){case 22:Lr(n,l),c&2048&&zc(l.alternate,l);break;case 24:Lr(n,l),c&2048&&$c(l.alternate,l);break;default:Lr(n,l)}t=t.sibling}}var Br=8192;function Es(e,t,n){if(e.subtreeFlags&Br)for(e=e.child;e!==null;)im(e,t,n),e=e.sibling}function im(e,t,n){switch(e.tag){case 26:Es(e,t,n),e.flags&Br&&e.memoizedState!==null&&Cx(n,da,e.memoizedState,e.memoizedProps);break;case 5:Es(e,t,n);break;case 3:case 4:var l=da;da=wl(e.stateNode.containerInfo),Es(e,t,n),da=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Br,Br=16777216,Es(e,t,n),Br=l):Es(e,t,n));break;default:Es(e,t,n)}}function lm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function zr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];bt=l,cm(l,e)}lm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)om(e),e=e.sibling}function om(e){switch(e.tag){case 0:case 11:case 15:zr(e),e.flags&2048&&nn(9,e,e.return);break;case 3:zr(e);break;case 12:zr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ol(e)):zr(e);break;default:zr(e)}}function ol(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];bt=l,cm(l,e)}lm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:nn(8,t,t.return),ol(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ol(t));break;default:ol(t)}e=e.sibling}}function cm(e,t){for(;bt!==null;){var n=bt;switch(n.tag){case 0:case 11:case 15:nn(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:wr(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,bt=l;else e:for(n=e;bt!==null;){l=bt;var c=l.sibling,d=l.return;if(Ff(l),l===n){bt=null;break e}if(c!==null){c.return=d,bt=c;break e}bt=d}}}var Vb={getCacheForType:function(e){var t=wt(it),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return wt(it).controller.signal}},Kb=typeof WeakMap=="function"?WeakMap:Map,Ue=0,Ie=null,Te=null,Re=0,Be=0,It=null,sn=!1,Rs=!1,Hc=!1,za=0,et=0,rn=0,Gn=0,Gc=0,Vt=0,Cs=0,$r=null,Mt=null,qc=!1,cl=0,um=0,ul=1/0,dl=null,ln=null,ft=0,on=null,As=null,$a=0,Pc=0,Ic=null,dm=null,Hr=0,Vc=null;function Kt(){return(Ue&2)!==0&&Re!==0?Re&-Re:N.T!==null?Zc():kd()}function hm(){if(Vt===0)if((Re&536870912)===0||Ae){var e=xi;xi<<=1,(xi&3932160)===0&&(xi=262144),Vt=e}else Vt=536870912;return e=qt.current,e!==null&&(e.flags|=32),Vt}function Ut(e,t,n){(e===Ie&&(Be===2||Be===9)||e.cancelPendingCommit!==null)&&(Os(e,0),cn(e,Re,Vt,!1)),lr(e,n),((Ue&2)===0||e!==Ie)&&(e===Ie&&((Ue&2)===0&&(Gn|=n),et===4&&cn(e,Re,Vt,!1)),wa(e))}function fm(e,t,n){if((Ue&6)!==0)throw Error(o(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ir(e,t),c=l?Wb(e,t):Yc(e,t,!0),d=l;do{if(c===0){Rs&&!l&&cn(e,t,0,!1);break}else{if(n=e.current.alternate,d&&!Yb(n)){c=Yc(e,t,!1),d=!1;continue}if(c===2){if(d=t,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var b=e;c=$r;var k=b.current.memoizedState.isDehydrated;if(k&&(Os(b,y).flags|=256),y=Yc(b,y,!1),y!==2){if(Hc&&!k){b.errorRecoveryDisabledLanes|=d,Gn|=d,c=4;break e}d=Mt,Mt=c,d!==null&&(Mt===null?Mt=d:Mt.push.apply(Mt,d))}c=y}if(d=!1,c!==2)continue}}if(c===1){Os(e,0),cn(e,t,0,!0);break}e:{switch(l=e,d=c,d){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:cn(l,t,Vt,!sn);break e;case 2:Mt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=cl+300-Bt(),10<c)){if(cn(l,t,Vt,!sn),wi(l,0,!0)!==0)break e;$a=t,l.timeoutHandle=Im(mm.bind(null,l,n,Mt,dl,qc,t,Vt,Gn,Cs,sn,d,"Throttled",-0,0),c);break e}mm(l,n,Mt,dl,qc,t,Vt,Gn,Cs,sn,d,null,-0,0)}}break}while(!0);wa(e)}function mm(e,t,n,l,c,d,y,b,k,z,K,J,H,P){if(e.timeoutHandle=-1,J=t.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Na},im(t,d,J);var re=(d&62914560)===d?cl-Bt():(d&4194048)===d?um-Bt():0;if(re=Ax(J,re),re!==null){$a=d,e.cancelPendingCommit=re(jm.bind(null,e,t,d,n,l,c,y,b,k,K,J,null,H,P)),cn(e,d,y,!z);return}}jm(e,t,d,n,l,c,y,b,k)}function Yb(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var c=n[l],d=c.getSnapshot;c=c.value;try{if(!Ht(d(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cn(e,t,n,l){t&=~Gc,t&=~Gn,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var c=t;0<c;){var d=31-$t(c),y=1<<d;l[d]=-1,c&=~y}n!==0&&Sd(e,n,t)}function hl(){return(Ue&6)===0?(Gr(0),!1):!0}function Kc(){if(Te!==null){if(Be===0)var e=Te.return;else e=Te,Ea=On=null,oc(e),js=null,Sr=0,e=Te;for(;e!==null;)Vf(e.alternate,e),e=e.return;Te=null}}function Os(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,fx(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),$a=0,Kc(),Ie=e,Te=n=ka(e.current,null),Re=t,Be=0,It=null,sn=!1,Rs=ir(e,t),Hc=!1,Cs=Vt=Gc=Gn=rn=et=0,Mt=$r=null,qc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var c=31-$t(l),d=1<<c;t|=e[c],l&=~d}return za=t,Di(),n}function pm(e,t){je=null,N.H=Ar,t===ws||t===Gi?(t=Ch(),Be=3):t===Qo?(t=Ch(),Be=4):Be=t===Nc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,It=t,Te===null&&(et=1,tl(e,ea(t,e.current)))}function gm(){var e=qt.current;return e===null?!0:(Re&4194048)===Re?sa===null:(Re&62914560)===Re||(Re&536870912)!==0?e===sa:!1}function ym(){var e=N.H;return N.H=Ar,e===null?Ar:e}function bm(){var e=N.A;return N.A=Vb,e}function fl(){et=4,sn||(Re&4194048)!==Re&&qt.current!==null||(Rs=!0),(rn&134217727)===0&&(Gn&134217727)===0||Ie===null||cn(Ie,Re,Vt,!1)}function Yc(e,t,n){var l=Ue;Ue|=2;var c=ym(),d=bm();(Ie!==e||Re!==t)&&(dl=null,Os(e,t)),t=!1;var y=et;e:do try{if(Be!==0&&Te!==null){var b=Te,k=It;switch(Be){case 8:Kc(),y=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(t=!0);var z=Be;if(Be=0,It=null,Ds(e,b,k,z),n&&Rs){y=0;break e}break;default:z=Be,Be=0,It=null,Ds(e,b,k,z)}}Jb(),y=et;break}catch(K){pm(e,K)}while(!0);return t&&e.shellSuspendCounter++,Ea=On=null,Ue=l,N.H=c,N.A=d,Te===null&&(Ie=null,Re=0,Di()),y}function Jb(){for(;Te!==null;)xm(Te)}function Wb(e,t){var n=Ue;Ue|=2;var l=ym(),c=bm();Ie!==e||Re!==t?(dl=null,ul=Bt()+500,Os(e,t)):Rs=ir(e,t);e:do try{if(Be!==0&&Te!==null){t=Te;var d=It;t:switch(Be){case 1:Be=0,It=null,Ds(e,t,d,1);break;case 2:case 9:if(Eh(d)){Be=0,It=null,vm(t);break}t=function(){Be!==2&&Be!==9||Ie!==e||(Be=7),wa(e)},d.then(t,t);break e;case 3:Be=7;break e;case 4:Be=5;break e;case 7:Eh(d)?(Be=0,It=null,vm(t)):(Be=0,It=null,Ds(e,t,d,7));break;case 5:var y=null;switch(Te.tag){case 26:y=Te.memoizedState;case 5:case 27:var b=Te;if(y?rp(y):b.stateNode.complete){Be=0,It=null;var k=b.sibling;if(k!==null)Te=k;else{var z=b.return;z!==null?(Te=z,ml(z)):Te=null}break t}}Be=0,It=null,Ds(e,t,d,5);break;case 6:Be=0,It=null,Ds(e,t,d,6);break;case 8:Kc(),et=6;break e;default:throw Error(o(462))}}Qb();break}catch(K){pm(e,K)}while(!0);return Ea=On=null,N.H=l,N.A=c,Ue=n,Te!==null?0:(Ie=null,Re=0,Di(),et)}function Qb(){for(;Te!==null&&!xy();)xm(Te)}function xm(e){var t=Pf(e.alternate,e,za);e.memoizedProps=e.pendingProps,t===null?ml(e):Te=t}function vm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Bf(n,t,t.pendingProps,t.type,void 0,Re);break;case 11:t=Bf(n,t,t.pendingProps,t.type.render,t.ref,Re);break;case 5:oc(t);default:Vf(n,t),t=Te=yh(t,za),t=Pf(n,t,za)}e.memoizedProps=e.pendingProps,t===null?ml(e):Te=t}function Ds(e,t,n,l){Ea=On=null,oc(t),js=null,Sr=0;var c=t.return;try{if(zb(e,c,t,n,Re)){et=1,tl(e,ea(n,e.current)),Te=null;return}}catch(d){if(c!==null)throw Te=c,d;et=1,tl(e,ea(n,e.current)),Te=null;return}t.flags&32768?(Ae||l===1?e=!0:Rs||(Re&536870912)!==0?e=!1:(sn=e=!0,(l===2||l===9||l===3||l===6)&&(l=qt.current,l!==null&&l.tag===13&&(l.flags|=16384))),wm(t,e)):ml(t)}function ml(e){var t=e;do{if((t.flags&32768)!==0){wm(t,sn);return}e=t.return;var n=Gb(t.alternate,t,za);if(n!==null){Te=n;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);et===0&&(et=5)}function wm(e,t){do{var n=qb(e.alternate,e);if(n!==null){n.flags&=32767,Te=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Te=e;return}Te=e=n}while(e!==null);et=6,Te=null}function jm(e,t,n,l,c,d,y,b,k){e.cancelPendingCommit=null;do pl();while(ft!==0);if((Ue&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(d=t.lanes|t.childLanes,d|=Uo,Ry(e,n,d,y,b,k),e===Ie&&(Te=Ie=null,Re=0),As=t,on=e,$a=n,Pc=d,Ic=c,dm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ex(yi,function(){return Tm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=N.T,N.T=null,c=C.p,C.p=2,y=Ue,Ue|=4;try{Pb(e,t,n)}finally{Ue=y,C.p=c,N.T=l}}ft=1,Sm(),Nm(),_m()}}function Sm(){if(ft===1){ft=0;var e=on,t=As,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=N.T,N.T=null;var l=C.p;C.p=2;var c=Ue;Ue|=4;try{nm(t,e);var d=ru,y=oh(e.containerInfo),b=d.focusedElem,k=d.selectionRange;if(y!==b&&b&&b.ownerDocument&&lh(b.ownerDocument.documentElement,b)){if(k!==null&&Co(b)){var z=k.start,K=k.end;if(K===void 0&&(K=z),"selectionStart"in b)b.selectionStart=z,b.selectionEnd=Math.min(K,b.value.length);else{var J=b.ownerDocument||document,H=J&&J.defaultView||window;if(H.getSelection){var P=H.getSelection(),re=b.textContent.length,ge=Math.min(k.start,re),qe=k.end===void 0?ge:Math.min(k.end,re);!P.extend&&ge>qe&&(y=qe,qe=ge,ge=y);var M=ih(b,ge),R=ih(b,qe);if(M&&R&&(P.rangeCount!==1||P.anchorNode!==M.node||P.anchorOffset!==M.offset||P.focusNode!==R.node||P.focusOffset!==R.offset)){var B=J.createRange();B.setStart(M.node,M.offset),P.removeAllRanges(),ge>qe?(P.addRange(B),P.extend(R.node,R.offset)):(B.setEnd(R.node,R.offset),P.addRange(B))}}}}for(J=[],P=b;P=P.parentNode;)P.nodeType===1&&J.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var Y=J[b];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Tl=!!su,ru=su=null}finally{Ue=c,C.p=l,N.T=n}}e.current=t,ft=2}}function Nm(){if(ft===2){ft=0;var e=on,t=As,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=N.T,N.T=null;var l=C.p;C.p=2;var c=Ue;Ue|=4;try{Xf(e,t.alternate,t)}finally{Ue=c,C.p=l,N.T=n}}ft=3}}function _m(){if(ft===4||ft===3){ft=0,vy();var e=on,t=As,n=$a,l=dm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ft=5:(ft=0,As=on=null,km(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ln=null),uo(n),t=t.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(rr,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=N.T,c=C.p,C.p=2,N.T=null;try{for(var d=e.onRecoverableError,y=0;y<l.length;y++){var b=l[y];d(b.value,{componentStack:b.stack})}}finally{N.T=t,C.p=c}}($a&3)!==0&&pl(),wa(e),c=e.pendingLanes,(n&261930)!==0&&(c&42)!==0?e===Vc?Hr++:(Hr=0,Vc=e):Hr=0,Gr(0)}}function km(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,wr(t)))}function pl(){return Sm(),Nm(),_m(),Tm()}function Tm(){if(ft!==5)return!1;var e=on,t=Pc;Pc=0;var n=uo($a),l=N.T,c=C.p;try{C.p=32>n?32:n,N.T=null,n=Ic,Ic=null;var d=on,y=$a;if(ft=0,As=on=null,$a=0,(Ue&6)!==0)throw Error(o(331));var b=Ue;if(Ue|=4,om(d.current),rm(d,d.current,y,n),Ue=b,Gr(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(rr,d)}catch{}return!0}finally{C.p=c,N.T=l,km(e,t)}}function Em(e,t,n){t=ea(n,t),t=Sc(e.stateNode,t,2),e=en(e,t,2),e!==null&&(lr(e,2),wa(e))}function ze(e,t,n){if(e.tag===3)Em(e,e,n);else for(;t!==null;){if(t.tag===3){Em(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ln===null||!ln.has(l))){e=ea(n,e),n=Rf(2),l=en(t,n,2),l!==null&&(Cf(n,l,t,e),lr(l,2),wa(l));break}}t=t.return}}function Jc(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new Kb;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(n)||(Hc=!0,c.add(n),e=Zb.bind(null,e,t,n),t.then(e,e))}function Zb(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ie===e&&(Re&n)===n&&(et===4||et===3&&(Re&62914560)===Re&&300>Bt()-cl?(Ue&2)===0&&Os(e,0):Gc|=n,Cs===Re&&(Cs=0)),wa(e)}function Rm(e,t){t===0&&(t=jd()),e=Rn(e,t),e!==null&&(lr(e,t),wa(e))}function Xb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Rm(e,n)}function Fb(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(t),Rm(e,n)}function ex(e,t){return io(e,t)}var gl=null,Ms=null,Wc=!1,yl=!1,Qc=!1,un=0;function wa(e){e!==Ms&&e.next===null&&(Ms===null?gl=Ms=e:Ms=Ms.next=e),yl=!0,Wc||(Wc=!0,ax())}function Gr(e,t){if(!Qc&&yl){Qc=!0;do for(var n=!1,l=gl;l!==null;){if(e!==0){var c=l.pendingLanes;if(c===0)var d=0;else{var y=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-$t(42|e)+1)-1,d&=c&~(y&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(n=!0,Dm(l,d))}else d=Re,d=wi(l,l===Ie?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ir(l,d)||(n=!0,Dm(l,d));l=l.next}while(n);Qc=!1}}function tx(){Cm()}function Cm(){yl=Wc=!1;var e=0;un!==0&&hx()&&(e=un);for(var t=Bt(),n=null,l=gl;l!==null;){var c=l.next,d=Am(l,t);d===0?(l.next=null,n===null?gl=c:n.next=c,c===null&&(Ms=n)):(n=l,(e!==0||(d&3)!==0)&&(yl=!0)),l=c}ft!==0&&ft!==5||Gr(e),un!==0&&(un=0)}function Am(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-$t(d),b=1<<y,k=c[y];k===-1?((b&n)===0||(b&l)!==0)&&(c[y]=Ey(b,t)):k<=t&&(e.expiredLanes|=b),d&=~b}if(t=Ie,n=Re,n=wi(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(Be===2||Be===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&lo(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ir(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&lo(l),uo(n)){case 2:case 8:n=vd;break;case 32:n=yi;break;case 268435456:n=wd;break;default:n=yi}return l=Om.bind(null,e),n=io(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&lo(l),e.callbackPriority=2,e.callbackNode=null,2}function Om(e,t){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(pl()&&e.callbackNode!==n)return null;var l=Re;return l=wi(e,e===Ie?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(fm(e,l,t),Am(e,Bt()),e.callbackNode!=null&&e.callbackNode===n?Om.bind(null,e):null)}function Dm(e,t){if(pl())return null;fm(e,t,!0)}function ax(){mx(function(){(Ue&6)!==0?io(xd,tx):Cm()})}function Zc(){if(un===0){var e=xs;e===0&&(e=bi,bi<<=1,(bi&261888)===0&&(bi=256)),un=e}return un}function Mm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:_i(""+e)}function Um(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function nx(e,t,n,l,c){if(t==="submit"&&n&&n.stateNode===c){var d=Mm((c[Rt]||null).action),y=l.submitter;y&&(t=(t=y[Rt]||null)?Mm(t.formAction):y.getAttribute("formAction"),t!==null&&(d=t,y=null));var b=new Ri("action","action",null,l,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(un!==0){var k=y?Um(c,y):new FormData(c);yc(n,{pending:!0,data:k,method:c.method,action:d},null,k)}}else typeof d=="function"&&(b.preventDefault(),k=y?Um(c,y):new FormData(c),yc(n,{pending:!0,data:k,method:c.method,action:d},d,k))},currentTarget:c}]})}}for(var Xc=0;Xc<Mo.length;Xc++){var Fc=Mo[Xc],sx=Fc.toLowerCase(),rx=Fc[0].toUpperCase()+Fc.slice(1);ua(sx,"on"+rx)}ua(dh,"onAnimationEnd"),ua(hh,"onAnimationIteration"),ua(fh,"onAnimationStart"),ua("dblclick","onDoubleClick"),ua("focusin","onFocus"),ua("focusout","onBlur"),ua(wb,"onTransitionRun"),ua(jb,"onTransitionStart"),ua(Sb,"onTransitionCancel"),ua(mh,"onTransitionEnd"),rs("onMouseEnter",["mouseout","mouseover"]),rs("onMouseLeave",["mouseout","mouseover"]),rs("onPointerEnter",["pointerout","pointerover"]),rs("onPointerLeave",["pointerout","pointerover"]),_n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_n("onBeforeInput",["compositionend","keypress","textInput","paste"]),_n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ix=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qr));function Lm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],c=l.event;l=l.listeners;e:{var d=void 0;if(t)for(var y=l.length-1;0<=y;y--){var b=l[y],k=b.instance,z=b.currentTarget;if(b=b.listener,k!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=z;try{d(c)}catch(K){Oi(K)}c.currentTarget=null,d=k}else for(y=0;y<l.length;y++){if(b=l[y],k=b.instance,z=b.currentTarget,b=b.listener,k!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=z;try{d(c)}catch(K){Oi(K)}c.currentTarget=null,d=k}}}}function Ee(e,t){var n=t[ho];n===void 0&&(n=t[ho]=new Set);var l=e+"__bubble";n.has(l)||(Bm(t,e,2,!1),n.add(l))}function eu(e,t,n){var l=0;t&&(l|=4),Bm(n,e,l,t)}var bl="_reactListening"+Math.random().toString(36).slice(2);function tu(e){if(!e[bl]){e[bl]=!0,Rd.forEach(function(n){n!=="selectionchange"&&(ix.has(n)||eu(n,!1,e),eu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bl]||(t[bl]=!0,eu("selectionchange",!1,t))}}function Bm(e,t,n,l){switch(hp(t)){case 2:var c=Mx;break;case 8:c=Ux;break;default:c=gu}n=c.bind(null,t,n,e),c=void 0,!wo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function au(e,t,n,l,c){var d=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var b=l.stateNode.containerInfo;if(b===c)break;if(y===4)for(y=l.return;y!==null;){var k=y.tag;if((k===3||k===4)&&y.stateNode.containerInfo===c)return;y=y.return}for(;b!==null;){if(y=as(b),y===null)return;if(k=y.tag,k===5||k===6||k===26||k===27){l=d=y;continue e}b=b.parentNode}}l=l.return}Gd(function(){var z=d,K=xo(n),J=[];e:{var H=ph.get(e);if(H!==void 0){var P=Ri,re=e;switch(e){case"keypress":if(Ti(n)===0)break e;case"keydown":case"keyup":P=Fy;break;case"focusin":re="focus",P=_o;break;case"focusout":re="blur",P=_o;break;case"beforeblur":case"afterblur":P=_o;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Id;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=Gy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=ab;break;case dh:case hh:case fh:P=Iy;break;case mh:P=sb;break;case"scroll":case"scrollend":P=$y;break;case"wheel":P=ib;break;case"copy":case"cut":case"paste":P=Ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Kd;break;case"toggle":case"beforetoggle":P=ob}var ge=(t&4)!==0,qe=!ge&&(e==="scroll"||e==="scrollend"),M=ge?H!==null?H+"Capture":null:H;ge=[];for(var R=z,B;R!==null;){var Y=R;if(B=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||B===null||M===null||(Y=ur(R,M),Y!=null&&ge.push(Pr(R,Y,B))),qe)break;R=R.return}0<ge.length&&(H=new P(H,re,null,n,K),J.push({event:H,listeners:ge}))}}if((t&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",H&&n!==bo&&(re=n.relatedTarget||n.fromElement)&&(as(re)||re[ts]))break e;if((P||H)&&(H=K.window===K?K:(H=K.ownerDocument)?H.defaultView||H.parentWindow:window,P?(re=n.relatedTarget||n.toElement,P=z,re=re?as(re):null,re!==null&&(qe=h(re),ge=re.tag,re!==qe||ge!==5&&ge!==27&&ge!==6)&&(re=null)):(P=null,re=z),P!==re)){if(ge=Id,Y="onMouseLeave",M="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(ge=Kd,Y="onPointerLeave",M="onPointerEnter",R="pointer"),qe=P==null?H:cr(P),B=re==null?H:cr(re),H=new ge(Y,R+"leave",P,n,K),H.target=qe,H.relatedTarget=B,Y=null,as(K)===z&&(ge=new ge(M,R+"enter",re,n,K),ge.target=B,ge.relatedTarget=qe,Y=ge),qe=Y,P&&re)t:{for(ge=lx,M=P,R=re,B=0,Y=M;Y;Y=ge(Y))B++;Y=0;for(var he=R;he;he=ge(he))Y++;for(;0<B-Y;)M=ge(M),B--;for(;0<Y-B;)R=ge(R),Y--;for(;B--;){if(M===R||R!==null&&M===R.alternate){ge=M;break t}M=ge(M),R=ge(R)}ge=null}else ge=null;P!==null&&zm(J,H,P,ge,!1),re!==null&&qe!==null&&zm(J,qe,re,ge,!0)}}e:{if(H=z?cr(z):window,P=H.nodeName&&H.nodeName.toLowerCase(),P==="select"||P==="input"&&H.type==="file")var De=eh;else if(Xd(H))if(th)De=bb;else{De=gb;var oe=pb}else P=H.nodeName,!P||P.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?z&&yo(z.elementType)&&(De=eh):De=yb;if(De&&(De=De(e,z))){Fd(J,De,n,K);break e}oe&&oe(e,H,z),e==="focusout"&&z&&H.type==="number"&&z.memoizedProps.value!=null&&go(H,"number",H.value)}switch(oe=z?cr(z):window,e){case"focusin":(Xd(oe)||oe.contentEditable==="true")&&(ds=oe,Ao=z,br=null);break;case"focusout":br=Ao=ds=null;break;case"mousedown":Oo=!0;break;case"contextmenu":case"mouseup":case"dragend":Oo=!1,ch(J,n,K);break;case"selectionchange":if(vb)break;case"keydown":case"keyup":ch(J,n,K)}var Ne;if(To)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else us?Qd(e,n)&&(Ce="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ce="onCompositionStart");Ce&&(Yd&&n.locale!=="ko"&&(us||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&us&&(Ne=qd()):(Ya=K,jo="value"in Ya?Ya.value:Ya.textContent,us=!0)),oe=xl(z,Ce),0<oe.length&&(Ce=new Vd(Ce,e,null,n,K),J.push({event:Ce,listeners:oe}),Ne?Ce.data=Ne:(Ne=Zd(n),Ne!==null&&(Ce.data=Ne)))),(Ne=ub?db(e,n):hb(e,n))&&(Ce=xl(z,"onBeforeInput"),0<Ce.length&&(oe=new Vd("onBeforeInput","beforeinput",null,n,K),J.push({event:oe,listeners:Ce}),oe.data=Ne)),nx(J,e,z,n,K)}Lm(J,t)})}function Pr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xl(e,t){for(var n=t+"Capture",l=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=ur(e,n),c!=null&&l.unshift(Pr(e,c,d)),c=ur(e,t),c!=null&&l.push(Pr(e,c,d))),e.tag===3)return l;e=e.return}return[]}function lx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function zm(e,t,n,l,c){for(var d=t._reactName,y=[];n!==null&&n!==l;){var b=n,k=b.alternate,z=b.stateNode;if(b=b.tag,k!==null&&k===l)break;b!==5&&b!==26&&b!==27||z===null||(k=z,c?(z=ur(n,d),z!=null&&y.unshift(Pr(n,z,k))):c||(z=ur(n,d),z!=null&&y.push(Pr(n,z,k)))),n=n.return}y.length!==0&&e.push({event:t,listeners:y})}var ox=/\r\n?/g,cx=/\u0000|\uFFFD/g;function $m(e){return(typeof e=="string"?e:""+e).replace(ox,`
`).replace(cx,"")}function Hm(e,t){return t=$m(t),$m(e)===t}function Ge(e,t,n,l,c,d){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||ls(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&ls(e,""+l);break;case"className":Si(e,"class",l);break;case"tabIndex":Si(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Si(e,n,l);break;case"style":$d(e,l,d);break;case"data":if(t!=="object"){Si(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=_i(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(n==="formAction"?(t!=="input"&&Ge(e,t,"name",c.name,c,null),Ge(e,t,"formEncType",c.formEncType,c,null),Ge(e,t,"formMethod",c.formMethod,c,null),Ge(e,t,"formTarget",c.formTarget,c,null)):(Ge(e,t,"encType",c.encType,c,null),Ge(e,t,"method",c.method,c,null),Ge(e,t,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=_i(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=Na);break;case"onScroll":l!=null&&Ee("scroll",e);break;case"onScrollEnd":l!=null&&Ee("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(n=l.__html,n!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=_i(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":Ee("beforetoggle",e),Ee("toggle",e),ji(e,"popover",l);break;case"xlinkActuate":Sa(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Sa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Sa(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Sa(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Sa(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Sa(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Sa(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Sa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Sa(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ji(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=By.get(n)||n,ji(e,n,l))}}function nu(e,t,n,l,c,d){switch(n){case"style":$d(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(n=l.__html,n!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"children":typeof l=="string"?ls(e,l):(typeof l=="number"||typeof l=="bigint")&&ls(e,""+l);break;case"onScroll":l!=null&&Ee("scroll",e);break;case"onScrollEnd":l!=null&&Ee("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cd.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),d=e[Rt]||null,d=d!=null?d[n]:null,typeof d=="function"&&e.removeEventListener(t,d,c),typeof l=="function")){typeof d!="function"&&d!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,c);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):ji(e,n,l)}}}function St(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",e),Ee("load",e);var l=!1,c=!1,d;for(d in n)if(n.hasOwnProperty(d)){var y=n[d];if(y!=null)switch(d){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ge(e,t,d,y,n,null)}}c&&Ge(e,t,"srcSet",n.srcSet,n,null),l&&Ge(e,t,"src",n.src,n,null);return;case"input":Ee("invalid",e);var b=d=y=c=null,k=null,z=null;for(l in n)if(n.hasOwnProperty(l)){var K=n[l];if(K!=null)switch(l){case"name":c=K;break;case"type":y=K;break;case"checked":k=K;break;case"defaultChecked":z=K;break;case"value":d=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,t));break;default:Ge(e,t,l,K,n,null)}}Ud(e,d,b,k,z,y,c,!1);return;case"select":Ee("invalid",e),l=y=d=null;for(c in n)if(n.hasOwnProperty(c)&&(b=n[c],b!=null))switch(c){case"value":d=b;break;case"defaultValue":y=b;break;case"multiple":l=b;default:Ge(e,t,c,b,n,null)}t=d,n=y,e.multiple=!!l,t!=null?is(e,!!l,t,!1):n!=null&&is(e,!!l,n,!0);return;case"textarea":Ee("invalid",e),d=c=l=null;for(y in n)if(n.hasOwnProperty(y)&&(b=n[y],b!=null))switch(y){case"value":l=b;break;case"defaultValue":c=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(o(91));break;default:Ge(e,t,y,b,n,null)}Bd(e,l,c,d);return;case"option":for(k in n)n.hasOwnProperty(k)&&(l=n[k],l!=null)&&(k==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Ge(e,t,k,l,n,null));return;case"dialog":Ee("beforetoggle",e),Ee("toggle",e),Ee("cancel",e),Ee("close",e);break;case"iframe":case"object":Ee("load",e);break;case"video":case"audio":for(l=0;l<qr.length;l++)Ee(qr[l],e);break;case"image":Ee("error",e),Ee("load",e);break;case"details":Ee("toggle",e);break;case"embed":case"source":case"link":Ee("error",e),Ee("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in n)if(n.hasOwnProperty(z)&&(l=n[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ge(e,t,z,l,n,null)}return;default:if(yo(t)){for(K in n)n.hasOwnProperty(K)&&(l=n[K],l!==void 0&&nu(e,t,K,l,n,void 0));return}}for(b in n)n.hasOwnProperty(b)&&(l=n[b],l!=null&&Ge(e,t,b,l,n,null))}function ux(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,y=null,b=null,k=null,z=null,K=null;for(P in n){var J=n[P];if(n.hasOwnProperty(P)&&J!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":k=J;default:l.hasOwnProperty(P)||Ge(e,t,P,null,l,J)}}for(var H in l){var P=l[H];if(J=n[H],l.hasOwnProperty(H)&&(P!=null||J!=null))switch(H){case"type":d=P;break;case"name":c=P;break;case"checked":z=P;break;case"defaultChecked":K=P;break;case"value":y=P;break;case"defaultValue":b=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(137,t));break;default:P!==J&&Ge(e,t,H,P,l,J)}}po(e,y,b,k,z,K,d,c);return;case"select":P=y=b=H=null;for(d in n)if(k=n[d],n.hasOwnProperty(d)&&k!=null)switch(d){case"value":break;case"multiple":P=k;default:l.hasOwnProperty(d)||Ge(e,t,d,null,l,k)}for(c in l)if(d=l[c],k=n[c],l.hasOwnProperty(c)&&(d!=null||k!=null))switch(c){case"value":H=d;break;case"defaultValue":b=d;break;case"multiple":y=d;default:d!==k&&Ge(e,t,c,d,l,k)}t=b,n=y,l=P,H!=null?is(e,!!n,H,!1):!!l!=!!n&&(t!=null?is(e,!!n,t,!0):is(e,!!n,n?[]:"",!1));return;case"textarea":P=H=null;for(b in n)if(c=n[b],n.hasOwnProperty(b)&&c!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ge(e,t,b,null,l,c)}for(y in l)if(c=l[y],d=n[y],l.hasOwnProperty(y)&&(c!=null||d!=null))switch(y){case"value":H=c;break;case"defaultValue":P=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==d&&Ge(e,t,y,c,l,d)}Ld(e,H,P);return;case"option":for(var re in n)H=n[re],n.hasOwnProperty(re)&&H!=null&&!l.hasOwnProperty(re)&&(re==="selected"?e.selected=!1:Ge(e,t,re,null,l,H));for(k in l)H=l[k],P=n[k],l.hasOwnProperty(k)&&H!==P&&(H!=null||P!=null)&&(k==="selected"?e.selected=H&&typeof H!="function"&&typeof H!="symbol":Ge(e,t,k,H,l,P));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in n)H=n[ge],n.hasOwnProperty(ge)&&H!=null&&!l.hasOwnProperty(ge)&&Ge(e,t,ge,null,l,H);for(z in l)if(H=l[z],P=n[z],l.hasOwnProperty(z)&&H!==P&&(H!=null||P!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,t));break;default:Ge(e,t,z,H,l,P)}return;default:if(yo(t)){for(var qe in n)H=n[qe],n.hasOwnProperty(qe)&&H!==void 0&&!l.hasOwnProperty(qe)&&nu(e,t,qe,void 0,l,H);for(K in l)H=l[K],P=n[K],!l.hasOwnProperty(K)||H===P||H===void 0&&P===void 0||nu(e,t,K,H,l,P);return}}for(var M in n)H=n[M],n.hasOwnProperty(M)&&H!=null&&!l.hasOwnProperty(M)&&Ge(e,t,M,null,l,H);for(J in l)H=l[J],P=n[J],!l.hasOwnProperty(J)||H===P||H==null&&P==null||Ge(e,t,J,H,l,P)}function Gm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var c=n[l],d=c.transferSize,y=c.initiatorType,b=c.duration;if(d&&b&&Gm(y)){for(y=0,b=c.responseEnd,l+=1;l<n.length;l++){var k=n[l],z=k.startTime;if(z>b)break;var K=k.transferSize,J=k.initiatorType;K&&Gm(J)&&(k=k.responseEnd,y+=K*(k<b?1:(b-z)/(k-z)))}if(--l,t+=8*(d+y)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var su=null,ru=null;function vl(e){return e.nodeType===9?e:e.ownerDocument}function qm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function iu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lu=null;function hx(){var e=window.event;return e&&e.type==="popstate"?e===lu?!1:(lu=e,!0):(lu=null,!1)}var Im=typeof setTimeout=="function"?setTimeout:void 0,fx=typeof clearTimeout=="function"?clearTimeout:void 0,Vm=typeof Promise=="function"?Promise:void 0,mx=typeof queueMicrotask=="function"?queueMicrotask:typeof Vm<"u"?function(e){return Vm.resolve(null).then(e).catch(px)}:Im;function px(e){setTimeout(function(){throw e})}function dn(e){return e==="head"}function Km(e,t){var n=t,l=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(c),zs(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")Ir(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Ir(n);for(var d=n.firstChild;d;){var y=d.nextSibling,b=d.nodeName;d[or]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||n.removeChild(d),d=y}}else n==="body"&&Ir(e.ownerDocument.body);n=c}while(n);zs(t)}function Ym(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function ou(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ou(n),fo(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function gx(e,t,n,l){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[or])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ra(e.nextSibling),e===null)break}return null}function yx(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ra(e.nextSibling),e===null))return null;return e}function Jm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ra(e.nextSibling),e===null))return null;return e}function cu(e){return e.data==="$?"||e.data==="$~"}function uu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function bx(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ra(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var du=null;function Wm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return ra(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Qm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Zm(e,t,n){switch(t=vl(n),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Ir(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);fo(e)}var ia=new Map,Xm=new Set;function wl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ha=C.d;C.d={f:xx,r:vx,D:wx,C:jx,L:Sx,m:Nx,X:kx,S:_x,M:Tx};function xx(){var e=Ha.f(),t=hl();return e||t}function vx(e){var t=ns(e);t!==null&&t.tag===5&&t.type==="form"?pf(t):Ha.r(e)}var Us=typeof document>"u"?null:document;function Fm(e,t,n){var l=Us;if(l&&typeof t=="string"&&t){var c=Xt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),Xm.has(c)||(Xm.add(c),e={rel:e,crossOrigin:n,href:t},l.querySelector(c)===null&&(t=l.createElement("link"),St(t,"link",e),yt(t),l.head.appendChild(t)))}}function wx(e){Ha.D(e),Fm("dns-prefetch",e,null)}function jx(e,t){Ha.C(e,t),Fm("preconnect",e,t)}function Sx(e,t,n){Ha.L(e,t,n);var l=Us;if(l&&e&&t){var c='link[rel="preload"][as="'+Xt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+Xt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+Xt(n.imageSizes)+'"]')):c+='[href="'+Xt(e)+'"]';var d=c;switch(t){case"style":d=Ls(e);break;case"script":d=Bs(e)}ia.has(d)||(e=j({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ia.set(d,e),l.querySelector(c)!==null||t==="style"&&l.querySelector(Vr(d))||t==="script"&&l.querySelector(Kr(d))||(t=l.createElement("link"),St(t,"link",e),yt(t),l.head.appendChild(t)))}}function Nx(e,t){Ha.m(e,t);var n=Us;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Xt(l)+'"][href="'+Xt(e)+'"]',d=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Bs(e)}if(!ia.has(d)&&(e=j({rel:"modulepreload",href:e},t),ia.set(d,e),n.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Kr(d)))return}l=n.createElement("link"),St(l,"link",e),yt(l),n.head.appendChild(l)}}}function _x(e,t,n){Ha.S(e,t,n);var l=Us;if(l&&e){var c=ss(l).hoistableStyles,d=Ls(e);t=t||"default";var y=c.get(d);if(!y){var b={loading:0,preload:null};if(y=l.querySelector(Vr(d)))b.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ia.get(d))&&hu(e,n);var k=y=l.createElement("link");yt(k),St(k,"link",e),k._p=new Promise(function(z,K){k.onload=z,k.onerror=K}),k.addEventListener("load",function(){b.loading|=1}),k.addEventListener("error",function(){b.loading|=2}),b.loading|=4,jl(y,t,l)}y={type:"stylesheet",instance:y,count:1,state:b},c.set(d,y)}}}function kx(e,t){Ha.X(e,t);var n=Us;if(n&&e){var l=ss(n).hoistableScripts,c=Bs(e),d=l.get(c);d||(d=n.querySelector(Kr(c)),d||(e=j({src:e,async:!0},t),(t=ia.get(c))&&fu(e,t),d=n.createElement("script"),yt(d),St(d,"link",e),n.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function Tx(e,t){Ha.M(e,t);var n=Us;if(n&&e){var l=ss(n).hoistableScripts,c=Bs(e),d=l.get(c);d||(d=n.querySelector(Kr(c)),d||(e=j({src:e,async:!0,type:"module"},t),(t=ia.get(c))&&fu(e,t),d=n.createElement("script"),yt(d),St(d,"link",e),n.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function ep(e,t,n,l){var c=(c=ve.current)?wl(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ls(n.href),n=ss(c).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ls(n.href);var d=ss(c).hoistableStyles,y=d.get(e);if(y||(c=c.ownerDocument||c,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=c.querySelector(Vr(e)))&&!d._p&&(y.instance=d,y.state.loading=5),ia.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ia.set(e,n),d||Ex(c,e,n,y.state))),t&&l===null)throw Error(o(528,""));return y}if(t&&l!==null)throw Error(o(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Bs(n),n=ss(c).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ls(e){return'href="'+Xt(e)+'"'}function Vr(e){return'link[rel="stylesheet"]['+e+"]"}function tp(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function Ex(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),St(t,"link",n),yt(t),e.head.appendChild(t))}function Bs(e){return'[src="'+Xt(e)+'"]'}function Kr(e){return"script[async]"+e}function ap(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Xt(n.href)+'"]');if(l)return t.instance=l,yt(l),l;var c=j({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),yt(l),St(l,"style",c),jl(l,n.precedence,e),t.instance=l;case"stylesheet":c=Ls(n.href);var d=e.querySelector(Vr(c));if(d)return t.state.loading|=4,t.instance=d,yt(d),d;l=tp(n),(c=ia.get(c))&&hu(l,c),d=(e.ownerDocument||e).createElement("link"),yt(d);var y=d;return y._p=new Promise(function(b,k){y.onload=b,y.onerror=k}),St(d,"link",l),t.state.loading|=4,jl(d,n.precedence,e),t.instance=d;case"script":return d=Bs(n.src),(c=e.querySelector(Kr(d)))?(t.instance=c,yt(c),c):(l=n,(c=ia.get(d))&&(l=j({},n),fu(l,c)),e=e.ownerDocument||e,c=e.createElement("script"),yt(c),St(c,"link",l),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,jl(l,n.precedence,e));return t.instance}function jl(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,d=c,y=0;y<l.length;y++){var b=l[y];if(b.dataset.precedence===t)d=b;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function hu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function fu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Sl=null;function np(e,t,n){if(Sl===null){var l=new Map,c=Sl=new Map;c.set(n,l)}else c=Sl,l=c.get(n),l||(l=new Map,c.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var d=n[c];if(!(d[or]||d[xt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(t)||"";y=e+y;var b=l.get(y);b?b.push(d):l.set(y,[d])}}return l}function sp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Rx(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function rp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Cx(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=Ls(l.href),d=t.querySelector(Vr(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Nl.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=d,yt(d);return}d=t.ownerDocument||t,l=tp(l),(c=ia.get(c))&&hu(l,c),d=d.createElement("link"),yt(d);var y=d;y._p=new Promise(function(b,k){y.onload=b,y.onerror=k}),St(d,"link",l),n.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Nl.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var mu=0;function Ax(e,t){return e.stylesheets&&e.count===0&&kl(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&kl(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&mu===0&&(mu=62500*dx());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&kl(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>mu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function Nl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var _l=null;function kl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,_l=new Map,t.forEach(Ox,e),_l=null,Nl.call(e))}function Ox(e,t){if(!(t.state.loading&4)){var n=_l.get(e);if(n)var l=n.get(null);else{n=new Map,_l.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var y=c[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(n.set(y.dataset.precedence,y),l=y)}l&&n.set(null,l)}c=t.instance,y=c.getAttribute("data-precedence"),d=n.get(y)||l,d===l&&n.set(null,c),n.set(y,c),this.count++,l=Nl.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Yr={$$typeof:A,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function Dx(e,t,n,l,c,d,y,b,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oo(0),this.hiddenUpdates=oo(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function ip(e,t,n,l,c,d,y,b,k,z,K,J){return e=new Dx(e,t,n,y,k,z,K,J,b),t=1,d===!0&&(t|=24),d=Gt(3,null,null,t),e.current=d,d.stateNode=e,t=Yo(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:l,isDehydrated:n,cache:t},Zo(d),e}function lp(e){return e?(e=ms,e):ms}function op(e,t,n,l,c,d){c=lp(c),l.context===null?l.context=c:l.pendingContext=c,l=Fa(t),l.payload={element:n},d=d===void 0?null:d,d!==null&&(l.callback=d),n=en(e,l,t),n!==null&&(Ut(n,e,t),_r(n,e,t))}function cp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function pu(e,t){cp(e,t),(e=e.alternate)&&cp(e,t)}function up(e){if(e.tag===13||e.tag===31){var t=Rn(e,67108864);t!==null&&Ut(t,e,67108864),pu(e,67108864)}}function dp(e){if(e.tag===13||e.tag===31){var t=Kt();t=co(t);var n=Rn(e,t);n!==null&&Ut(n,e,t),pu(e,t)}}var Tl=!0;function Mx(e,t,n,l){var c=N.T;N.T=null;var d=C.p;try{C.p=2,gu(e,t,n,l)}finally{C.p=d,N.T=c}}function Ux(e,t,n,l){var c=N.T;N.T=null;var d=C.p;try{C.p=8,gu(e,t,n,l)}finally{C.p=d,N.T=c}}function gu(e,t,n,l){if(Tl){var c=yu(l);if(c===null)au(e,t,l,El,n),fp(e,l);else if(Bx(c,e,t,n,l))l.stopPropagation();else if(fp(e,l),t&4&&-1<Lx.indexOf(e)){for(;c!==null;){var d=ns(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=Nn(d.pendingLanes);if(y!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;y;){var k=1<<31-$t(y);b.entanglements[1]|=k,y&=~k}wa(d),(Ue&6)===0&&(ul=Bt()+500,Gr(0))}}break;case 31:case 13:b=Rn(d,2),b!==null&&Ut(b,d,2),hl(),pu(d,2)}if(d=yu(l),d===null&&au(e,t,l,El,n),d===c)break;c=d}c!==null&&l.stopPropagation()}else au(e,t,l,null,n)}}function yu(e){return e=xo(e),bu(e)}var El=null;function bu(e){if(El=null,e=as(e),e!==null){var t=h(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=f(t),e!==null)return e;e=null}else if(n===31){if(e=p(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return El=e,null}function hp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wy()){case xd:return 2;case vd:return 8;case yi:case jy:return 32;case wd:return 268435456;default:return 32}default:return 32}}var xu=!1,hn=null,fn=null,mn=null,Jr=new Map,Wr=new Map,pn=[],Lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fp(e,t){switch(e){case"focusin":case"focusout":hn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":Jr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wr.delete(t.pointerId)}}function Qr(e,t,n,l,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:d,targetContainers:[c]},t!==null&&(t=ns(t),t!==null&&up(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Bx(e,t,n,l,c){switch(t){case"focusin":return hn=Qr(hn,e,t,n,l,c),!0;case"dragenter":return fn=Qr(fn,e,t,n,l,c),!0;case"mouseover":return mn=Qr(mn,e,t,n,l,c),!0;case"pointerover":var d=c.pointerId;return Jr.set(d,Qr(Jr.get(d)||null,e,t,n,l,c)),!0;case"gotpointercapture":return d=c.pointerId,Wr.set(d,Qr(Wr.get(d)||null,e,t,n,l,c)),!0}return!1}function mp(e){var t=as(e.target);if(t!==null){var n=h(t);if(n!==null){if(t=n.tag,t===13){if(t=f(n),t!==null){e.blockedOn=t,Td(e.priority,function(){dp(n)});return}}else if(t===31){if(t=p(n),t!==null){e.blockedOn=t,Td(e.priority,function(){dp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yu(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);bo=l,n.target.dispatchEvent(l),bo=null}else return t=ns(n),t!==null&&up(t),e.blockedOn=n,!1;t.shift()}return!0}function pp(e,t,n){Rl(e)&&n.delete(t)}function zx(){xu=!1,hn!==null&&Rl(hn)&&(hn=null),fn!==null&&Rl(fn)&&(fn=null),mn!==null&&Rl(mn)&&(mn=null),Jr.forEach(pp),Wr.forEach(pp)}function Cl(e,t){e.blockedOn===t&&(e.blockedOn=null,xu||(xu=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,zx)))}var Al=null;function gp(e){Al!==e&&(Al=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Al===e&&(Al=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],c=e[t+2];if(typeof l!="function"){if(bu(l||n)===null)continue;break}var d=ns(n);d!==null&&(e.splice(t,3),t-=3,yc(d,{pending:!0,data:c,method:n.method,action:l},l,c))}}))}function zs(e){function t(k){return Cl(k,e)}hn!==null&&Cl(hn,e),fn!==null&&Cl(fn,e),mn!==null&&Cl(mn,e),Jr.forEach(t),Wr.forEach(t);for(var n=0;n<pn.length;n++){var l=pn[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<pn.length&&(n=pn[0],n.blockedOn===null);)mp(n),n.blockedOn===null&&pn.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var c=n[l],d=n[l+1],y=c[Rt]||null;if(typeof d=="function")y||gp(n);else if(y){var b=null;if(d&&d.hasAttribute("formAction")){if(c=d,y=d[Rt]||null)b=y.formAction;else if(bu(c)!==null)continue}else b=y.action;typeof b=="function"?n[l+1]=b:(n.splice(l,3),l-=3),gp(n)}}}function yp(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return c=y})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function vu(e){this._internalRoot=e}Ol.prototype.render=vu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var n=t.current,l=Kt();op(n,l,e,t,null,null)},Ol.prototype.unmount=vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;op(e.current,2,null,e,null,null),hl(),t[ts]=null}};function Ol(e){this._internalRoot=e}Ol.prototype.unstable_scheduleHydration=function(e){if(e){var t=kd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<pn.length&&t!==0&&t<pn[n].priority;n++);pn.splice(n,0,e),n===0&&mp(e)}};var bp=a.version;if(bp!=="19.2.3")throw Error(o(527,bp,"19.2.3"));C.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var $x={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{rr=Dl.inject($x),zt=Dl}catch{}}return Xr.createRoot=function(e,t){if(!u(e))throw Error(o(299));var n=!1,l="",c=_f,d=kf,y=Tf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=ip(e,1,!1,null,null,n,l,null,c,d,y,yp),e[ts]=t.current,tu(e),new vu(t)},Xr.hydrateRoot=function(e,t,n){if(!u(e))throw Error(o(299));var l=!1,c="",d=_f,y=kf,b=Tf,k=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError),n.formState!==void 0&&(k=n.formState)),t=ip(e,1,!0,t,n??null,l,c,k,d,y,b,yp),t.context=lp(null),n=t.current,l=Kt(),l=co(l),c=Fa(l),c.callback=null,en(n,c,l),n=l,t.current.lanes=n,lr(t,n),wa(t),e[ts]=t.current,tu(e),new Ol(t)},Xr.version="19.2.3",Xr}var Ep;function Jx(){if(Ep)return Su.exports;Ep=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),Su.exports=Yx(),Su.exports}var Wx=Jx();function Ql(s,a){var i={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.indexOf(o)<0&&(i[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(s);u<o.length;u++)a.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(s,o[u])&&(i[o[u]]=s[o[u]]);return i}function Qx(s,a,i,o){function u(h){return h instanceof i?h:new i(function(f){f(h)})}return new(i||(i=Promise))(function(h,f){function p(x){try{g(o.next(x))}catch(j){f(j)}}function m(x){try{g(o.throw(x))}catch(j){f(j)}}function g(x){x.done?h(x.value):u(x.value).then(p,m)}g((o=o.apply(s,a||[])).next())})}const Zx=s=>s?(...a)=>s(...a):(...a)=>fetch(...a);class id extends Error{constructor(a,i="FunctionsError",o){super(a),this.name=i,this.context=o}}class Xx extends id{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class Rp extends id{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class Cp extends id{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var qu;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(qu||(qu={}));class Fx{constructor(a,{headers:i={},customFetch:o,region:u=qu.Any}={}){this.url=a,this.headers=i,this.region=u,this.fetch=Zx(o)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return Qx(this,arguments,void 0,function*(i,o={}){var u;let h,f;try{const{headers:p,method:m,body:g,signal:x,timeout:j}=o;let v={},{region:w}=o;w||(w=this.region);const _=new URL(`${this.url}/${i}`);w&&w!=="any"&&(v["x-region"]=w,_.searchParams.set("forceFunctionRegion",w));let S;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",S=g):typeof g=="string"?(v["Content-Type"]="text/plain",S=g):typeof FormData<"u"&&g instanceof FormData?S=g:(v["Content-Type"]="application/json",S=JSON.stringify(g)):S=g;let E=x;j&&(f=new AbortController,h=setTimeout(()=>f.abort(),j),x?(E=f.signal,x.addEventListener("abort",()=>f.abort())):E=f.signal);const q=yield this.fetch(_.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),p),body:S,signal:E}).catch(L=>{throw new Xx(L)}),U=q.headers.get("x-relay-error");if(U&&U==="true")throw new Rp(q);if(!q.ok)throw new Cp(q);let A=((u=q.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),I;return A==="application/json"?I=yield q.json():A==="application/octet-stream"||A==="application/pdf"?I=yield q.blob():A==="text/event-stream"?I=q:A==="multipart/form-data"?I=yield q.formData():I=yield q.text(),{data:I,error:null,response:q}}catch(p){return{data:null,error:p,response:p instanceof Cp||p instanceof Rp?p.context:void 0}}finally{h&&clearTimeout(h)}})}}var e0=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},t0=class{constructor(s){var a,i;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(i=s.isMaybeSingle)!==null&&i!==void 0?i:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let u=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let f=null,p=null,m=null,g=h.status,x=h.statusText;if(h.ok){var j,v;if(i.method!=="HEAD"){var w;const q=await h.text();q===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((w=i.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?p=q:p=JSON.parse(q))}const S=(j=i.headers.get("Prefer"))===null||j===void 0?void 0:j.match(/count=(exact|planned|estimated)/),E=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");S&&E&&E.length>1&&(m=parseInt(E[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,g=406,x="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var _;const S=await h.text();try{f=JSON.parse(S),Array.isArray(f)&&h.status===404&&(p=[],f=null,g=200,x="OK")}catch{h.status===404&&S===""?(g=204,x="No Content"):f={message:S}}if(f&&i.isMaybeSingle&&(!(f==null||(_=f.details)===null||_===void 0)&&_.includes("0 rows"))&&(f=null,g=200,x="OK"),f&&i.shouldThrowOnError)throw new e0(f)}return{error:f,data:p,count:m,status:g,statusText:x}});return this.shouldThrowOnError||(u=u.catch(h=>{var f;let p="";const m=h?.cause;if(m){var g,x,j,v;const _=(g=m?.message)!==null&&g!==void 0?g:"",S=(x=m?.code)!==null&&x!==void 0?x:"";p=`${(j=h?.name)!==null&&j!==void 0?j:"FetchError"}: ${h?.message}`,p+=`

Caused by: ${(v=m?.name)!==null&&v!==void 0?v:"Error"}: ${_}`,S&&(p+=` (${S})`),m?.stack&&(p+=`
${m.stack}`)}else{var w;p=(w=h?.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(s,a)}returns(){return this}overrideTypes(){return this}},a0=class extends t0{select(s){let a=!1;const i=(s??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:i,foreignTable:o,referencedTable:u=o}={}){const h=u?`${u}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${s}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:i=a}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${s}`),this}range(s,a,{foreignTable:i,referencedTable:o=i}={}){const u=typeof o>"u"?"offset":`${o}.offset`,h=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(h,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:i=!1,buffers:o=!1,wal:u=!1,format:h="text"}={}){var f;const p=[s?"analyze":null,a?"verbose":null,i?"settings":null,o?"buffers":null,u?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${m}"; options=${p};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const Ap=new RegExp("[,()]");var Ys=class extends a0{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}regexMatch(s,a){return this.url.searchParams.append(s,`match.${a}`),this}regexIMatch(s,a){return this.url.searchParams.append(s,`imatch.${a}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}isDistinct(s,a){return this.url.searchParams.append(s,`isdistinct.${a}`),this}in(s,a){const i=Array.from(new Set(a)).map(o=>typeof o=="string"&&Ap.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${i})`),this}notIn(s,a){const i=Array.from(new Set(a)).map(o=>typeof o=="string"&&Ap.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`not.in.(${i})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:i,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const h=i===void 0?"":`(${i})`;return this.url.searchParams.append(s,`${u}fts${h}.${a}`),this}match(s){return Object.entries(s).forEach(([a,i])=>{this.url.searchParams.append(a,`eq.${i}`)}),this}not(s,a,i){return this.url.searchParams.append(s,`not.${a}.${i}`),this}or(s,{foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,a,i){return this.url.searchParams.append(s,`${a}.${i}`),this}},n0=class{constructor(s,{headers:a={},schema:i,fetch:o}){this.url=s,this.headers=new Headers(a),this.schema=i,this.fetch=o}select(s,a){const{head:i=!1,count:o}=a??{},u=i?"HEAD":"GET";let h=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join("");return this.url.searchParams.set("select",f),o&&this.headers.append("Prefer",`count=${o}`),new Ys({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:i=!0}={}){var o;const u="POST";if(a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new Ys({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:i=!1,count:o,defaultToNull:u=!0}={}){var h;const f="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),o&&this.headers.append("Prefer",`count=${o}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new Ys({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(s,{count:a}={}){var i;const o="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new Ys({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:s}={}){var a;const i="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new Ys({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}},s0=class Tg{constructor(a,{headers:i={},schema:o,fetch:u}={}){this.url=a,this.headers=new Headers(i),this.schemaName=o,this.fetch=u}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new n0(new URL(`${this.url}/${a}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new Tg(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,i={},{head:o=!1,get:u=!1,count:h}={}){var f;let p;const m=new URL(`${this.url}/rpc/${a}`);let g;o||u?(p=o?"HEAD":"GET",Object.entries(i).filter(([j,v])=>v!==void 0).map(([j,v])=>[j,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([j,v])=>{m.searchParams.append(j,v)})):(p="POST",g=i);const x=new Headers(this.headers);return h&&x.set("Prefer",`count=${h}`),new Ys({method:p,url:m,headers:x,schema:this.schemaName,body:g,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class r0{constructor(){}static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const o=i.node,u=parseInt(o.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let i=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(i+=`

Suggested solution: ${a.workaround}`),new Error(i)}static createWebSocket(a,i){const o=this.getWebSocketConstructor();return new o(a,i)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const i0="2.89.0",l0=`realtime-js/${i0}`,Eg="1.0.0",o0="2.0.0",Op=Eg,Pu=1e4,c0=1e3,u0=100;var xn;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(xn||(xn={}));var pt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(pt||(pt={}));var pa;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(pa||(pa={}));var Iu;(function(s){s.websocket="websocket"})(Iu||(Iu={}));var Yn;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Yn||(Yn={}));class d0{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=a??[]}encode(a,i){if(a.event===this.BROADCAST_EVENT&&!(a.payload instanceof ArrayBuffer)&&typeof a.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(a));let o=[a.join_ref,a.ref,a.topic,a.event,a.payload];return i(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(a){var i;return this._isArrayBuffer((i=a.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var i,o;const u=(o=(i=a.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(a){var i,o;const u=(o=(i=a.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(a,i,o){var u,h;const f=a.topic,p=(u=a.ref)!==null&&u!==void 0?u:"",m=(h=a.join_ref)!==null&&h!==void 0?h:"",g=a.payload.event,x=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},j=Object.keys(x).length===0?"":JSON.stringify(x);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(j.length>255)throw new Error(`metadata length ${j.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+f.length+g.length+j.length,w=new ArrayBuffer(this.HEADER_LENGTH+v);let _=new DataView(w),S=0;_.setUint8(S++,this.KINDS.userBroadcastPush),_.setUint8(S++,m.length),_.setUint8(S++,p.length),_.setUint8(S++,f.length),_.setUint8(S++,g.length),_.setUint8(S++,j.length),_.setUint8(S++,i),Array.from(m,q=>_.setUint8(S++,q.charCodeAt(0))),Array.from(p,q=>_.setUint8(S++,q.charCodeAt(0))),Array.from(f,q=>_.setUint8(S++,q.charCodeAt(0))),Array.from(g,q=>_.setUint8(S++,q.charCodeAt(0))),Array.from(j,q=>_.setUint8(S++,q.charCodeAt(0)));var E=new Uint8Array(w.byteLength+o.byteLength);return E.set(new Uint8Array(w),0),E.set(new Uint8Array(o),w.byteLength),E.buffer}decode(a,i){if(this._isArrayBuffer(a)){let o=this._binaryDecode(a);return i(o)}if(typeof a=="string"){const o=JSON.parse(a),[u,h,f,p,m]=o;return i({join_ref:u,ref:h,topic:f,event:p,payload:m})}return i({})}_binaryDecode(a){const i=new DataView(a),o=i.getUint8(0),u=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(a,i,u)}_decodeUserBroadcast(a,i,o){const u=i.getUint8(1),h=i.getUint8(2),f=i.getUint8(3),p=i.getUint8(4);let m=this.HEADER_LENGTH+4;const g=o.decode(a.slice(m,m+u));m=m+u;const x=o.decode(a.slice(m,m+h));m=m+h;const j=o.decode(a.slice(m,m+f));m=m+f;const v=a.slice(m,a.byteLength),w=p===this.JSON_ENCODING?JSON.parse(o.decode(v)):v,_={type:this.BROADCAST_EVENT,event:x,payload:w};return f>0&&(_.meta=JSON.parse(j)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(a){var i;return a instanceof ArrayBuffer||((i=a?.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(a,i){return!a||typeof a!="object"?{}:Object.fromEntries(Object.entries(a).filter(([o])=>i.includes(o)))}}class Rg{constructor(a,i){this.callback=a,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ve;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ve||(Ve={}));const Dp=(s,a,i={})=>{var o;const u=(o=i.skipTypes)!==null&&o!==void 0?o:[];return a?Object.keys(a).reduce((h,f)=>(h[f]=h0(f,s,a,u),h),{}):{}},h0=(s,a,i,o)=>{const u=a.find(p=>p.name===s),h=u?.type,f=i[s];return h&&!o.includes(h)?Cg(h,f):Vu(f)},Cg=(s,a)=>{if(s.charAt(0)==="_"){const i=s.slice(1,s.length);return g0(a,i)}switch(s){case Ve.bool:return f0(a);case Ve.float4:case Ve.float8:case Ve.int2:case Ve.int4:case Ve.int8:case Ve.numeric:case Ve.oid:return m0(a);case Ve.json:case Ve.jsonb:return p0(a);case Ve.timestamp:return y0(a);case Ve.abstime:case Ve.date:case Ve.daterange:case Ve.int4range:case Ve.int8range:case Ve.money:case Ve.reltime:case Ve.text:case Ve.time:case Ve.timestamptz:case Ve.timetz:case Ve.tsrange:case Ve.tstzrange:return Vu(a);default:return Vu(a)}},Vu=s=>s,f0=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},m0=s=>{if(typeof s=="string"){const a=parseFloat(s);if(!Number.isNaN(a))return a}return s},p0=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},g0=(s,a)=>{if(typeof s!="string")return s;const i=s.length-1,o=s[i];if(s[0]==="{"&&o==="}"){let h;const f=s.slice(1,i);try{h=JSON.parse("["+f+"]")}catch{h=f?f.split(","):[]}return h.map(p=>Cg(a,p))}return s},y0=s=>typeof s=="string"?s.replace(" ","T"):s,Ag=s=>{const a=new URL(s);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class Tu{constructor(a,i,o={},u=Pu){this.channel=a,this.event=i,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,i){var o;return this._hasReceived(a)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:a,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:i}){this.recHooks.filter(o=>o.status===a).forEach(o=>o.callback(i))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var Mp;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Mp||(Mp={}));class ai{constructor(a,i){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:h,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ai.syncState(this.state,u,h,f),this.pendingDiffs.forEach(m=>{this.state=ai.syncDiff(this.state,m,h,f)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},u=>{const{onJoin:h,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=ai.syncDiff(this.state,u,h,f),p())}),this.onJoin((u,h,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:h,newPresences:f})}),this.onLeave((u,h,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:h,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,i,o,u){const h=this.cloneDeep(a),f=this.transformState(i),p={},m={};return this.map(h,(g,x)=>{f[g]||(m[g]=x)}),this.map(f,(g,x)=>{const j=h[g];if(j){const v=x.map(E=>E.presence_ref),w=j.map(E=>E.presence_ref),_=x.filter(E=>w.indexOf(E.presence_ref)<0),S=j.filter(E=>v.indexOf(E.presence_ref)<0);_.length>0&&(p[g]=_),S.length>0&&(m[g]=S)}else p[g]=x}),this.syncDiff(h,{joins:p,leaves:m},o,u)}static syncDiff(a,i,o,u){const{joins:h,leaves:f}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(h,(p,m)=>{var g;const x=(g=a[p])!==null&&g!==void 0?g:[];if(a[p]=this.cloneDeep(m),x.length>0){const j=a[p].map(w=>w.presence_ref),v=x.filter(w=>j.indexOf(w.presence_ref)<0);a[p].unshift(...v)}o(p,x,m)}),this.map(f,(p,m)=>{let g=a[p];if(!g)return;const x=m.map(j=>j.presence_ref);g=g.filter(j=>x.indexOf(j.presence_ref)<0),a[p]=g,u(p,g,m),g.length===0&&delete a[p]}),a}static map(a,i){return Object.getOwnPropertyNames(a).map(o=>i(o,a[o]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((i,o)=>{const u=a[o];return"metas"in u?i[o]=u.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):i[o]=u,i},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Up;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Up||(Up={}));var ni;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(ni||(ni={}));var qa;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(qa||(qa={}));class Qs{constructor(a,i={config:{}},o){var u,h;if(this.topic=a,this.params=i,this.socket=o,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Tu(this,pa.join,this.params,this.timeout),this.rejoinTimer=new Rg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pa.reply,{},(f,p)=>{this._trigger(this._replyEventName(p),f)}),this.presence=new ai(this),this.broadcastEndpointURL=Ag(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,i=this.timeout){var o,u,h;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:f,presence:p,private:m}}=this.params,g=(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(w=>w.filter))!==null&&u!==void 0?u:[],x=!!this.bindings[ni.PRESENCE]&&this.bindings[ni.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,j={},v={broadcast:f,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(j.access_token=this.socket.accessTokenValue),this._onError(w=>a?.(qa.CHANNEL_ERROR,w)),this._onClose(()=>a?.(qa.CLOSED)),this.updateJoinPayload(Object.assign({config:v},j)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:w})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){a?.(qa.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,E=(_=S?.length)!==null&&_!==void 0?_:0,q=[];for(let U=0;U<E;U++){const A=S[U],{filter:{event:I,schema:L,table:G,filter:Z}}=A,X=w&&w[U];if(X&&X.event===I&&Qs.isFilterValueEqual(X.schema,L)&&Qs.isFilterValueEqual(X.table,G)&&Qs.isFilterValueEqual(X.filter,Z))q.push(Object.assign(Object.assign({},A),{id:X.id}));else{this.unsubscribe(),this.state=pt.errored,a?.(qa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,a&&a(qa.SUBSCRIBED);return}}).receive("error",w=>{this.state=pt.errored,a?.(qa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{a?.(qa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,i={}){return await this.send({type:"presence",event:"track",payload:a},i.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,i,o){return this.state===pt.joined&&a===ni.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,i,o)}async httpSend(a,i,o={}){var u;if(i==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=o.timeout)!==null&&u!==void 0?u:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(a,i={}){var o,u;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:f}=a,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:f,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=g.body)===null||u===void 0?void 0:u.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var f,p,m;const g=this._push(a.type,a,i.timeout||this.timeout);a.type==="broadcast"&&!(!((m=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&h("ok"),g.receive("ok",()=>h("ok")),g.receive("error",()=>h("error")),g.receive("timeout",()=>h("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=pt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pa.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(u=>{o=new Tu(this,pa.leave,{},a),o.receive("ok",()=>{i(),u("ok")}).receive("timeout",()=>{i(),u("timed out")}).receive("error",()=>{u("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(a,i,o){const u=new AbortController,h=setTimeout(()=>u.abort(),o),f=await this.socket.fetch(a,Object.assign(Object.assign({},i),{signal:u.signal}));return clearTimeout(h),f}_push(a,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Tu(this,a,i,o);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>u0){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(a,i,o){return i}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,i,o){var u,h;const f=a.toLocaleLowerCase(),{close:p,error:m,leave:g,join:x}=pa;if(o&&[p,m,g,x].indexOf(f)>=0&&o!==this._joinRef())return;let v=this._onMessage(f,i,o);if(i&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(w=>{var _,S,E;return((_=w.filter)===null||_===void 0?void 0:_.event)==="*"||((E=(S=w.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===f}).map(w=>w.callback(v,o)):(h=this.bindings[f])===null||h===void 0||h.filter(w=>{var _,S,E,q,U,A;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in w){const I=w.id,L=(_=w.filter)===null||_===void 0?void 0:_.event;return I&&((S=i.ids)===null||S===void 0?void 0:S.includes(I))&&(L==="*"||L?.toLocaleLowerCase()===((E=i.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const I=(U=(q=w?.filter)===null||q===void 0?void 0:q.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return I==="*"||I===((A=i?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===f}).map(w=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:S,table:E,commit_timestamp:q,type:U,errors:A}=_;v=Object.assign(Object.assign({},{schema:S,table:E,commit_timestamp:q,eventType:U,new:{},old:{},errors:A}),this._getPayloadRecords(_))}w.callback(v,o)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,i,o){const u=a.toLocaleLowerCase(),h={type:u,filter:i,callback:o};return this.bindings[u]?this.bindings[u].push(h):this.bindings[u]=[h],this}_off(a,i){const o=a.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(u=>{var h;return!(((h=u.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===o&&Qs.isEqual(u.filter,i))})),this}static isEqual(a,i){if(Object.keys(a).length!==Object.keys(i).length)return!1;for(const o in a)if(a[o]!==i[o])return!1;return!0}static isFilterValueEqual(a,i){return(a??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(pa.close,{},a)}_onError(a){this._on(pa.error,{},i=>a(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const i={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(i.new=Dp(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(i.old=Dp(a.columns,a.old_record)),i}}const Eu=()=>{},Ml={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},b0=[1e3,2e3,5e3,1e4],x0=1e4,v0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class w0{constructor(a,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pu,this.transport=null,this.heartbeatIntervalMs=Ml.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Eu,this.ref=0,this.reconnectTimer=null,this.vsn=Op,this.logger=Eu,this.conn=null,this.sendBuffer=[],this.serializer=new d0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>u?(...h)=>u(...h):(...h)=>fetch(...h),!(!((o=i?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${a}/${Iu.websocket}`,this.httpEndpoint=Ag(a),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=r0.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const i=a.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(a?this.conn.close(a,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const i=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const a=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,i,o){this.logger(a,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case xn.connecting:return Yn.Connecting;case xn.open:return Yn.Open;case xn.closing:return Yn.Closing;default:return Yn.Closed}}isConnected(){return this.connectionState()===Yn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,i={config:{}}){const o=`realtime:${a}`,u=this.getChannels().find(h=>h.topic===o);if(u)return u;{const h=new Qs(`realtime:${a}`,i,this);return this.channels.push(h),h}}push(a){const{topic:i,event:o,payload:u,ref:h}=a,f=()=>{this.encode(a,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${i} ${o} (${h})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(c0,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Ml.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let i=this.channels.find(o=>o.topic===a&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${a}"`),i.unsubscribe())}_remove(a){this.channels=this.channels.filter(i=>i.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:u,payload:h,ref:f}=i,p=f?`(${f})`:"",m=h.status||"";this.log("receive",`${m} ${o} ${u} ${p}`.trim(),h),this.channels.filter(g=>g._isMember(o)).forEach(g=>g._trigger(u,h,f)),this._triggerStateCallbacks("message",i)})}_clearTimer(a){var i;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a),this.conn.readyState===xn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===xn.open||this.conn.readyState===xn.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(a){var i;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(pa.error))}_appendParams(a,i){if(Object.keys(i).length===0)return a;const o=a.match(/\?/)?"&":"?",u=new URLSearchParams(i);return`${a}${o}${u}`}_workerObjectUrl(a){let i;if(a)i=a;else{const o=new Blob([v0],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(a,i=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(a=null){let i,o=!1;if(a)i=a,o=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),i=this.accessTokenValue}else i=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(u=>{const h={access_token:i,version:l0};i&&u.updateJoinPayload(h),u.joinedOnce&&u._isJoined()&&u._push(pa.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${a}`,i)})}_triggerStateCallbacks(a,i){try{this.stateChangeCallbacks[a].forEach(o=>{try{o(i)}catch(u){this.log("error",`error in ${a} callback`,u)}})}catch(o){this.log("error",`error triggering ${a} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Rg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ml.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var i,o,u,h,f,p,m,g,x,j,v,w;switch(this.transport=(i=a?.transport)!==null&&i!==void 0?i:null,this.timeout=(o=a?.timeout)!==null&&o!==void 0?o:Pu,this.heartbeatIntervalMs=(u=a?.heartbeatIntervalMs)!==null&&u!==void 0?u:Ml.HEARTBEAT_INTERVAL,this.worker=(h=a?.worker)!==null&&h!==void 0?h:!1,this.accessToken=(f=a?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(p=a?.heartbeatCallback)!==null&&p!==void 0?p:Eu,this.vsn=(m=a?.vsn)!==null&&m!==void 0?m:Op,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=a?.reconnectAfterMs)!==null&&g!==void 0?g:(_=>b0[_-1]||x0),this.vsn){case Eg:this.encode=(x=a?.encode)!==null&&x!==void 0?x:((_,S)=>S(JSON.stringify(_))),this.decode=(j=a?.decode)!==null&&j!==void 0?j:((_,S)=>S(JSON.parse(_)));break;case o0:this.encode=(v=a?.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(w=a?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}var ii=class extends Error{constructor(s,a){super(s),this.name="IcebergError",this.status=a.status,this.icebergType=a.icebergType,this.icebergCode=a.icebergCode,this.details=a.details,this.isCommitStateUnknown=a.icebergType==="CommitStateUnknownException"||[500,502,504].includes(a.status)&&a.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function j0(s,a,i){const o=new URL(a,s);if(i)for(const[u,h]of Object.entries(i))h!==void 0&&o.searchParams.set(u,h);return o.toString()}async function S0(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function N0(s){const a=s.fetchImpl??globalThis.fetch;return{async request({method:i,path:o,query:u,body:h,headers:f}){const p=j0(s.baseUrl,o,u),m=await S0(s.auth),g=await a(p,{method:i,headers:{...h?{"Content-Type":"application/json"}:{},...m,...f},body:h?JSON.stringify(h):void 0}),x=await g.text(),j=(g.headers.get("content-type")||"").includes("application/json"),v=j&&x?JSON.parse(x):x;if(!g.ok){const w=j?v:void 0,_=w?.error;throw new ii(_?.message??`Request failed with status ${g.status}`,{status:g.status,icebergType:_?.type,icebergCode:_?.code,details:w})}return{status:g.status,headers:g.headers,data:v}}}}function Ul(s){return s.join("")}var _0=class{constructor(s,a=""){this.client=s,this.prefix=a}async listNamespaces(s){const a=s?{parent:Ul(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:a})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(s,a){const i={namespace:s.namespace,properties:a?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ul(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ul(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ul(s.namespace)}`}),!0}catch(a){if(a instanceof ii&&a.status===404)return!1;throw a}}async createNamespaceIfNotExists(s,a){try{return await this.createNamespace(s,a)}catch(i){if(i instanceof ii&&i.status===409)return;throw i}}};function $s(s){return s.join("")}var k0=class{constructor(s,a="",i){this.client=s,this.prefix=a,this.accessDelegation=i}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$s(s.namespace)}/tables`})).data.identifiers}async createTable(s,a){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${$s(s.namespace)}/tables`,body:a,headers:i})).data.metadata}async updateTable(s,a){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${$s(s.namespace)}/tables/${s.name}`,body:a});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(s,a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${$s(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(a?.purge??!1)}})}async loadTable(s){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$s(s.namespace)}/tables/${s.name}`,headers:a})).data.metadata}async tableExists(s){const a={};this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${$s(s.namespace)}/tables/${s.name}`,headers:a}),!0}catch(i){if(i instanceof ii&&i.status===404)return!1;throw i}}async createTableIfNotExists(s,a){try{return await this.createTable(s,a)}catch(i){if(i instanceof ii&&i.status===409)return await this.loadTable({namespace:s.namespace,name:a.name});throw i}}},T0=class{constructor(s){let a="v1";s.catalogName&&(a+=`/${s.catalogName}`);const i=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=N0({baseUrl:i,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new _0(this.client,a),this.tableOps=new k0(this.client,a,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,a){return this.namespaceOps.createNamespace(s,a)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,a){return this.tableOps.createTable(s,a)}async updateTable(s,a){return this.tableOps.updateTable(s,a)}async dropTable(s,a){await this.tableOps.dropTable(s,a)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,a){return this.namespaceOps.createNamespaceIfNotExists(s,a)}async createTableIfNotExists(s,a){return this.tableOps.createTableIfNotExists(s,a)}},Zl=class extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}};function Xe(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var E0=class extends Zl{constructor(s,a,i){super(s),this.name="StorageApiError",this.status=a,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ku=class extends Zl{constructor(s,a){super(s),this.name="StorageUnknownError",this.originalError=a}};const ld=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),R0=()=>Response,Yu=s=>{if(Array.isArray(s))return s.map(i=>Yu(i));if(typeof s=="function"||s!==Object(s))return s;const a={};return Object.entries(s).forEach(([i,o])=>{const u=i.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));a[u]=Yu(o)}),a},C0=s=>{if(typeof s!="object"||s===null)return!1;const a=Object.getPrototypeOf(s);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},A0=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function li(s){"@babel/helpers - typeof";return li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},li(s)}function O0(s,a){if(li(s)!="object"||!s)return s;var i=s[Symbol.toPrimitive];if(i!==void 0){var o=i.call(s,a);if(li(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function D0(s){var a=O0(s,"string");return li(a)=="symbol"?a:a+""}function M0(s,a,i){return(a=D0(a))in s?Object.defineProperty(s,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[a]=i,s}function Lp(s,a){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);a&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),i.push.apply(i,o)}return i}function be(s){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?Lp(Object(i),!0).forEach(function(o){M0(s,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):Lp(Object(i)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(i,o))})}return s}const Ru=s=>{var a;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(a=s.error)===null||a===void 0?void 0:a.message)||JSON.stringify(s)},U0=async(s,a,i)=>{s instanceof await R0()&&!i?.noResolveJson?s.json().then(o=>{const u=s.status||500,h=o?.statusCode||u+"";a(new E0(Ru(o),u,h))}).catch(o=>{a(new Ku(Ru(o),o))}):a(new Ku(Ru(s),s))},L0=(s,a,i,o)=>{const u={method:s,headers:a?.headers||{}};return s==="GET"||!o?u:(C0(o)?(u.headers=be({"Content-Type":"application/json"},a?.headers),u.body=JSON.stringify(o)):u.body=o,a?.duplex&&(u.duplex=a.duplex),be(be({},u),i))};async function mi(s,a,i,o,u,h){return new Promise((f,p)=>{s(i,L0(a,o,u,h)).then(m=>{if(!m.ok)throw m;return o?.noResolveJson?m:m.json()}).then(m=>f(m)).catch(m=>U0(m,p,o))})}async function oi(s,a,i,o){return mi(s,"GET",a,i,o)}async function ma(s,a,i,o,u){return mi(s,"POST",a,o,u,i)}async function Ju(s,a,i,o,u){return mi(s,"PUT",a,o,u,i)}async function B0(s,a,i,o){return mi(s,"HEAD",a,be(be({},i),{},{noResolveJson:!0}),o)}async function od(s,a,i,o,u){return mi(s,"DELETE",a,o,u,i)}var z0=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a}then(s,a){return this.execute().then(s,a)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}}};let Og;Og=Symbol.toStringTag;var $0=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a,this[Og]="BlobDownloadBuilder",this.promise=null}asStream(){return new z0(this.downloadFn,this.shouldThrowOnError)}then(s,a){return this.getPromise().then(s,a)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}}};const H0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var G0=class{constructor(s,a={},i,o){this.shouldThrowOnError=!1,this.url=s,this.headers=a,this.bucketId=i,this.fetch=ld(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(s,a,i,o){var u=this;try{let h;const f=be(be({},Bp),o);let p=be(be({},u.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const m=f.metadata;typeof Blob<"u"&&i instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),m&&h.append("metadata",u.encodeMetadata(m)),h.append("",i)):typeof FormData<"u"&&i instanceof FormData?(h=i,h.has("cacheControl")||h.append("cacheControl",f.cacheControl),m&&!h.has("metadata")&&h.append("metadata",u.encodeMetadata(m))):(h=i,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,m&&(p["x-metadata"]=u.toBase64(u.encodeMetadata(m))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!f.duplex&&(f.duplex="half")),o?.headers&&(p=be(be({},p),o.headers));const g=u._removeEmptyFolders(a),x=u._getFinalPath(g),j=await(s=="PUT"?Ju:ma)(u.fetch,`${u.url}/object/${x}`,h,be({headers:p},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:g,id:j.Id,fullPath:j.Key},error:null}}catch(h){if(u.shouldThrowOnError)throw h;if(Xe(h))return{data:null,error:h};throw h}}async upload(s,a,i){return this.uploadOrUpdate("POST",s,a,i)}async uploadToSignedUrl(s,a,i,o){var u=this;const h=u._removeEmptyFolders(s),f=u._getFinalPath(h),p=new URL(u.url+`/object/upload/sign/${f}`);p.searchParams.set("token",a);try{let m;const g=be({upsert:Bp.upsert},o),x=be(be({},u.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.append("cacheControl",g.cacheControl)):(m=i,x["cache-control"]=`max-age=${g.cacheControl}`,x["content-type"]=g.contentType),{data:{path:h,fullPath:(await Ju(u.fetch,p.toString(),m,{headers:x})).Key},error:null}}catch(m){if(u.shouldThrowOnError)throw m;if(Xe(m))return{data:null,error:m};throw m}}async createSignedUploadUrl(s,a){var i=this;try{let o=i._getFinalPath(s);const u=be({},i.headers);a?.upsert&&(u["x-upsert"]="true");const h=await ma(i.fetch,`${i.url}/object/upload/sign/${o}`,{},{headers:u}),f=new URL(i.url+h.url),p=f.searchParams.get("token");if(!p)throw new Zl("No token returned by API");return{data:{signedUrl:f.toString(),path:s,token:p},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}}async update(s,a,i){return this.uploadOrUpdate("PUT",s,a,i)}async move(s,a,i){var o=this;try{return{data:await ma(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:s,destinationKey:a,destinationBucket:i?.destinationBucket},{headers:o.headers}),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Xe(u))return{data:null,error:u};throw u}}async copy(s,a,i){var o=this;try{return{data:{path:(await ma(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:s,destinationKey:a,destinationBucket:i?.destinationBucket},{headers:o.headers})).Key},error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Xe(u))return{data:null,error:u};throw u}}async createSignedUrl(s,a,i){var o=this;try{let u=o._getFinalPath(s),h=await ma(o.fetch,`${o.url}/object/sign/${u}`,be({expiresIn:a},i?.transform?{transform:i.transform}:{}),{headers:o.headers});const f=i?.download?`&download=${i.download===!0?"":i.download}`:"";return h={signedUrl:encodeURI(`${o.url}${h.signedURL}${f}`)},{data:h,error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Xe(u))return{data:null,error:u};throw u}}async createSignedUrls(s,a,i){var o=this;try{const u=await ma(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:a,paths:s},{headers:o.headers}),h=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:u.map(f=>be(be({},f),{},{signedUrl:f.signedURL?encodeURI(`${o.url}${f.signedURL}${h}`):null})),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Xe(u))return{data:null,error:u};throw u}}download(s,a){const i=typeof a?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(a?.transform||{}),u=o?`?${o}`:"",h=this._getFinalPath(s),f=()=>oi(this.fetch,`${this.url}/${i}/${h}${u}`,{headers:this.headers,noResolveJson:!0});return new $0(f,this.shouldThrowOnError)}async info(s){var a=this;const i=a._getFinalPath(s);try{return{data:Yu(await oi(a.fetch,`${a.url}/object/info/${i}`,{headers:a.headers})),error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}}async exists(s){var a=this;const i=a._getFinalPath(s);try{return await B0(a.fetch,`${a.url}/object/${i}`,{headers:a.headers}),{data:!0,error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Xe(o)&&o instanceof Ku){const u=o.originalError;if([400,404].includes(u?.status))return{data:!1,error:o}}throw o}}getPublicUrl(s,a){const i=this._getFinalPath(s),o=[],u=a?.download?`download=${a.download===!0?"":a.download}`:"";u!==""&&o.push(u);const h=typeof a?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(a?.transform||{});f!==""&&o.push(f);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${p}`)}}}async remove(s){var a=this;try{return{data:await od(a.fetch,`${a.url}/object/${a.bucketId}`,{prefixes:s},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async list(s,a,i){var o=this;try{const u=be(be(be({},H0),a),{},{prefix:s||""});return{data:await ma(o.fetch,`${o.url}/object/list/${o.bucketId}`,u,{headers:o.headers},i),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Xe(u))return{data:null,error:u};throw u}}async listV2(s,a){var i=this;try{const o=be({},s);return{data:await ma(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,o,{headers:i.headers},a),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const a=[];return s.width&&a.push(`width=${s.width}`),s.height&&a.push(`height=${s.height}`),s.resize&&a.push(`resize=${s.resize}`),s.format&&a.push(`format=${s.format}`),s.quality&&a.push(`quality=${s.quality}`),a.join("&")}};const Dg="2.89.0",Mg={"X-Client-Info":`storage-js/${Dg}`};var q0=class{constructor(s,a={},i,o){this.shouldThrowOnError=!1;const u=new URL(s);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=be(be({},Mg),a),this.fetch=ld(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(s){var a=this;try{const i=a.listBucketOptionsToQueryString(s);return{data:await oi(a.fetch,`${a.url}/bucket${i}`,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async getBucket(s){var a=this;try{return{data:await oi(a.fetch,`${a.url}/bucket/${s}`,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async createBucket(s,a={public:!1}){var i=this;try{return{data:await ma(i.fetch,`${i.url}/bucket`,{id:s,name:s,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}}async updateBucket(s,a){var i=this;try{return{data:await Ju(i.fetch,`${i.url}/bucket/${s}`,{id:s,name:s,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}}async emptyBucket(s){var a=this;try{return{data:await ma(a.fetch,`${a.url}/bucket/${s}/empty`,{},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async deleteBucket(s){var a=this;try{return{data:await od(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(s){const a={};return s&&("limit"in s&&(a.limit=String(s.limit)),"offset"in s&&(a.offset=String(s.offset)),s.search&&(a.search=s.search),s.sortColumn&&(a.sortColumn=s.sortColumn),s.sortOrder&&(a.sortOrder=s.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}},P0=class{constructor(s,a={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=be(be({},Mg),a),this.fetch=ld(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var a=this;try{return{data:await ma(a.fetch,`${a.url}/bucket`,{name:s},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async listBuckets(s){var a=this;try{const i=new URLSearchParams;s?.limit!==void 0&&i.set("limit",s.limit.toString()),s?.offset!==void 0&&i.set("offset",s.offset.toString()),s?.sortColumn&&i.set("sortColumn",s.sortColumn),s?.sortOrder&&i.set("sortOrder",s.sortOrder),s?.search&&i.set("search",s.search);const o=i.toString(),u=o?`${a.url}/bucket?${o}`:`${a.url}/bucket`;return{data:await oi(a.fetch,u,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async deleteBucket(s){var a=this;try{return{data:await od(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}from(s){var a=this;if(!A0(s))throw new Zl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new T0({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>a.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(i,{get(u,h){const f=u[h];return typeof f!="function"?f:async(...p)=>{try{return{data:await f.apply(u,p),error:null}}catch(m){if(o)throw m;return{data:null,error:m}}}}})}};const cd={"X-Client-Info":`storage-js/${Dg}`,"Content-Type":"application/json"};var Ug=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Wt(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var Cu=class extends Ug{constructor(s,a,i){super(s),this.name="StorageVectorsApiError",this.status=a,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},I0=class extends Ug{constructor(s,a){super(s),this.name="StorageVectorsUnknownError",this.originalError=a}};const ud=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),V0=s=>{if(typeof s!="object"||s===null)return!1;const a=Object.getPrototypeOf(s);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},zp=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),K0=async(s,a,i)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!i?.noResolveJson){const o=s.status||500,u=s;if(typeof u.json=="function")u.json().then(h=>{const f=h?.statusCode||h?.code||o+"";a(new Cu(zp(h),o,f))}).catch(()=>{const h=o+"";a(new Cu(u.statusText||`HTTP ${o} error`,o,h))});else{const h=o+"";a(new Cu(u.statusText||`HTTP ${o} error`,o,h))}}else a(new I0(zp(s),s))},Y0=(s,a,i,o)=>{const u={method:s,headers:a?.headers||{}};return o?(V0(o)?(u.headers=be({"Content-Type":"application/json"},a?.headers),u.body=JSON.stringify(o)):u.body=o,be(be({},u),i)):u};async function J0(s,a,i,o,u,h){return new Promise((f,p)=>{s(i,Y0(a,o,u,h)).then(m=>{if(!m.ok)throw m;if(o?.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>f(m)).catch(m=>K0(m,p,o))})}async function Qt(s,a,i,o,u){return J0(s,"POST",a,o,u,i)}var W0=class{constructor(s,a={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=be(be({},cd),a),this.fetch=ud(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(s){var a=this;try{return{data:await Qt(a.fetch,`${a.url}/CreateIndex`,s,{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async getIndex(s,a){var i=this;try{return{data:await Qt(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:s,indexName:a},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Wt(o))return{data:null,error:o};throw o}}async listIndexes(s){var a=this;try{return{data:await Qt(a.fetch,`${a.url}/ListIndexes`,s,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async deleteIndex(s,a){var i=this;try{return{data:await Qt(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:s,indexName:a},{headers:i.headers})||{},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Wt(o))return{data:null,error:o};throw o}}},Q0=class{constructor(s,a={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=be(be({},cd),a),this.fetch=ud(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(s){var a=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Qt(a.fetch,`${a.url}/PutVectors`,s,{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async getVectors(s){var a=this;try{return{data:await Qt(a.fetch,`${a.url}/GetVectors`,s,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async listVectors(s){var a=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:await Qt(a.fetch,`${a.url}/ListVectors`,s,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async queryVectors(s){var a=this;try{return{data:await Qt(a.fetch,`${a.url}/QueryVectors`,s,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async deleteVectors(s){var a=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Qt(a.fetch,`${a.url}/DeleteVectors`,s,{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}},Z0=class{constructor(s,a={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=be(be({},cd),a),this.fetch=ud(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var a=this;try{return{data:await Qt(a.fetch,`${a.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async getBucket(s){var a=this;try{return{data:await Qt(a.fetch,`${a.url}/GetVectorBucket`,{vectorBucketName:s},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async listBuckets(s={}){var a=this;try{return{data:await Qt(a.fetch,`${a.url}/ListVectorBuckets`,s,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}async deleteBucket(s){var a=this;try{return{data:await Qt(a.fetch,`${a.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}}},X0=class extends Z0{constructor(s,a={}){super(s,a.headers||{},a.fetch)}from(s){return new F0(this.url,this.headers,s,this.fetch)}async createBucket(s){var a=()=>super.createBucket,i=this;return a().call(i,s)}async getBucket(s){var a=()=>super.getBucket,i=this;return a().call(i,s)}async listBuckets(s={}){var a=()=>super.listBuckets,i=this;return a().call(i,s)}async deleteBucket(s){var a=()=>super.deleteBucket,i=this;return a().call(i,s)}},F0=class extends W0{constructor(s,a,i,o){super(s,a,o),this.vectorBucketName=i}async createIndex(s){var a=()=>super.createIndex,i=this;return a().call(i,be(be({},s),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(s={}){var a=()=>super.listIndexes,i=this;return a().call(i,be(be({},s),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(s){var a=()=>super.getIndex,i=this;return a().call(i,i.vectorBucketName,s)}async deleteIndex(s){var a=()=>super.deleteIndex,i=this;return a().call(i,i.vectorBucketName,s)}index(s){return new ev(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},ev=class extends Q0{constructor(s,a,i,o,u){super(s,a,u),this.vectorBucketName=i,this.indexName=o}async putVectors(s){var a=()=>super.putVectors,i=this;return a().call(i,be(be({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(s){var a=()=>super.getVectors,i=this;return a().call(i,be(be({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(s={}){var a=()=>super.listVectors,i=this;return a().call(i,be(be({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(s){var a=()=>super.queryVectors,i=this;return a().call(i,be(be({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(s){var a=()=>super.deleteVectors,i=this;return a().call(i,be(be({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},tv=class extends q0{constructor(s,a={},i,o){super(s,a,i,o)}from(s){return new G0(this.url,this.headers,s,this.fetch)}get vectors(){return new X0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new P0(this.url+"/iceberg",this.headers,this.fetch)}};const Lg="2.89.0",Js=30*1e3,Wu=3,Au=Wu*Js,av="http://localhost:9999",nv="supabase.auth.token",sv={"X-Client-Info":`gotrue-js/${Lg}`},Qu="X-Supabase-Api-Version",Bg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,iv=600*1e3;class ci extends Error{constructor(a,i,o){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function ue(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class lv extends ci{constructor(a,i,o){super(a,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function ov(s){return ue(s)&&s.name==="AuthApiError"}class Jn extends ci{constructor(a,i){super(a),this.name="AuthUnknownError",this.originalError=i}}class Pa extends ci{constructor(a,i,o,u){super(a,o,u),this.name=i,this.status=o}}class Yt extends Pa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cv(s){return ue(s)&&s.name==="AuthSessionMissingError"}class Hs extends Pa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ll extends Pa{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class Bl extends Pa{constructor(a,i=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uv(s){return ue(s)&&s.name==="AuthImplicitGrantRedirectError"}class $p extends Pa{constructor(a,i=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dv extends Pa{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Zu extends Pa{constructor(a,i){super(a,"AuthRetryableFetchError",i,void 0)}}function Ou(s){return ue(s)&&s.name==="AuthRetryableFetchError"}class Hp extends Pa{constructor(a,i,o){super(a,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class Xu extends Pa{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Il="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gp=` 	
\r=`.split(""),hv=(()=>{const s=new Array(128);for(let a=0;a<s.length;a+=1)s[a]=-1;for(let a=0;a<Gp.length;a+=1)s[Gp[a].charCodeAt(0)]=-2;for(let a=0;a<Il.length;a+=1)s[Il[a].charCodeAt(0)]=a;return s})();function qp(s,a,i){if(s!==null)for(a.queue=a.queue<<8|s,a.queuedBits+=8;a.queuedBits>=6;){const o=a.queue>>a.queuedBits-6&63;i(Il[o]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const o=a.queue>>a.queuedBits-6&63;i(Il[o]),a.queuedBits-=6}}function zg(s,a,i){const o=hv[s];if(o>-1)for(a.queue=a.queue<<6|o,a.queuedBits+=6;a.queuedBits>=8;)i(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Pp(s){const a=[],i=f=>{a.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},h=f=>{pv(f,o,i)};for(let f=0;f<s.length;f+=1)zg(s.charCodeAt(f),u,h);return a.join("")}function fv(s,a){if(s<=127){a(s);return}else if(s<=2047){a(192|s>>6),a(128|s&63);return}else if(s<=65535){a(224|s>>12),a(128|s>>6&63),a(128|s&63);return}else if(s<=1114111){a(240|s>>18),a(128|s>>12&63),a(128|s>>6&63),a(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function mv(s,a){for(let i=0;i<s.length;i+=1){let o=s.charCodeAt(i);if(o>55295&&o<=56319){const u=(o-55296)*1024&65535;o=(s.charCodeAt(i+1)-56320&65535|u)+65536,i+=1}fv(o,a)}}function pv(s,a,i){if(a.utf8seq===0){if(s<=127){i(s);return}for(let o=1;o<6;o+=1)if((s>>7-o&1)===0){a.utf8seq=o;break}if(a.utf8seq===2)a.codepoint=s&31;else if(a.utf8seq===3)a.codepoint=s&15;else if(a.utf8seq===4)a.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|s&63,a.utf8seq-=1,a.utf8seq===0&&i(a.codepoint)}}function Zs(s){const a=[],i={queue:0,queuedBits:0},o=u=>{a.push(u)};for(let u=0;u<s.length;u+=1)zg(s.charCodeAt(u),i,o);return new Uint8Array(a)}function gv(s){const a=[];return mv(s,i=>a.push(i)),new Uint8Array(a)}function Zn(s){const a=[],i={queue:0,queuedBits:0},o=u=>{a.push(u)};return s.forEach(u=>qp(u,i,o)),qp(null,i,o),a.join("")}function yv(s){return Math.round(Date.now()/1e3)+s}function bv(){return Symbol("auth-callback")}const _t=()=>typeof window<"u"&&typeof document<"u",qn={tested:!1,writable:!1},$g=()=>{if(!_t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qn.tested)return qn.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),qn.tested=!0,qn.writable=!0}catch{qn.tested=!0,qn.writable=!1}return qn.writable};function xv(s){const a={},i=new URL(s);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((u,h)=>{a[h]=u})}catch{}return i.searchParams.forEach((o,u)=>{a[u]=o}),a}const Hg=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),vv=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Ws=async(s,a,i)=>{await s.setItem(a,JSON.stringify(i))},Pn=async(s,a)=>{const i=await s.getItem(a);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Nt=async(s,a)=>{await s.removeItem(a)};class Xl{constructor(){this.promise=new Xl.promiseConstructor((a,i)=>{this.resolve=a,this.reject=i})}}Xl.promiseConstructor=Promise;function Du(s){const a=s.split(".");if(a.length!==3)throw new Xu("Invalid JWT structure");for(let o=0;o<a.length;o++)if(!rv.test(a[o]))throw new Xu("JWT not in base64url format");return{header:JSON.parse(Pp(a[0])),payload:JSON.parse(Pp(a[1])),signature:Zs(a[2]),raw:{header:a[0],payload:a[1]}}}async function wv(s){return await new Promise(a=>{setTimeout(()=>a(null),s)})}function jv(s,a){return new Promise((o,u)=>{(async()=>{for(let h=0;h<1/0;h++)try{const f=await s(h);if(!a(h,null,f)){o(f);return}}catch(f){if(!a(h,f)){u(f);return}}})()})}function Sv(s){return("0"+s.toString(16)).substr(-2)}function Nv(){const a=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let u="";for(let h=0;h<56;h++)u+=i.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(a),Array.from(a,Sv).join("")}async function _v(s){const i=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",i),u=new Uint8Array(o);return Array.from(u).map(h=>String.fromCharCode(h)).join("")}async function kv(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const i=await _v(s);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gs(s,a,i=!1){const o=Nv();let u=o;i&&(u+="/PASSWORD_RECOVERY"),await Ws(s,`${a}-code-verifier`,u);const h=await kv(o);return[h,o===h?"plain":"s256"]}const Tv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ev(s){const a=s.headers.get(Qu);if(!a||!a.match(Tv))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function Rv(s){if(!s)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(s<=a)throw new Error("JWT has expired")}function Cv(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Av=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qs(s){if(!Av.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Mu(){const s={};return new Proxy(s,{get:(a,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ov(s,a){return new Proxy(s,{get:(i,o,u)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const h=o.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,o,u)}return!a.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(i,o,u)}})}function Ip(s){return JSON.parse(JSON.stringify(s))}const Kn=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Dv=[502,503,504];async function Vp(s){var a;if(!vv(s))throw new Zu(Kn(s),0);if(Dv.includes(s.status))throw new Zu(Kn(s),s.status);let i;try{i=await s.json()}catch(h){throw new Jn(Kn(h),h)}let o;const u=Ev(s);if(u&&u.getTime()>=Bg["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new Hp(Kn(i),s.status,((a=i.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(o==="session_not_found")throw new Yt}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((h,f)=>h&&typeof f=="string",!0))throw new Hp(Kn(i),s.status,i.weak_password.reasons);throw new lv(Kn(i),s.status||500,o)}const Mv=(s,a,i,o)=>{const u={method:s,headers:a?.headers||{}};return s==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),i))};async function ye(s,a,i,o){var u;const h=Object.assign({},o?.headers);h[Qu]||(h[Qu]=Bg["2024-01-01"].name),o?.jwt&&(h.Authorization=`Bearer ${o.jwt}`);const f=(u=o?.query)!==null&&u!==void 0?u:{};o?.redirectTo&&(f.redirect_to=o.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",m=await Uv(s,a,i+p,{headers:h,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(m):{data:Object.assign({},m),error:null}}async function Uv(s,a,i,o,u,h){const f=Mv(a,o,u,h);let p;try{p=await s(i,Object.assign({},f))}catch(m){throw console.error(m),new Zu(Kn(m),0)}if(p.ok||await Vp(p),o?.noResolveJson)return p;try{return await p.json()}catch(m){await Vp(m)}}function fa(s){var a;let i=null;zv(s)&&(i=Object.assign({},s),s.expires_at||(i.expires_at=yv(s.expires_in)));const o=(a=s.user)!==null&&a!==void 0?a:s;return{data:{session:i,user:o},error:null}}function Kp(s){const a=fa(s);return!a.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(a.data.weak_password=s.weak_password),a}function vn(s){var a;return{data:{user:(a=s.user)!==null&&a!==void 0?a:s},error:null}}function Lv(s){return{data:s,error:null}}function Bv(s){const{action_link:a,email_otp:i,hashed_token:o,redirect_to:u,verification_type:h}=s,f=Ql(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:a,email_otp:i,hashed_token:o,redirect_to:u,verification_type:h},m=Object.assign({},f);return{data:{properties:p,user:m},error:null}}function Yp(s){return s}function zv(s){return s.access_token&&s.refresh_token&&s.expires_in}const Uu=["global","local","others"];class $v{constructor({url:a="",headers:i={},fetch:o}){this.url=a,this.headers=i,this.fetch=Hg(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,i=Uu[0]){if(Uu.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Uu.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(o){if(ue(o))return{data:null,error:o};throw o}}async inviteUserByEmail(a,i={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:vn})}catch(o){if(ue(o))return{data:{user:null},error:o};throw o}}async generateLink(a){try{const{options:i}=a,o=Ql(a,["options"]),u=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(u.new_email=o?.newEmail,delete u.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Bv,redirectTo:i?.redirectTo})}catch(i){if(ue(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(a){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:vn})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async listUsers(a){var i,o,u,h,f,p,m;try{const g={nextPage:null,lastPage:0,total:0},x=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=a?.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(h=(u=a?.perPage)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""},xform:Yp});if(x.error)throw x.error;const j=await x.json(),v=(f=x.headers.get("x-total-count"))!==null&&f!==void 0?f:0,w=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);g[`${E}Page`]=S}),g.total=parseInt(v)),{data:Object.assign(Object.assign({},j),g),error:null}}catch(g){if(ue(g))return{data:{users:[]},error:g};throw g}}async getUserById(a){qs(a);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:vn})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async updateUserById(a,i){qs(a);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:i,headers:this.headers,xform:vn})}catch(o){if(ue(o))return{data:{user:null},error:o};throw o}}async deleteUser(a,i=!1){qs(a);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:i},xform:vn})}catch(o){if(ue(o))return{data:{user:null},error:o};throw o}}async _listFactors(a){qs(a.userId);try{const{data:i,error:o}=await ye(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:i,error:o}}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _deleteFactor(a){qs(a.userId),qs(a.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _listOAuthClients(a){var i,o,u,h,f,p,m;try{const g={nextPage:null,lastPage:0,total:0},x=await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=a?.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(h=(u=a?.perPage)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""},xform:Yp});if(x.error)throw x.error;const j=await x.json(),v=(f=x.headers.get("x-total-count"))!==null&&f!==void 0?f:0,w=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);g[`${E}Page`]=S}),g.total=parseInt(v)),{data:Object.assign(Object.assign({},j),g),error:null}}catch(g){if(ue(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(a){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _getOAuthClient(a){try{return await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _updateOAuthClient(a,i){try{return await ye(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ue(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(a){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(a){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ue(i))return{data:null,error:i};throw i}}}function Jp(s={}){return{getItem:a=>s[a]||null,setItem:(a,i)=>{s[a]=i},removeItem:a=>{delete s[a]}}}const Ps={debug:!!(globalThis&&$g()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Gg extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class Hv extends Gg{}async function Gv(s,a,i){Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,a);const o=new globalThis.AbortController;return a>0&&setTimeout(()=>{o.abort(),Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,u.name);try{return await i()}finally{Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,u.name)}}else{if(a===0)throw Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Hv(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Ps.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function qv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function qg(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function Pv(s){return parseInt(s,16)}function Iv(s){const a=new TextEncoder().encode(s);return"0x"+Array.from(a,o=>o.toString(16).padStart(2,"0")).join("")}function Vv(s){var a;const{chainId:i,domain:o,expirationTime:u,issuedAt:h=new Date,nonce:f,notBefore:p,requestId:m,resources:g,scheme:x,uri:j,version:v}=s;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!j)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((a=s.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const w=qg(s.address),_=x?`${x}://${o}`:o,S=s.statement?`${s.statement}
`:"",E=`${_} wants you to sign in with your Ethereum account:
${w}

${S}`;let q=`URI: ${j}
Version: ${v}
Chain ID: ${i}${f?`
Nonce: ${f}`:""}
Issued At: ${h.toISOString()}`;if(u&&(q+=`
Expiration Time: ${u.toISOString()}`),p&&(q+=`
Not Before: ${p.toISOString()}`),m&&(q+=`
Request ID: ${m}`),g){let U=`
Resources:`;for(const A of g){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);U+=`
- ${A}`}q+=U}return`${E}
${q}`}class ut extends Error{constructor({message:a,code:i,cause:o,name:u}){var h;super(a,{cause:o}),this.__isWebAuthnError=!0,this.name=(h=u??(o instanceof Error?o.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=i}}class Vl extends ut{constructor(a,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:a}),this.name="WebAuthnUnknownError",this.originalError=i}}function Kv({error:s,options:a}){var i,o,u;const{publicKey:h}=a;if(!h)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new ut({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((i=h.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new ut({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(a.mediation==="conditional"&&((o=h.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ut({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((u=h.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new ut({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new ut({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new ut({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return h.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new ut({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new ut({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(Pg(f)){if(h.rp.id!==f)return new ut({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new ut({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function Yv({error:s,options:a}){const{publicKey:i}=a;if(!i)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new ut({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new ut({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const o=window.location.hostname;if(Pg(o)){if(i.rpId!==o)return new ut({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class Jv{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const Wv=new Jv;function Qv(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:a,user:i,excludeCredentials:o}=s,u=Ql(s,["challenge","user","excludeCredentials"]),h=Zs(a).buffer,f=Object.assign(Object.assign({},i),{id:Zs(i.id).buffer}),p=Object.assign(Object.assign({},u),{challenge:h,user:f});if(o&&o.length>0){p.excludeCredentials=new Array(o.length);for(let m=0;m<o.length;m++){const g=o[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:Zs(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function Zv(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:a,allowCredentials:i}=s,o=Ql(s,["challenge","allowCredentials"]),u=Zs(a).buffer,h=Object.assign(Object.assign({},o),{challenge:u});if(i&&i.length>0){h.allowCredentials=new Array(i.length);for(let f=0;f<i.length;f++){const p=i[f];h.allowCredentials[f]=Object.assign(Object.assign({},p),{id:Zs(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function Xv(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const i=s;return{id:s.id,rawId:s.id,response:{attestationObject:Zn(new Uint8Array(s.response.attestationObject)),clientDataJSON:Zn(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(a=i.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Fv(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const i=s,o=s.getClientExtensionResults(),u=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Zn(new Uint8Array(u.authenticatorData)),clientDataJSON:Zn(new Uint8Array(u.clientDataJSON)),signature:Zn(new Uint8Array(u.signature)),userHandle:u.userHandle?Zn(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(a=i.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Pg(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Wp(){var s,a;return!!(_t()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.get)=="function")}async function ew(s){try{const a=await navigator.credentials.create(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Vl("Browser returned unexpected credential type",a)}:{data:null,error:new Vl("Empty credential response",a)}}catch(a){return{data:null,error:Kv({error:a,options:s})}}}async function tw(s){try{const a=await navigator.credentials.get(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Vl("Browser returned unexpected credential type",a)}:{data:null,error:new Vl("Empty credential response",a)}}catch(a){return{data:null,error:Yv({error:a,options:s})}}}const aw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},nw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Kl(...s){const a=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),i=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),o={};for(const u of s)if(u)for(const h in u){const f=u[h];if(f!==void 0)if(Array.isArray(f))o[h]=f;else if(i(f))o[h]=f;else if(a(f)){const p=o[h];a(p)?o[h]=Kl(p,f):o[h]=Kl(f)}else o[h]=f}return o}function sw(s,a){return Kl(aw,s,a||{})}function rw(s,a){return Kl(nw,s,a||{})}class iw{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:i,friendlyName:o,signal:u},h){try{const{data:f,error:p}=await this.client.mfa.challenge({factorId:a,webauthn:i});if(!f)return{data:null,error:p};const m=u??Wv.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:g}=f.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${o}`),g.displayName||(g.displayName=g.name)}switch(f.webauthn.type){case"create":{const g=sw(f.webauthn.credential_options.publicKey,h?.create),{data:x,error:j}=await ew({publicKey:g,signal:m});return x?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:x}},error:null}:{data:null,error:j}}case"request":{const g=rw(f.webauthn.credential_options.publicKey,h?.request),{data:x,error:j}=await tw(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:g,signal:m}));return x?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:x}},error:null}:{data:null,error:j}}}}catch(f){return ue(f)?{data:null,error:f}:{data:null,error:new Jn("Unexpected error in challenge",f)}}}async _verify({challengeId:a,factorId:i,webauthn:o}){return this.client.mfa.verify({factorId:i,challengeId:a,webauthn:o})}async _authenticate({factorId:a,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},h){if(!i)return{data:null,error:new ci("rpId is required for WebAuthn authentication")};try{if(!Wp())return{data:null,error:new Jn("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this.challenge({factorId:a,webauthn:{rpId:i,rpOrigins:o},signal:u},{request:h});if(!f)return{data:null,error:p};const{webauthn:m}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:m.type,rpId:i,rpOrigins:o,credential_response:m.credential_response}})}catch(f){return ue(f)?{data:null,error:f}:{data:null,error:new Jn("Unexpected error in authenticate",f)}}}async _register({friendlyName:a,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},h){if(!i)return{data:null,error:new ci("rpId is required for WebAuthn registration")};try{if(!Wp())return{data:null,error:new Jn("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(x=>{var j;return(j=x.data)===null||j===void 0?void 0:j.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===a&&v.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:i,rpOrigins:o},signal:u},{create:h});return m?this._verify({factorId:f.id,challengeId:m.challengeId,webauthn:{rpId:i,rpOrigins:o,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(f){return ue(f)?{data:null,error:f}:{data:null,error:new Jn("Unexpected error in register",f)}}}}qv();const lw={url:av,storageKey:nv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Qp(s,a,i){return await i()}const Is={};class ui{get jwks(){var a,i;return(i=(a=Is[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(a){Is[this.storageKey]=Object.assign(Object.assign({},Is[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,i;return(i=(a=Is[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){Is[this.storageKey]=Object.assign(Object.assign({},Is[this.storageKey]),{cachedAt:a})}constructor(a){var i,o,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},lw),a);if(this.storageKey=h.storageKey,this.instanceID=(i=ui.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,ui.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&_t()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new $v({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=Hg(h.fetch),this.lock=h.lock||Qp,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,h.lock?this.lock=h.lock:this.persistSession&&_t()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=Gv:this.lock=Qp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new iw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:$g()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jp(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=Jp(this.memoryStorage)),_t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Lg}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let i={},o="none";if(_t()&&(i=xv(window.location.href),this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce")),_t()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:h}=await this._getSessionFromURL(i,o);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),uv(h)){const m=(a=h.details)===null||a===void 0?void 0:a.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:h}}return await this._removeSession(),{error:h}}const{session:f,redirectType:p}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return ue(i)?this._returnResult({error:i}):this._returnResult({error:new Jn("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var i,o,u;try{const h=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=a?.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=a?.options)===null||u===void 0?void 0:u.captchaToken}},xform:fa}),{data:f,error:p}=h;if(p||!f)return this._returnResult({data:{user:null,session:null},error:p});const m=f.session,g=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(h){if(ue(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(a){var i,o,u;try{let h;if("email"in a){const{email:x,password:j,options:v}=a;let w=null,_=null;this.flowType==="pkce"&&([w,_]=await Gs(this.storage,this.storageKey)),h=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:x,password:j,data:(i=v?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:w,code_challenge_method:_},xform:fa})}else if("phone"in a){const{phone:x,password:j,options:v}=a;h=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:j,data:(o=v?.data)!==null&&o!==void 0?o:{},channel:(u=v?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:fa})}else throw new Ll("You must provide either an email or phone number and a password");const{data:f,error:p}=h;if(p||!f)return await Nt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const m=f.session,g=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(h){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ue(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(a){try{let i;if("email"in a){const{email:h,password:f,options:p}=a;i=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Kp})}else if("phone"in a){const{phone:h,password:f,options:p}=a;i=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Kp})}else throw new Ll("You must provide either an email or phone number and a password");const{data:o,error:u}=i;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o||!o.session||!o.user){const h=new Hs;return this._returnResult({data:{user:null,session:null},error:h})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(a){var i,o,u,h;return await this._handleProviderSignIn(a.provider,{redirectTo:(i=a.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=a.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=a.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(h=a.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:i}=a;switch(i){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(a){var i,o,u,h,f,p,m,g,x,j,v;let w,_;if("message"in a)w=a.message,_=a.signature;else{const{chain:S,wallet:E,statement:q,options:U}=a;let A;if(_t())if(typeof E=="object")A=E;else{const xe=window;if("ethereum"in xe&&typeof xe.ethereum=="object"&&"request"in xe.ethereum&&typeof xe.ethereum.request=="function")A=xe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=E}const I=new URL((i=U?.url)!==null&&i!==void 0?i:window.location.href),L=await A.request({method:"eth_requestAccounts"}).then(xe=>xe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=qg(L[0]);let Z=(o=U?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!Z){const xe=await A.request({method:"eth_chainId"});Z=Pv(xe)}const X={domain:I.host,address:G,statement:q,uri:I.href,version:"1",chainId:Z,nonce:(u=U?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(h=U?.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(p=U?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=U?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=U?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(x=U?.signInWithEthereum)===null||x===void 0?void 0:x.resources};w=Vv(X),_=await A.request({method:"personal_sign",params:[Iv(w),G]})}try{const{data:S,error:E}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:_},!((j=a.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(v=a.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:fa});if(E)throw E;if(!S||!S.session||!S.user){const q=new Hs;return this._returnResult({data:{user:null,session:null},error:q})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:E})}catch(S){if(ue(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(a){var i,o,u,h,f,p,m,g,x,j,v,w;let _,S;if("message"in a)_=a.message,S=a.signature;else{const{chain:E,wallet:q,statement:U,options:A}=a;let I;if(_t())if(typeof q=="object")I=q;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))I=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=q}const L=new URL((i=A?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in I&&I.signIn){const G=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),U?{statement:U}:null));let Z;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")Z=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)Z=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Z&&"signature"in Z&&(typeof Z.signedMessage=="string"||Z.signedMessage instanceof Uint8Array)&&Z.signature instanceof Uint8Array)_=typeof Z.signedMessage=="string"?Z.signedMessage:new TextDecoder().decode(Z.signedMessage),S=Z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${L.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(u=(o=A?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((h=A?.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((f=A?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((p=A?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((m=A?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((g=A?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((j=(x=A?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||j===void 0)&&j.length?["Resources",...A.signInWithSolana.resources.map(Z=>`- ${Z}`)]:[]].join(`
`);const G=await I.signMessage(new TextEncoder().encode(_),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=G}}try{const{data:E,error:q}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Zn(S)},!((v=a.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=a.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:fa});if(q)throw q;if(!E||!E.session||!E.user){const U=new Hs;return this._returnResult({data:{user:null,session:null},error:U})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:q})}catch(E){if(ue(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(a){const i=await Pn(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(i??"").split("/");try{if(!o&&this.flowType==="pkce")throw new dv;const{data:h,error:f}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:o},xform:fa});if(await Nt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!h||!h.session||!h.user){const p=new Hs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:u??null}),error:f})}catch(h){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ue(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(a){try{const{options:i,provider:o,token:u,access_token:h,nonce:f}=a,p=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:h,nonce:f,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:fa}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const x=new Hs;return this._returnResult({data:{user:null,session:null},error:x})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(a){var i,o,u,h,f;try{if("email"in a){const{email:p,options:m}=a;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await Gs(this.storage,this.storageKey));const{error:j}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(i=m?.data)!==null&&i!==void 0?i:{},create_user:(o=m?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:x},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:j})}if("phone"in a){const{phone:p,options:m}=a,{data:g,error:x}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(u=m?.data)!==null&&u!==void 0?u:{},create_user:(h=m?.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(f=m?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:x})}throw new Ll("You must provide either an email or phone number.")}catch(p){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ue(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(a){var i,o;try{let u,h;"options"in a&&(u=(i=a.options)===null||i===void 0?void 0:i.redirectTo,h=(o=a.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:p}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:h}}),redirectTo:u,xform:fa});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const m=f.session,g=f.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(ue(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(a){var i,o,u,h,f;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Gs(this.storage,this.storageKey));const g=await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(o=(i=a.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=a?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:Lv});return!((h=g.data)===null||h===void 0)&&h.url&&_t()&&!(!((f=a.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ue(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:i},error:o}=a;if(o)throw o;if(!i)throw new Yt;const{error:u}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(a){if(ue(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const i=`${this.url}/resend`;if("email"in a){const{email:o,type:u,options:h}=a,{error:f}=await ye(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in a){const{phone:o,type:u,options:h}=a,{data:f,error:p}=await ye(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:h?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:p})}throw new Ll("You must provide either an email or phone number and a type")}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(a,i){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await a(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const i=await Pn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?a=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const o=a.expires_at?a.expires_at*1e3-Date.now()<Au:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",a.expires_at),!o){if(this.userStorage){const f=await Pn(this.userStorage,this.storageKey+"-user");f?.user?a.user=f.user:a.user=Mu()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};a.user=Ov(a.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:u,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;const i=await this._acquireLock(-1,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(a){try{return a?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:vn}):await this._useSession(async i=>{var o,u,h;const{data:f,error:p}=i;if(p)throw p;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yt}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0,xform:vn})})}catch(i){if(ue(i))return cv(i)&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(a,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,i))}async _updateUser(a,i={}){try{return await this._useSession(async o=>{const{data:u,error:h}=o;if(h)throw h;if(!u.session)throw new Yt;const f=u.session;let p=null,m=null;this.flowType==="pkce"&&a.email!=null&&([p,m]=await Gs(this.storage,this.storageKey));const{data:g,error:x}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:p,code_challenge_method:m}),jwt:f.access_token,xform:vn});if(x)throw x;return f.user=g.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ue(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new Yt;const i=Date.now()/1e3;let o=i,u=!0,h=null;const{payload:f}=Du(a.access_token);if(f.exp&&(o=f.exp,u=o<=i),u){const{data:p,error:m}=await this._callRefreshToken(a.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};h=p}else{const{data:p,error:m}=await this._getUser(a.access_token);if(m)throw m;h={access_token:a.access_token,refresh_token:a.refresh_token,user:p.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(i){if(ue(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async i=>{var o;if(!a){const{data:f,error:p}=i;if(p)throw p;a=(o=f.session)!==null&&o!==void 0?o:void 0}if(!a?.refresh_token)throw new Yt;const{data:u,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(a,i){try{if(!_t())throw new Bl("No browser detected.");if(a.error||a.error_description||a.error_code)throw new Bl(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new $p("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bl("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new $p("No code detected.");const{data:U,error:A}=await this._exchangeCodeForSession(a.code);if(A)throw A;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:h,refresh_token:f,expires_in:p,expires_at:m,token_type:g}=a;if(!h||!p||!f||!g)throw new Bl("No session defined in URL");const x=Math.round(Date.now()/1e3),j=parseInt(p);let v=x+j;m&&(v=parseInt(m));const w=v-x;w*1e3<=Js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${j}s`);const _=v-j;x-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,x):x-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,x);const{data:S,error:E}=await this._getUser(h);if(E)throw E;const q={provider_token:o,provider_refresh_token:u,access_token:h,expires_in:j,expires_at:v,refresh_token:f,token_type:g,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:q,redirectType:a.type},error:null})}catch(o){if(ue(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(a){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),a):!!(a.access_token||a.error_description)}async _isPKCECallback(a){const i=await Pn(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&i)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:u,error:h}=i;if(h)return this._returnResult({error:h});const f=(o=u.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:p}=await this.admin.signOut(f,a);if(p&&!(ov(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return a!=="others"&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const i=bv(),o={id:i,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(a){return await this._useSession(async i=>{var o,u;try{const{data:{session:h},error:f}=i;if(f)throw f;await((o=this.stateChangeEmitters.get(a))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",a,"session",h)}catch(h){await((u=this.stateChangeEmitters.get(a))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",h),console.error(h)}})}async resetPasswordForEmail(a,i={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await Gs(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(h){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ue(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var a;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(a=i.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var i;try{const{data:o,error:u}=await this._useSession(async h=>{var f,p,m,g,x;const{data:j,error:v}=h;if(v)throw v;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=a.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=a.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",w,{headers:this.headers,jwt:(x=(g=j.session)===null||g===void 0?void 0:g.access_token)!==null&&x!==void 0?x:void 0})});if(u)throw u;return _t()&&!(!((i=a.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:a.provider,url:o?.url},error:null})}catch(o){if(ue(o))return this._returnResult({data:{provider:a.provider,url:null},error:o});throw o}}async linkIdentityIdToken(a){return await this._useSession(async i=>{var o;try{const{error:u,data:{session:h}}=i;if(u)throw u;const{options:f,provider:p,token:m,access_token:g,nonce:x}=a,j=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=h?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:p,id_token:m,access_token:g,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:fa}),{data:v,error:w}=j;return w?this._returnResult({data:{user:null,session:null},error:w}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Hs}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:w}))}catch(u){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ue(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(a){try{return await this._useSession(async i=>{var o,u;const{data:h,error:f}=i;if(f)throw f;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(a){const i=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await jv(async u=>(u>0&&await wv(200*Math.pow(2,u-1)),this._debug(i,"refreshing attempt",u),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:fa})),(u,h)=>{const f=200*Math.pow(2,u);return h&&Ou(h)&&Date.now()+f-o<Js})}catch(o){if(this._debug(i,"error",o),ue(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(i,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",i,"url",o),_t()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:a,url:o},error:null}}async _recoverAndRefresh(){var a,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const u=await Pn(this.storage,this.storageKey);if(u&&this.userStorage){let f=await Pn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await Ws(this.userStorage,this.storageKey+"-user",f)),u.user=(a=f?.user)!==null&&a!==void 0?a:Mu()}else if(u&&!u.user&&!u.user){const f=await Pn(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await Nt(this.storage,this.storageKey+"-user"),await Ws(this.storage,this.storageKey,u)):u.user=Mu()}if(this._debug(o,"session from storage",u),!this._isValidSession(u)){this._debug(o,"session is not valid"),u!==null&&await this._removeSession();return}const h=((i=u.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Au;if(this._debug(o,`session has${h?"":" not"} expired with margin of ${Au}s`),h){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),Ou(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(u.access_token);!p&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(o,"error",u),console.error(u);return}finally{this._debug(o,"end")}}async _callRefreshToken(a){var i,o;if(!a)throw new Yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Xl;const{data:h,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!h.session)throw new Yt;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const p={data:h.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(h){if(this._debug(u,"error",h),ue(h)){const f={data:null,error:h};return Ou(h)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(h),h}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(a,i,o=!0){const u=`#_notifyAllSubscribers(${a})`;this._debug(u,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:a,session:i});const h=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(a,i)}catch(m){h.push(m)}});if(await Promise.all(f),h.length>0){for(let p=0;p<h.length;p+=1)console.error(h[p]);throw h[0]}}finally{this._debug(u,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await Nt(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},a),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await Ws(this.userStorage,this.storageKey+"-user",{user:i.user});const u=Object.assign({},i);delete u.user;const h=Ip(u);await Ws(this.storage,this.storageKey,h)}else{const u=Ip(i);await Ws(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Nt(this.storage,this.storageKey),await Nt(this.storage,this.storageKey+"-code-verifier"),await Nt(this.storage,this.storageKey+"-user"),this.userStorage&&await Nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&_t()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),Js);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-a)/Js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Js}ms, refresh threshold is ${Wu} ticks`),u<=Wu&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof Gg)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_t()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const i=`#_onVisibilityChanged(${a})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,i,o){const u=[`provider=${encodeURIComponent(i)}`];if(o?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[h,f]=await Gs(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(p.toString())}if(o?.queryParams){const h=new URLSearchParams(o.queryParams);u.push(h.toString())}return o?.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${a}?${u.join("&")}`}async _unenroll(a){try{return await this._useSession(async i=>{var o;const{data:u,error:h}=i;return h?this._returnResult({data:null,error:h}):await ye(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(a){try{return await this._useSession(async i=>{var o,u;const{data:h,error:f}=i;if(f)return this._returnResult({data:null,error:f});const p=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:m,error:g}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=h?.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(a.factorType==="totp"&&m.type==="totp"&&(!((u=m?.totp)===null||u===void 0)&&u.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:u,error:h}=i;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?Xv(a.webauthn.credential_response):Fv(a.webauthn.credential_response)})}:{code:a.code}),{data:p,error:m}=await ye(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:u,error:h}=i;if(h)return this._returnResult({data:null,error:h});const f=await ye(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:p}=f;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Qv(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Zv(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(a){const{data:i,error:o}=await this._challenge({factorId:a.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:a.factorId,challengeId:i.id,code:a.code})}async _listFactors(){var a;const{data:{user:i},error:o}=await this.getUser();if(o)return{data:null,error:o};const u={all:[],phone:[],totp:[],webauthn:[]};for(const h of(a=i?.factors)!==null&&a!==void 0?a:[])u.all.push(h),h.status==="verified"&&u[h.factor_type].push(h);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var a,i;const{data:{session:o},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Du(o.access_token);let f=null;h.aal&&(f=h.aal);let p=f;((i=(a=o.user.factors)===null||a===void 0?void 0:a.filter(x=>x.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const g=h.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async i=>{const{data:{session:o},error:u}=i;return u?this._returnResult({data:null,error:u}):o?await ye(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:o.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new Yt})})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(a,i){try{return await this._useSession(async o=>{const{data:{session:u},error:h}=o;if(h)return this._returnResult({data:null,error:h});if(!u)return this._returnResult({data:null,error:new Yt});const f=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&_t()&&!i?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(ue(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(a,i){try{return await this._useSession(async o=>{const{data:{session:u},error:h}=o;if(h)return this._returnResult({data:null,error:h});if(!u)return this._returnResult({data:null,error:new Yt});const f=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&_t()&&!i?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(ue(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async a=>{const{data:{session:i},error:o}=a;return o?this._returnResult({data:null,error:o}):i?await ye(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Yt})})}catch(a){if(ue(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async i=>{const{data:{session:o},error:u}=i;return u?this._returnResult({data:null,error:u}):o?(await ye(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Yt})})}catch(i){if(ue(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(a,i={keys:[]}){let o=i.keys.find(p=>p.kid===a);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(p=>p.kid===a),o&&this.jwks_cached_at+iv>u)return o;const{data:h,error:f}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=u,o=h.keys.find(p=>p.kid===a),!o)?null:o}async getClaims(a,i={}){try{let o=a;if(!o){const{data:w,error:_}=await this.getSession();if(_||!w.session)return this._returnResult({data:null,error:_});o=w.session.access_token}const{header:u,payload:h,signature:f,raw:{header:p,payload:m}}=Du(o);i?.allowExpired||Rv(h.exp);const g=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!g){const{error:w}=await this.getUser(o);if(w)throw w;return{data:{claims:h,header:u,signature:f},error:null}}const x=Cv(u.alg),j=await crypto.subtle.importKey("jwk",g,x,!0,["verify"]);if(!await crypto.subtle.verify(x,j,f,gv(`${p}.${m}`)))throw new Xu("Invalid JWT signature");return{data:{claims:h,header:u,signature:f},error:null}}catch(o){if(ue(o))return this._returnResult({data:null,error:o});throw o}}}ui.nextInstanceID={};const ow=ui,cw="2.89.0";let ti="";typeof Deno<"u"?ti="deno":typeof document<"u"?ti="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ti="react-native":ti="node";const uw={"X-Client-Info":`supabase-js-${ti}/${cw}`},dw={headers:uw},hw={schema:"public"},fw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mw={};function di(s){"@babel/helpers - typeof";return di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},di(s)}function pw(s,a){if(di(s)!="object"||!s)return s;var i=s[Symbol.toPrimitive];if(i!==void 0){var o=i.call(s,a);if(di(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function gw(s){var a=pw(s,"string");return di(a)=="symbol"?a:a+""}function yw(s,a,i){return(a=gw(a))in s?Object.defineProperty(s,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[a]=i,s}function Zp(s,a){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);a&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),i.push.apply(i,o)}return i}function tt(s){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?Zp(Object(i),!0).forEach(function(o){yw(s,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):Zp(Object(i)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(i,o))})}return s}const bw=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),xw=()=>Headers,vw=(s,a,i)=>{const o=bw(i),u=xw();return async(h,f)=>{var p;const m=(p=await a())!==null&&p!==void 0?p:s;let g=new u(f?.headers);return g.has("apikey")||g.set("apikey",s),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),o(h,tt(tt({},f),{},{headers:g}))}};function ww(s){return s.endsWith("/")?s:s+"/"}function jw(s,a){var i,o;const{db:u,auth:h,realtime:f,global:p}=s,{db:m,auth:g,realtime:x,global:j}=a,v={db:tt(tt({},m),u),auth:tt(tt({},g),h),realtime:tt(tt({},x),f),storage:{},global:tt(tt(tt({},j),p),{},{headers:tt(tt({},(i=j?.headers)!==null&&i!==void 0?i:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return s.accessToken?v.accessToken=s.accessToken:delete v.accessToken,v}function Sw(s){const a=s?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ww(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Nw=class extends ow{constructor(s){super(s)}},_w=class{constructor(s,a,i){var o,u;this.supabaseUrl=s,this.supabaseKey=a;const h=Sw(s);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,p={db:hw,realtime:mw,auth:tt(tt({},fw),{},{storageKey:f}),global:dw},m=jw(i??{},p);if(this.storageKey=(o=m.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=m.global.headers)!==null&&u!==void 0?u:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(x,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=m.auth)!==null&&g!==void 0?g:{},this.headers,m.global.fetch)}this.fetch=vw(a,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(tt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new s0(new URL("rest/v1",h).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new tv(this.storageUrl.href,this.headers,this.fetch,i?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Fx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,a={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,a,i)}channel(s,a={config:{}}){return this.realtime.channel(s,a)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,a,i;if(s.accessToken)return await s.accessToken();const{data:o}=await s.auth.getSession();return(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:a,detectSessionInUrl:i,storage:o,userStorage:u,storageKey:h,flowType:f,lock:p,debug:m,throwOnError:g},x,j){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Nw({url:this.authUrl.href,headers:tt(tt({},v),x),storageKey:h,autoRefreshToken:s,persistSession:a,detectSessionInUrl:i,storage:o,userStorage:u,flowType:f,lock:p,debug:m,throwOnError:g,fetch:j,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new w0(this.realtimeUrl.href,tt(tt({},s),{},{params:tt(tt({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a?.access_token)})}_handleTokenChanged(s,a,i){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const kw=(s,a,i)=>new _w(s,a,i);function Tw(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const a=s.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}Tw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ew="https://dceicfrztvmmuuyjzaeb.supabase.co",Rw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjZWljZnJ6dHZtbXV1eWp6YWViIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY4ODYxMDEsImV4cCI6MjA4MjQ2MjEwMX0.mjIPrvFKNDht83bnsfVwiRiiqvkwuHLL1nNXdXDpGoE",Ke=kw(Ew,Rw),Ig=O.createContext();function Fl(){const s=O.useContext(Ig);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s}function Cw({children:s}){const[a,i]=O.useState(null),[o,u]=O.useState(null),[h,f]=O.useState(!0),[p,m]=O.useState(!1),[g,x]=O.useState(!1),j=async _=>{if(!_){m(!1),x(!1);return}try{x(!0);const S=new Promise((A,I)=>setTimeout(()=>I(new Error("Timeout")),5e3)),E=Ke.from("admin_profiles").select("approved").eq("user_id",_).maybeSingle(),{data:q,error:U}=await Promise.race([E,S]);if(U){console.error("Error checking approval:",U),m(!1);return}console.log("Approval check result:",q),m(q?.approved||!1)}catch(S){console.error("Error checking approval:",S),m(!1)}finally{x(!1)}};O.useEffect(()=>{Ke.auth.getSession().then(({data:{session:S}})=>{i(S),u(S?.user??null),S?.user&&j(S.user.id),f(!1)});const{data:{subscription:_}}=Ke.auth.onAuthStateChange((S,E)=>{i(E),u(E?.user??null),E?.user?j(E.user.id):m(!1),f(!1)});return()=>_.unsubscribe()},[]);const w={session:a,user:o,loading:h,approved:p,checkingApproval:g,signOut:async()=>{const{error:_}=await Ke.auth.signOut();_&&console.error("Error signing out:",_)},checkApprovalStatus:j};return r.jsx(Ig.Provider,{value:w,children:s})}const Vg=O.createContext();function ar(){const s=O.useContext(Vg);if(!s)throw new Error("useCharacter must be used within a CharacterProvider");return s}function Aw({children:s,userId:a,roomCode:i}){const[o,u]=O.useState(null),[h,f]=O.useState(!0),[p,m]=O.useState(null),g=S=>S?{...S,classFeatures:S.class_features,className:S.class_name,destinyPoints:S.destiny_points,hpCurrent:S.hp_current,hpMax:S.hp_max,userId:S.user_id,roomCode:S.room_code}:null;O.useEffect(()=>{if(!a||!i)return;async function S(){try{const{data:E,error:q}=await Ke.from("characters").select("*").eq("user_id",a).eq("room_code",i).maybeSingle();if(q)throw q;u(g(E))}catch(E){console.error("Error loading character:",E),m(E.message)}finally{f(!1)}}S()},[a,i]),O.useEffect(()=>{if(!o?.id)return;const S=Ke.channel(`character:${o.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"characters",filter:`id=eq.${o.id}`},E=>{console.log("Character updated:",E.new),u(g(E.new))}).subscribe();return()=>{Ke.removeChannel(S)}},[o?.id]);const x=O.useCallback(async S=>{if(!a||!i)throw new Error("Missing userId or roomCode");try{f(!0);const{data:E,error:q}=await Ke.from("rooms").select("code").eq("code",i).maybeSingle();if(!E&&!q){const{error:G}=await Ke.from("rooms").insert({code:i,gm_id:a});if(G&&G.code!=="23505")throw G}const U={user_id:a,room_code:i,name:S.name||"Unnamed Rebel",class:S.class,species:S.species,stats:S.stats,hp_current:S.hp_current,hp_max:S.hp_max,equipment:S.equipment||[],bits:S.bits||0,destiny_points:S.destinyPoints||0,class_features:S.classFeatures||null,class_name:S.className||S.class},{data:A,error:I}=await Ke.from("characters").insert(U).select().single();if(I)throw I;const L=g(A);return u(L),L}catch(E){throw console.error("Error saving character:",E),m(E.message),E}finally{f(!1)}},[a,i]),j=O.useCallback(async S=>{if(!o?.id)throw new Error("No character to update");try{const{data:E,error:q}=await Ke.from("characters").update(S).eq("id",o.id).select().single();if(q)throw q;const U=g(E);return u(U),U}catch(E){throw console.error("Error updating character:",E),m(E.message),E}},[o?.id]),v=O.useCallback(async(S,E)=>j({[S]:E}),[j]),w=O.useCallback(async()=>{if(!o?.id)throw new Error("No character to delete");try{const{error:S}=await Ke.from("characters").delete().eq("id",o.id);if(S)throw S;u(null)}catch(S){throw console.error("Error deleting character:",S),m(S.message),S}},[o?.id]),_={character:o,loading:h,error:p,saveCharacter:x,updateCharacter:j,updateField:v,deleteCharacter:w};return r.jsx(Vg.Provider,{value:_,children:s})}const Kg=O.createContext();function pi(){const s=O.useContext(Kg);if(!s)throw new Error("useParty must be used within a PartyProvider");return s}function Ow({children:s,roomCode:a}){const[i,o]=O.useState([]),[u,h]=O.useState(!0),[f,p]=O.useState(null),m=j=>j?{...j,classFeatures:j.class_features,className:j.class_name,destinyPoints:j.destiny_points,hpCurrent:j.hp_current,hpMax:j.hp_max,userId:j.user_id,roomCode:j.room_code}:null,g=O.useCallback(async()=>{if(!a){h(!1);return}try{const{data:j,error:v}=await Ke.from("characters").select("*").eq("room_code",a).order("created_at",{ascending:!0});if(v)throw v;const w=(j||[]).map(m);o(w)}catch(j){console.error("Error loading party members:",j),p(j.message)}finally{h(!1)}},[a]);O.useEffect(()=>{g()},[g]),O.useEffect(()=>{if(!a)return;const j=Ke.channel(`party:${a}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"characters",filter:`room_code=eq.${a}`},v=>{console.log("Character added to party:",v.new),o(w=>[...w,m(v.new)])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"characters",filter:`room_code=eq.${a}`},v=>{console.log("Character updated in party:",v.new),o(w=>w.map(_=>_.id===v.new.id?m(v.new):_))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"characters",filter:`room_code=eq.${a}`},v=>{console.log("Character removed from party:",v.old),o(w=>w.filter(_=>_.id!==v.old.id))}).subscribe();return()=>{Ke.removeChannel(j)}},[a]);const x={partyMembers:i,loading:u,error:f,refreshPartyMembers:g};return r.jsx(Kg.Provider,{value:x,children:s})}const Yg=O.createContext();function Pe(){const s=O.useContext(Yg);if(!s)throw new Error("useGame must be used within a GameProvider");return s}const Lu={threatDie:1,missions:[],dangerClocks:[],journal:"",log:[],spaceCombat:{isActive:!1,shipArmor:2,torpedoesLoaded:0,hyperdriveCharge:0,stationAssignments:{pilot:null,copilot:null,engineer1:null,engineer2:null,gunner1:null,gunner2:null},combatLog:[]},ship:{name:"The Rebel Corvette",heroicUpgrades:[],purchasedUpgrades:[],torpedoInventory:{standard:0,cluster:0,hunterKiller:0,chaff:0,ion:0},turboLaserStation:null,galaxiesSaved:0}};function Dw({children:s,roomCode:a}){const[i,o]=O.useState(Lu),[u,h]=O.useState(!0),[f,p]=O.useState(null),m=O.useRef(null),g=O.useRef(null);O.useEffect(()=>{if(!a){h(!1);return}async function w(){try{const{data:_,error:S}=await Ke.from("sessions").select("game_state").eq("room_code",a).single();if(S)if(S.code==="PGRST116")o(Lu);else throw S;else if(_?.game_state){const E={..._.game_state,ship:_.game_state.ship||Lu.ship};o(E)}}catch(_){console.error("Error loading game state:",_),p(_.message)}finally{h(!1)}}w()},[a]),O.useEffect(()=>{if(!a)return;const w=Ke.channel(`room:${a}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"sessions",filter:`room_code=eq.${a}`},_=>{_.new?.game_state&&o(_.new.game_state)}).subscribe();return()=>{Ke.removeChannel(w)}},[a]),O.useEffect(()=>()=>{m.current&&clearTimeout(m.current)},[]);const x=O.useCallback(w=>{if(!a)return;let _;o(S=>(_=typeof w=="function"?w(S):{...S,...w},g.current=_,_)),m.current&&clearTimeout(m.current),m.current=setTimeout(async()=>{try{const S=g.current,{error:E}=await Ke.from("sessions").upsert({room_code:a,game_state:S});if(E)throw E}catch(S){console.error("Error syncing game state:",S),p(S.message)}},300)},[a]),j=O.useCallback((w,_="info")=>{x(S=>({...S,log:[{id:Date.now().toString(),timestamp:new Date().toISOString(),message:w,type:_},...S.log].slice(0,100)}))},[x]),v={gameState:i,updateGameState:x,addLog:j,loading:u,error:f};return r.jsx(Yg.Provider,{value:v,children:s})}function Jt(s,a){return s?s.heroicUpgrades.includes(a)||s.purchasedUpgrades.includes(a):!1}function Xp(s,a){return s>=a}function Wn(s){return Jt(s,"overchargeShields")?3:2}function Mw(s,a){return Jt(s,"turboLasers")&&s.turboLaserStation===a?"1d8":"1d6"}function Fp(s){return Jt(s,"torpedoWinch")}function Uw(s){return!s||!s.torpedoInventory?[]:Object.entries(s.torpedoInventory).filter(([a,i])=>i>0).map(([a,i])=>({type:a,count:i}))}function Lw(s){return!s||!s.torpedoInventory?0:Object.values(s.torpedoInventory).reduce((a,i)=>a+i,0)}function Bw(s){return s?[...s.heroicUpgrades,...s.purchasedUpgrades]:[]}function Jg(s){return s?Math.max(0,s.galaxiesSaved-s.heroicUpgrades.length):0}const Wg=O.createContext();function ya(){const s=O.useContext(Wg);if(!s)throw new Error("useSpaceCombat must be used within a SpaceCombatProvider");return s}const zw={isActive:!1,shipArmor:2,torpedoesLoaded:0,hyperdriveCharge:0,stationAssignments:{pilot:null,copilot:null,engineer1:null,engineer2:null,gunner1:null,gunner2:null},combatLog:[]};function $w({children:s}){const{gameState:a,updateGameState:i,addLog:o}=Pe(),[u,h]=O.useState(zw);O.useEffect(()=>{a.spaceCombat&&h(a.spaceCombat)},[a.spaceCombat]);const f=O.useCallback(A=>{h(I=>{const L=typeof A=="function"?A(I):{...I,...A};return i({spaceCombat:L}),L})},[i]),p=O.useCallback(()=>{f({isActive:!0,shipArmor:2,torpedoesLoaded:0,hyperdriveCharge:0,combatLog:[]}),o("Entering space combat - Battle Stations!","combat")},[f,o]),m=O.useCallback(()=>{f({isActive:!1}),o("Space combat ended","combat")},[f,o]),g=O.useCallback((A,I)=>{f(L=>({...L,stationAssignments:{...L.stationAssignments,[A]:I}}))},[f]),x=O.useCallback(A=>{f(I=>({...I,stationAssignments:{...I.stationAssignments,[A]:null}}))},[f]),j=O.useCallback(A=>{if(A<0){const L=new Audio("/star-dashborg/sounds/shield-hit.mp3");L.volume=.5,L.play().catch(()=>{})}else if(A>0){const L=new Audio("/star-dashborg/sounds/shield-power-up.mp3");L.volume=.5,L.play().catch(()=>{})}const I=Wn(a.ship||{});f(L=>{const G=Math.max(0,Math.min(I,L.shipArmor+A));return{...L,shipArmor:G}})},[f,a.ship]),v=O.useCallback(A=>{f(I=>({...I,torpedoesLoaded:I.torpedoesLoaded+A}))},[f]),w=O.useCallback(()=>{f(A=>({...A,torpedoesLoaded:Math.max(0,A.torpedoesLoaded-1)}))},[f]),_=O.useCallback(()=>{f(A=>({...A,hyperdriveCharge:Math.min(3,A.hyperdriveCharge+1)}))},[f]),S=O.useCallback(()=>{f(A=>({...A,hyperdriveCharge:Math.max(0,A.hyperdriveCharge-1)}))},[f]),E=O.useCallback(()=>{f(A=>({...A,hyperdriveCharge:0}))},[f]),q=O.useCallback((A,I="info",L=null)=>{f(G=>({...G,combatLog:[{id:Date.now().toString(),timestamp:new Date().toISOString(),message:A,type:I,data:L},...G.combatLog].slice(0,50)}))},[f]),U={spaceCombat:u,updateSpaceCombat:f,enterCombat:p,exitCombat:m,assignStation:g,unassignStation:x,modifyArmor:j,loadTorpedoes:v,fireTorpedo:w,chargeHyperdrive:_,decrementHyperdrive:S,resetHyperdrive:E,addCombatLog:q};return r.jsx(Wg.Provider,{value:U,children:s})}function Qg(s){var a,i,o="";if(typeof s=="string"||typeof s=="number")o+=s;else if(typeof s=="object")if(Array.isArray(s)){var u=s.length;for(a=0;a<u;a++)s[a]&&(i=Qg(s[a]))&&(o&&(o+=" "),o+=i)}else for(i in s)s[i]&&(o&&(o+=" "),o+=i);return o}function Hw(){for(var s,a,i=0,o="",u=arguments.length;i<u;i++)(s=arguments[i])&&(a=Qg(s))&&(o&&(o+=" "),o+=a);return o}const Gw=(s,a)=>{const i=new Array(s.length+a.length);for(let o=0;o<s.length;o++)i[o]=s[o];for(let o=0;o<a.length;o++)i[s.length+o]=a[o];return i},qw=(s,a)=>({classGroupId:s,validator:a}),Zg=(s=new Map,a=null,i)=>({nextPart:s,validators:a,classGroupId:i}),Yl="-",eg=[],Pw="arbitrary..",Iw=s=>{const a=Kw(s),{conflictingClassGroups:i,conflictingClassGroupModifiers:o}=s;return{getClassGroupId:f=>{if(f.startsWith("[")&&f.endsWith("]"))return Vw(f);const p=f.split(Yl),m=p[0]===""&&p.length>1?1:0;return Xg(p,m,a)},getConflictingClassGroupIds:(f,p)=>{if(p){const m=o[f],g=i[f];return m?g?Gw(g,m):m:g||eg}return i[f]||eg}}},Xg=(s,a,i)=>{if(s.length-a===0)return i.classGroupId;const u=s[a],h=i.nextPart.get(u);if(h){const g=Xg(s,a+1,h);if(g)return g}const f=i.validators;if(f===null)return;const p=a===0?s.join(Yl):s.slice(a).join(Yl),m=f.length;for(let g=0;g<m;g++){const x=f[g];if(x.validator(p))return x.classGroupId}},Vw=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const a=s.slice(1,-1),i=a.indexOf(":"),o=a.slice(0,i);return o?Pw+o:void 0})(),Kw=s=>{const{theme:a,classGroups:i}=s;return Yw(i,a)},Yw=(s,a)=>{const i=Zg();for(const o in s){const u=s[o];dd(u,i,o,a)}return i},dd=(s,a,i,o)=>{const u=s.length;for(let h=0;h<u;h++){const f=s[h];Jw(f,a,i,o)}},Jw=(s,a,i,o)=>{if(typeof s=="string"){Ww(s,a,i);return}if(typeof s=="function"){Qw(s,a,i,o);return}Zw(s,a,i,o)},Ww=(s,a,i)=>{const o=s===""?a:Fg(a,s);o.classGroupId=i},Qw=(s,a,i,o)=>{if(Xw(s)){dd(s(o),a,i,o);return}a.validators===null&&(a.validators=[]),a.validators.push(qw(i,s))},Zw=(s,a,i,o)=>{const u=Object.entries(s),h=u.length;for(let f=0;f<h;f++){const[p,m]=u[f];dd(m,Fg(a,p),i,o)}},Fg=(s,a)=>{let i=s;const o=a.split(Yl),u=o.length;for(let h=0;h<u;h++){const f=o[h];let p=i.nextPart.get(f);p||(p=Zg(),i.nextPart.set(f,p)),i=p}return i},Xw=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,Fw=s=>{if(s<1)return{get:()=>{},set:()=>{}};let a=0,i=Object.create(null),o=Object.create(null);const u=(h,f)=>{i[h]=f,a++,a>s&&(a=0,o=i,i=Object.create(null))};return{get(h){let f=i[h];if(f!==void 0)return f;if((f=o[h])!==void 0)return u(h,f),f},set(h,f){h in i?i[h]=f:u(h,f)}}},Fu="!",tg=":",e1=[],ag=(s,a,i,o,u)=>({modifiers:s,hasImportantModifier:a,baseClassName:i,maybePostfixModifierPosition:o,isExternal:u}),t1=s=>{const{prefix:a,experimentalParseClassName:i}=s;let o=u=>{const h=[];let f=0,p=0,m=0,g;const x=u.length;for(let S=0;S<x;S++){const E=u[S];if(f===0&&p===0){if(E===tg){h.push(u.slice(m,S)),m=S+1;continue}if(E==="/"){g=S;continue}}E==="["?f++:E==="]"?f--:E==="("?p++:E===")"&&p--}const j=h.length===0?u:u.slice(m);let v=j,w=!1;j.endsWith(Fu)?(v=j.slice(0,-1),w=!0):j.startsWith(Fu)&&(v=j.slice(1),w=!0);const _=g&&g>m?g-m:void 0;return ag(h,w,v,_)};if(a){const u=a+tg,h=o;o=f=>f.startsWith(u)?h(f.slice(u.length)):ag(e1,!1,f,void 0,!0)}if(i){const u=o;o=h=>i({className:h,parseClassName:u})}return o},a1=s=>{const a=new Map;return s.orderSensitiveModifiers.forEach((i,o)=>{a.set(i,1e6+o)}),i=>{const o=[];let u=[];for(let h=0;h<i.length;h++){const f=i[h],p=f[0]==="[",m=a.has(f);p||m?(u.length>0&&(u.sort(),o.push(...u),u=[]),o.push(f)):u.push(f)}return u.length>0&&(u.sort(),o.push(...u)),o}},n1=s=>({cache:Fw(s.cacheSize),parseClassName:t1(s),sortModifiers:a1(s),...Iw(s)}),s1=/\s+/,r1=(s,a)=>{const{parseClassName:i,getClassGroupId:o,getConflictingClassGroupIds:u,sortModifiers:h}=a,f=[],p=s.trim().split(s1);let m="";for(let g=p.length-1;g>=0;g-=1){const x=p[g],{isExternal:j,modifiers:v,hasImportantModifier:w,baseClassName:_,maybePostfixModifierPosition:S}=i(x);if(j){m=x+(m.length>0?" "+m:m);continue}let E=!!S,q=o(E?_.substring(0,S):_);if(!q){if(!E){m=x+(m.length>0?" "+m:m);continue}if(q=o(_),!q){m=x+(m.length>0?" "+m:m);continue}E=!1}const U=v.length===0?"":v.length===1?v[0]:h(v).join(":"),A=w?U+Fu:U,I=A+q;if(f.indexOf(I)>-1)continue;f.push(I);const L=u(q,E);for(let G=0;G<L.length;++G){const Z=L[G];f.push(A+Z)}m=x+(m.length>0?" "+m:m)}return m},i1=(...s)=>{let a=0,i,o,u="";for(;a<s.length;)(i=s[a++])&&(o=ey(i))&&(u&&(u+=" "),u+=o);return u},ey=s=>{if(typeof s=="string")return s;let a,i="";for(let o=0;o<s.length;o++)s[o]&&(a=ey(s[o]))&&(i&&(i+=" "),i+=a);return i},l1=(s,...a)=>{let i,o,u,h;const f=m=>{const g=a.reduce((x,j)=>j(x),s());return i=n1(g),o=i.cache.get,u=i.cache.set,h=p,p(m)},p=m=>{const g=o(m);if(g)return g;const x=r1(m,i);return u(m,x),x};return h=f,(...m)=>h(i1(...m))},o1=[],mt=s=>{const a=i=>i[s]||o1;return a.isThemeGetter=!0,a},ty=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ay=/^\((?:(\w[\w-]*):)?(.+)\)$/i,c1=/^\d+\/\d+$/,u1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,d1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,h1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,f1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,m1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vs=s=>c1.test(s),ke=s=>!!s&&!Number.isNaN(Number(s)),yn=s=>!!s&&Number.isInteger(Number(s)),Bu=s=>s.endsWith("%")&&ke(s.slice(0,-1)),Ga=s=>u1.test(s),p1=()=>!0,g1=s=>d1.test(s)&&!h1.test(s),ny=()=>!1,y1=s=>f1.test(s),b1=s=>m1.test(s),x1=s=>!ie(s)&&!le(s),v1=s=>nr(s,iy,ny),ie=s=>ty.test(s),In=s=>nr(s,ly,g1),zu=s=>nr(s,_1,ke),ng=s=>nr(s,sy,ny),w1=s=>nr(s,ry,b1),zl=s=>nr(s,oy,y1),le=s=>ay.test(s),Fr=s=>sr(s,ly),j1=s=>sr(s,k1),sg=s=>sr(s,sy),S1=s=>sr(s,iy),N1=s=>sr(s,ry),$l=s=>sr(s,oy,!0),nr=(s,a,i)=>{const o=ty.exec(s);return o?o[1]?a(o[1]):i(o[2]):!1},sr=(s,a,i=!1)=>{const o=ay.exec(s);return o?o[1]?a(o[1]):i:!1},sy=s=>s==="position"||s==="percentage",ry=s=>s==="image"||s==="url",iy=s=>s==="length"||s==="size"||s==="bg-size",ly=s=>s==="length",_1=s=>s==="number",k1=s=>s==="family-name",oy=s=>s==="shadow",T1=()=>{const s=mt("color"),a=mt("font"),i=mt("text"),o=mt("font-weight"),u=mt("tracking"),h=mt("leading"),f=mt("breakpoint"),p=mt("container"),m=mt("spacing"),g=mt("radius"),x=mt("shadow"),j=mt("inset-shadow"),v=mt("text-shadow"),w=mt("drop-shadow"),_=mt("blur"),S=mt("perspective"),E=mt("aspect"),q=mt("ease"),U=mt("animate"),A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[...I(),le,ie],G=()=>["auto","hidden","clip","visible","scroll"],Z=()=>["auto","contain","none"],X=()=>[le,ie,m],xe=()=>[Vs,"full","auto",...X()],Le=()=>[yn,"none","subgrid",le,ie],ht=()=>["auto",{span:["full",yn,le,ie]},yn,le,ie],Ye=()=>[yn,"auto",le,ie],ee=()=>["auto","min","max","fr",le,ie],Q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],D=()=>["start","end","center","stretch","center-safe","end-safe"],N=()=>["auto",...X()],C=()=>[Vs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...X()],$=()=>[s,le,ie],ae=()=>[...I(),sg,ng,{position:[le,ie]}],ce=()=>["no-repeat",{repeat:["","x","y","space","round"]}],T=()=>["auto","cover","contain",S1,v1,{size:[le,ie]}],V=()=>[Bu,Fr,In],W=()=>["","none","full",g,le,ie],F=()=>["",ke,Fr,In],me=()=>["solid","dashed","dotted","double"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>[ke,Bu,sg,ng],$e=()=>["","none",_,le,ie],Oe=()=>["none",ke,le,ie],Lt=()=>["none",ke,le,ie],ca=()=>[ke,le,ie],Ia=()=>[Vs,"full",...X()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ga],breakpoint:[Ga],color:[p1],container:[Ga],"drop-shadow":[Ga],ease:["in","out","in-out"],font:[x1],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ga],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ga],shadow:[Ga],spacing:["px",ke],text:[Ga],"text-shadow":[Ga],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Vs,ie,le,E]}],container:["container"],columns:[{columns:[ke,ie,le,p]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:Z()}],"overscroll-x":[{"overscroll-x":Z()}],"overscroll-y":[{"overscroll-y":Z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:xe()}],"inset-x":[{"inset-x":xe()}],"inset-y":[{"inset-y":xe()}],start:[{start:xe()}],end:[{end:xe()}],top:[{top:xe()}],right:[{right:xe()}],bottom:[{bottom:xe()}],left:[{left:xe()}],visibility:["visible","invisible","collapse"],z:[{z:[yn,"auto",le,ie]}],basis:[{basis:[Vs,"full","auto",p,...X()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ke,Vs,"auto","initial","none",ie]}],grow:[{grow:["",ke,le,ie]}],shrink:[{shrink:["",ke,le,ie]}],order:[{order:[yn,"first","last","none",le,ie]}],"grid-cols":[{"grid-cols":Le()}],"col-start-end":[{col:ht()}],"col-start":[{"col-start":Ye()}],"col-end":[{"col-end":Ye()}],"grid-rows":[{"grid-rows":Le()}],"row-start-end":[{row:ht()}],"row-start":[{"row-start":Ye()}],"row-end":[{"row-end":Ye()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ee()}],"auto-rows":[{"auto-rows":ee()}],gap:[{gap:X()}],"gap-x":[{"gap-x":X()}],"gap-y":[{"gap-y":X()}],"justify-content":[{justify:[...Q(),"normal"]}],"justify-items":[{"justify-items":[...D(),"normal"]}],"justify-self":[{"justify-self":["auto",...D()]}],"align-content":[{content:["normal",...Q()]}],"align-items":[{items:[...D(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...D(),{baseline:["","last"]}]}],"place-content":[{"place-content":Q()}],"place-items":[{"place-items":[...D(),"baseline"]}],"place-self":[{"place-self":["auto",...D()]}],p:[{p:X()}],px:[{px:X()}],py:[{py:X()}],ps:[{ps:X()}],pe:[{pe:X()}],pt:[{pt:X()}],pr:[{pr:X()}],pb:[{pb:X()}],pl:[{pl:X()}],m:[{m:N()}],mx:[{mx:N()}],my:[{my:N()}],ms:[{ms:N()}],me:[{me:N()}],mt:[{mt:N()}],mr:[{mr:N()}],mb:[{mb:N()}],ml:[{ml:N()}],"space-x":[{"space-x":X()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":X()}],"space-y-reverse":["space-y-reverse"],size:[{size:C()}],w:[{w:[p,"screen",...C()]}],"min-w":[{"min-w":[p,"screen","none",...C()]}],"max-w":[{"max-w":[p,"screen","none","prose",{screen:[f]},...C()]}],h:[{h:["screen","lh",...C()]}],"min-h":[{"min-h":["screen","lh","none",...C()]}],"max-h":[{"max-h":["screen","lh",...C()]}],"font-size":[{text:["base",i,Fr,In]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,le,zu]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Bu,ie]}],"font-family":[{font:[j1,ie,a]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[u,le,ie]}],"line-clamp":[{"line-clamp":[ke,"none",le,zu]}],leading:[{leading:[h,...X()]}],"list-image":[{"list-image":["none",le,ie]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",le,ie]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...me(),"wavy"]}],"text-decoration-thickness":[{decoration:[ke,"from-font","auto",le,In]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[ke,"auto",le,ie]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",le,ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",le,ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ae()}],"bg-repeat":[{bg:ce()}],"bg-size":[{bg:T()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},yn,le,ie],radial:["",le,ie],conic:[yn,le,ie]},N1,w1]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:W()}],"rounded-s":[{"rounded-s":W()}],"rounded-e":[{"rounded-e":W()}],"rounded-t":[{"rounded-t":W()}],"rounded-r":[{"rounded-r":W()}],"rounded-b":[{"rounded-b":W()}],"rounded-l":[{"rounded-l":W()}],"rounded-ss":[{"rounded-ss":W()}],"rounded-se":[{"rounded-se":W()}],"rounded-ee":[{"rounded-ee":W()}],"rounded-es":[{"rounded-es":W()}],"rounded-tl":[{"rounded-tl":W()}],"rounded-tr":[{"rounded-tr":W()}],"rounded-br":[{"rounded-br":W()}],"rounded-bl":[{"rounded-bl":W()}],"border-w":[{border:F()}],"border-w-x":[{"border-x":F()}],"border-w-y":[{"border-y":F()}],"border-w-s":[{"border-s":F()}],"border-w-e":[{"border-e":F()}],"border-w-t":[{"border-t":F()}],"border-w-r":[{"border-r":F()}],"border-w-b":[{"border-b":F()}],"border-w-l":[{"border-l":F()}],"divide-x":[{"divide-x":F()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":F()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...me(),"hidden","none"]}],"divide-style":[{divide:[...me(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[...me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ke,le,ie]}],"outline-w":[{outline:["",ke,Fr,In]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",x,$l,zl]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",j,$l,zl]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[ke,In]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":F()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",v,$l,zl]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[ke,le,ie]}],"mix-blend":[{"mix-blend":[...ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ke]}],"mask-image-linear-from-pos":[{"mask-linear-from":se()}],"mask-image-linear-to-pos":[{"mask-linear-to":se()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":se()}],"mask-image-t-to-pos":[{"mask-t-to":se()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":se()}],"mask-image-r-to-pos":[{"mask-r-to":se()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":se()}],"mask-image-b-to-pos":[{"mask-b-to":se()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":se()}],"mask-image-l-to-pos":[{"mask-l-to":se()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":se()}],"mask-image-x-to-pos":[{"mask-x-to":se()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":se()}],"mask-image-y-to-pos":[{"mask-y-to":se()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[le,ie]}],"mask-image-radial-from-pos":[{"mask-radial-from":se()}],"mask-image-radial-to-pos":[{"mask-radial-to":se()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":I()}],"mask-image-conic-pos":[{"mask-conic":[ke]}],"mask-image-conic-from-pos":[{"mask-conic-from":se()}],"mask-image-conic-to-pos":[{"mask-conic-to":se()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ae()}],"mask-repeat":[{mask:ce()}],"mask-size":[{mask:T()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",le,ie]}],filter:[{filter:["","none",le,ie]}],blur:[{blur:$e()}],brightness:[{brightness:[ke,le,ie]}],contrast:[{contrast:[ke,le,ie]}],"drop-shadow":[{"drop-shadow":["","none",w,$l,zl]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",ke,le,ie]}],"hue-rotate":[{"hue-rotate":[ke,le,ie]}],invert:[{invert:["",ke,le,ie]}],saturate:[{saturate:[ke,le,ie]}],sepia:[{sepia:["",ke,le,ie]}],"backdrop-filter":[{"backdrop-filter":["","none",le,ie]}],"backdrop-blur":[{"backdrop-blur":$e()}],"backdrop-brightness":[{"backdrop-brightness":[ke,le,ie]}],"backdrop-contrast":[{"backdrop-contrast":[ke,le,ie]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ke,le,ie]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ke,le,ie]}],"backdrop-invert":[{"backdrop-invert":["",ke,le,ie]}],"backdrop-opacity":[{"backdrop-opacity":[ke,le,ie]}],"backdrop-saturate":[{"backdrop-saturate":[ke,le,ie]}],"backdrop-sepia":[{"backdrop-sepia":["",ke,le,ie]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":X()}],"border-spacing-x":[{"border-spacing-x":X()}],"border-spacing-y":[{"border-spacing-y":X()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",le,ie]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ke,"initial",le,ie]}],ease:[{ease:["linear","initial",q,le,ie]}],delay:[{delay:[ke,le,ie]}],animate:[{animate:["none",U,le,ie]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,le,ie]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:Oe()}],"rotate-x":[{"rotate-x":Oe()}],"rotate-y":[{"rotate-y":Oe()}],"rotate-z":[{"rotate-z":Oe()}],scale:[{scale:Lt()}],"scale-x":[{"scale-x":Lt()}],"scale-y":[{"scale-y":Lt()}],"scale-z":[{"scale-z":Lt()}],"scale-3d":["scale-3d"],skew:[{skew:ca()}],"skew-x":[{"skew-x":ca()}],"skew-y":[{"skew-y":ca()}],transform:[{transform:[le,ie,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ia()}],"translate-x":[{"translate-x":Ia()}],"translate-y":[{"translate-y":Ia()}],"translate-z":[{"translate-z":Ia()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",le,ie]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",le,ie]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[ke,Fr,In,zu]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},E1=l1(T1);function ne(...s){return E1(Hw(s))}function cy(){const s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let a="";for(let i=0;i<4;i++)a+=s.charAt(Math.floor(Math.random()*s.length));return a}function R1(){return new URLSearchParams(window.location.search).get("room")}function C1(s){const a=new URL(window.location);a.searchParams.set("room",s),window.history.pushState({},"",a)}const A1=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),O1=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,i,o)=>o?o.toUpperCase():i.toLowerCase()),rg=s=>{const a=O1(s);return a.charAt(0).toUpperCase()+a.slice(1)},uy=(...s)=>s.filter((a,i,o)=>!!a&&a.trim()!==""&&o.indexOf(a)===i).join(" ").trim(),D1=s=>{for(const a in s)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};var M1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const U1=O.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:h,iconNode:f,...p},m)=>O.createElement("svg",{ref:m,...M1,width:a,height:a,stroke:s,strokeWidth:o?Number(i)*24/Number(a):i,className:uy("lucide",u),...!h&&!D1(p)&&{"aria-hidden":"true"},...p},[...f.map(([g,x])=>O.createElement(g,x)),...Array.isArray(h)?h:[h]]));const pe=(s,a)=>{const i=O.forwardRef(({className:o,...u},h)=>O.createElement(U1,{ref:h,iconNode:a,className:uy(`lucide-${A1(rg(s))}`,`lucide-${s}`,o),...u}));return i.displayName=rg(s),i};const L1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],B1=pe("arrow-right",L1);const z1=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Xs=pe("award",z1);const $1=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],ig=pe("book-marked",$1);const H1=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],lg=pe("book-open",H1);const G1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Jl=pe("check",G1);const q1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],hd=pe("chevron-down",q1);const P1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],I1=pe("chevron-right",P1);const V1=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],K1=pe("chevron-up",V1);const Y1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dy=pe("circle-check-big",Y1);const J1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],W1=pe("circle-plus",J1);const Q1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Z1=pe("circle-question-mark",Q1);const X1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],F1=pe("clock",X1);const ej=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],ed=pe("coins",ej);const tj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],aj=pe("copy",tj);const nj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],sj=pe("dice-6",nj);const rj=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]],Qn=pe("dices",rj);const ij=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],lj=pe("grip-vertical",ij);const oj=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],cj=pe("heart",oj);const uj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dj=pe("info",uj);const hj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fj=pe("lock",hj);const mj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],og=pe("map-pin",mj);const pj=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],gj=pe("map",pj);const yj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],hy=pe("maximize-2",yj);const bj=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],xj=pe("minimize-2",bj);const vj=[["path",{d:"M5 12h14",key:"1ays0h"}]],fd=pe("minus",vj);const wj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],fy=pe("play",wj);const jj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fn=pe("plus",jj);const Sj=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],cg=pe("radio",Sj);const Nj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ug=pe("refresh-cw",Nj);const _j=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],td=pe("rocket",_j);const kj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Tj=pe("save",kj);const Ej=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],Rj=pe("scroll",Ej);const Cj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],dg=pe("search",Cj);const Aj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ad=pe("settings",Aj);const Oj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Dj=pe("shield-alert",Oj);const Mj=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],Uj=pe("shield-off",Mj);const Lj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],md=pe("shield",Lj);const Bj=[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]],zj=pe("ship",Bj);const $j=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],nd=pe("shopping-cart",$j);const Hj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Gj=pe("sparkles",Hj);const qj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Fs=pe("star",qj);const Pj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xn=pe("target",Pj);const Ij=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],er=pe("trash-2",Ij);const Vj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wn=pe("triangle-alert",Vj);const Kj=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Yj=pe("trophy",Kj);const Jj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Wj=pe("user-x",Jj);const Qj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sd=pe("user",Qj);const Zj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Xj=pe("users",Zj);const Fj=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],eS=pe("volume-2",Fj);const tS=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],aS=pe("volume-x",tS);const nS=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],sS=pe("wrench",nS);const rS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jn=pe("x",rS);const iS=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ga=pe("zap",iS);function de({children:s,variant:a="primary",className:i,onClick:o,disabled:u,...h}){const f="px-3 sm:px-4 py-2 font-orbitron font-bold uppercase text-xs sm:text-sm border-3 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98] active:shadow-inner leading-tight",p={primary:"bg-accent-cyan text-bg-primary border-accent-cyan hover:bg-transparent hover:text-accent-cyan hover:shadow-[0_0_15px_rgba(0,240,255,0.6)]",secondary:"bg-accent-yellow text-bg-primary border-accent-yellow hover:bg-transparent hover:text-accent-yellow hover:shadow-[0_0_15px_rgba(255,252,0,0.6)]",danger:"bg-accent-red text-bg-primary border-accent-red hover:bg-transparent hover:text-accent-red hover:shadow-[0_0_15px_rgba(255,0,60,0.6)]",ghost:"bg-transparent text-accent-cyan border-accent-cyan hover:bg-accent-cyan hover:text-bg-primary hover:shadow-[0_0_15px_rgba(0,240,255,0.6)]"};return r.jsx("button",{className:ne(f,p[a],i),onClick:o,disabled:u,...h,children:s})}var gi=kg();function lS({isOpen:s,onClose:a}){const[i,o]=O.useState(null);O.useEffect(()=>{const f=p=>{s&&p.key==="Escape"&&a()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[s,a]);const u=[{id:1,title:"Create Character(s)",subtitle:"Campaign Start Only",icon:fy,color:"cyan",description:"Use the rules in the Star Borg Rebel Handbook to create your character.",actions:[{label:"Character Creation",tab:"creation"},{label:"Roll Species",specific:"species"},{label:"Roll Motivation",specific:"motivation"}]},{id:2,title:"Roll Campaign Goal",subtitle:"Campaign Start Only",icon:Xn,color:"yellow",description:"Roll on the Epic and Damn Fool Idealistic Crusade Tables to determine your Rebel's main goal to save the galaxy.",actions:[{label:"Generate Epic Title",specific:"epicTitle"},{label:"Generate Villain",specific:"villain"}]},{id:3,title:"Current Mission",subtitle:"Session Play",icon:Rj,color:"cyan",description:"Roll on the Episode and Mission Tables to determine your Rebel's current mission.",actions:[{label:"Generate Episode Title",specific:"episodeTitle"},{label:"Generate Mission",specific:"mission"}]},{id:4,title:"Set Threat & Tracks",subtitle:"Session Play",icon:F1,color:"red",description:"Set the Threat Die to 1 and take note of any Mission Tracks and Danger Clocks.",actions:[{label:"Reset Threat Die",specific:"threatDie"},{label:"Add Mission Track",specific:"missionTrack"},{label:"Add Danger Clock",specific:"dangerClock"}]},{id:5,title:"Opening Scene",subtitle:"Session Play",icon:ga,color:"yellow",description:"Roll on the Opening Scene table to determine how the action begins.",actions:[{label:"Roll Opening Scene",specific:"openingScene"},{label:"Generate Scene",specific:"scene"}]},{id:6,title:"Use Solo Tools",subtitle:"Session Play",icon:sj,color:"cyan",description:"Use the Solo Tools, tables, oracles, and your imagination to generate locations, obstacles, characters, and see where your adventure leads.",actions:[{label:"Ask Oracle",specific:"askOracle"},{label:"Generate NPC",specific:"npc"},{label:"Generate Planet",specific:"planet"}]},{id:7,title:"Resolve Actions",subtitle:"Session Play",icon:Xn,color:"red",description:"Use the Star Borg Core and Solo rules to resolve your Rebel's actions, adjusting the Threat Die accordingly and take note of the consequences.",actions:[{label:"Roll Dice",specific:"dice"},{label:"Crit/Blunder Table",specific:"critBlunder"}]},{id:8,title:"Continue Scene",subtitle:"Session Play",icon:ga,color:"yellow",description:"Roll a Scene Shakeup, Event, or reference the Boost Oracle to continue the scene.",actions:[{label:"Scene Shakeup",specific:"shakeup"},{label:"Event Oracle",specific:"event"},{label:"Boost Oracle",specific:"boost"}]},{id:9,title:"Record & Check Progress",subtitle:"Session Play",icon:dy,color:"cyan",description:"When a scene's action is completely resolved, record the pertinent details and check for progress on the Mission Tracks and Danger Clocks.",actions:[{label:"Update Journal",specific:"journal"},{label:"Check Tracks",specific:"tracks"}]},{id:10,title:"Prepare Next Scene",subtitle:"Session Play",icon:gj,color:"yellow",description:"Prepare the next scene by rolling on the Scene or Event Oracle Tables.",actions:[{label:"Generate Scene",specific:"scene"},{label:"Event Oracle",specific:"event"}]}],h=f=>{o(i===f?null:f)};return gi.createPortal(r.jsxs(r.Fragment,{children:[r.jsx("div",{className:ne("fixed inset-0 bg-black transition-opacity duration-300",s?"opacity-70 pointer-events-auto z-[9998]":"opacity-0 pointer-events-none z-[-1]"),onClick:a,style:{position:"fixed",top:0,left:0,right:0,bottom:0}}),r.jsxs("div",{className:ne("fixed w-full md:w-[480px] bg-bg-primary border-r-3 border-accent-cyan transform transition-transform duration-300 ease-in-out scanlines overflow-hidden flex flex-col",s?"translate-x-0 z-[9999]":"-translate-x-full z-[-1]"),style:{position:"fixed",top:0,left:0,height:"100vh",maxHeight:"100vh"},children:[r.jsxs("div",{className:"border-b-3 border-accent-cyan bg-bg-secondary p-4 flex items-center justify-between shrink-0",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-accent-cyan font-orbitron font-bold text-xl uppercase text-glow-cyan",children:"Game Flow Guide"}),r.jsx("p",{className:"text-gray-400 text-xs font-orbitron mt-1",children:"Solo Play Procedure"})]}),r.jsx("button",{onClick:a,className:"text-accent-red hover:text-accent-red hover:bg-accent-red hover:bg-opacity-20 p-2 transition-colors border-2 border-accent-red",children:r.jsx(jn,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"overflow-y-auto flex-1 p-4",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"text-accent-yellow font-orbitron text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"h-px flex-1 bg-accent-yellow opacity-30"}),r.jsx("span",{children:"Campaign Start"}),r.jsx("div",{className:"h-px flex-1 bg-accent-yellow opacity-30"})]}),u.slice(0,2).map(f=>r.jsx(hg,{step:f,isExpanded:i===f.id,onToggle:()=>h(f.id)},f.id))]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-accent-cyan font-orbitron text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"h-px flex-1 bg-accent-cyan opacity-30"}),r.jsx("span",{children:"Session Play (Steps 3-10)"}),r.jsx("div",{className:"h-px flex-1 bg-accent-cyan opacity-30"})]}),u.slice(2).map(f=>r.jsx(hg,{step:f,isExpanded:i===f.id,onToggle:()=>h(f.id)},f.id))]}),r.jsxs("div",{className:"mt-6 p-4 border-2 border-accent-yellow bg-bg-secondary",children:[r.jsx("div",{className:"text-accent-yellow font-orbitron text-xs uppercase mb-2",children:"Pro Tip"}),r.jsx("p",{className:"text-gray-300 text-sm",children:"Use the Quick Action buttons at the top of the Oracle Compendium for fast access to the most common rolls during play."})]})]})]})]}),document.body)}function hg({step:s,isExpanded:a,onToggle:i}){s.icon;const u={cyan:{border:"border-accent-cyan",text:"text-accent-cyan",bg:"bg-accent-cyan",glow:"glow-cyan"},yellow:{border:"border-accent-yellow",text:"text-accent-yellow",bg:"bg-accent-yellow",glow:"glow-yellow"},red:{border:"border-accent-red",text:"text-accent-red",bg:"bg-accent-red",glow:"glow-red"}}[s.color];return r.jsxs("div",{className:ne("border-2 mb-3 bg-bg-secondary transition-all",u.border,a&&u.glow),children:[r.jsxs("button",{onClick:i,className:ne("w-full p-3 flex items-center justify-between hover:bg-opacity-10 transition-all duration-200 active:scale-[0.99]",`hover:${u.bg}`),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:ne("w-8 h-8 rounded-full flex items-center justify-center border-2",u.border,u.bg,"bg-opacity-20"),children:r.jsx("span",{className:ne("font-orbitron font-bold text-sm",u.text),children:s.id})}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:ne("font-orbitron font-bold text-sm uppercase",u.text),children:s.title}),r.jsx("div",{className:"text-gray-400 text-xs font-orbitron",children:s.subtitle})]})]}),r.jsx(I1,{className:ne("w-5 h-5 transition-all duration-300",u.text,a&&"rotate-90")})]}),a&&r.jsxs("div",{className:ne("border-t-2 p-4 space-y-3 accordion-reveal overflow-hidden",u.border),children:[r.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:s.description}),s.actions&&s.actions.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-orbitron uppercase text-gray-400 mb-2",children:"Quick Actions:"}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:s.actions.map((h,f)=>r.jsx("button",{onClick:()=>{console.log("Quick action:",h.specific||h.tab)},className:ne("px-3 py-2 text-xs font-orbitron uppercase border-2 transition-all text-left",u.border,u.text,"hover:bg-opacity-20",`hover:${u.bg}`),children:h.label},f))}),r.jsx("p",{className:"text-gray-500 text-xs mt-2 italic",children:"Note: Actions log to console. Full navigation integration coming soon."})]})]})]})}function oS({isOpen:s,onClose:a}){return O.useEffect(()=>{const i=o=>{s&&o.key==="Escape"&&a()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[s,a]),gi.createPortal(r.jsxs(r.Fragment,{children:[r.jsx("div",{className:ne("fixed inset-0 bg-black transition-opacity duration-300",s?"opacity-70 pointer-events-auto z-[9998]":"opacity-0 pointer-events-none z-[-1]"),onClick:a,style:{position:"fixed",top:0,left:0,right:0,bottom:0}}),r.jsxs("div",{className:ne("fixed w-full md:w-[480px] bg-bg-primary border-r-3 border-accent-yellow transform transition-transform duration-300 ease-in-out scanlines overflow-hidden flex flex-col",s?"translate-x-0 z-[9999]":"-translate-x-full z-[-1]"),style:{position:"fixed",top:0,left:0,height:"100vh",maxHeight:"100vh"},children:[r.jsxs("div",{className:"border-b-3 border-accent-yellow bg-bg-secondary p-4 flex items-center justify-between shrink-0",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-accent-yellow font-orbitron font-bold text-xl uppercase text-glow-yellow",children:"Quick Reference"}),r.jsx("p",{className:"text-gray-400 text-xs font-orbitron mt-1",children:"Essential Rules & Mechanics"})]}),r.jsx("button",{onClick:a,className:"text-accent-red hover:text-accent-red hover:bg-accent-red hover:bg-opacity-20 p-2 transition-colors border-2 border-accent-red",children:r.jsx(jn,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"overflow-y-auto flex-1 p-4 space-y-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-orbitron font-bold text-accent-cyan uppercase mb-2 text-xs",children:"Difficulty Ratings"}),r.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Routine:"}),r.jsx("span",{className:"text-text-primary font-mono",children:"DR 8"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Easy:"}),r.jsx("span",{className:"text-text-primary font-mono",children:"DR 10"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Normal:"}),r.jsx("span",{className:"text-text-primary font-mono font-bold",children:"DR 12"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Difficult:"}),r.jsx("span",{className:"text-text-primary font-mono",children:"DR 14"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Complicated:"}),r.jsx("span",{className:"text-text-primary font-mono",children:"DR 16"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Impossible:"}),r.jsx("span",{className:"text-text-primary font-mono",children:"DR 18"})]})]})]}),r.jsxs("div",{className:"border-t border-accent-yellow/30 pt-3",children:[r.jsx("h3",{className:"font-orbitron font-bold text-accent-cyan uppercase mb-2 text-xs",children:"Solo Test Results (D20 + Ability)"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-cyan font-mono font-bold",children:"12+"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-accent-cyan",children:"STRONG HIT:"}),r.jsx("span",{className:"text-gray-300 ml-1",children:"Things go exactly as planned."})]})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-yellow font-mono font-bold",children:"9-11"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-accent-yellow",children:"WEAK HIT:"}),r.jsx("span",{className:"text-gray-300 ml-1",children:"Good, but not completely as planned."})]})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-red font-mono font-bold",children:"8<"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-accent-red",children:"FAIL:"}),r.jsx("span",{className:"text-gray-300 ml-1",children:"Things are not going your way."})]})]})]})]}),r.jsxs("div",{className:"border-t border-accent-yellow/30 pt-3",children:[r.jsx("h3",{className:"font-orbitron font-bold text-accent-cyan uppercase mb-2 text-xs",children:"Combat Tests (DR12 Default)"}),r.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Melee:"}),r.jsx("span",{className:"text-text-primary font-mono",children:"STR"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Ranged:"}),r.jsx("span",{className:"text-text-primary font-mono",children:"PRS"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Throw:"}),r.jsx("span",{className:"text-text-primary font-mono",children:"AGI"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Defense:"}),r.jsx("span",{className:"text-text-primary font-mono",children:"AGI"})]})]})]}),r.jsxs("div",{className:"border-t border-accent-yellow/30 pt-3",children:[r.jsx("h3",{className:"font-orbitron font-bold text-accent-cyan uppercase mb-2 text-xs",children:"Armor Tiers"}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Tier 1 (Light):"}),r.jsx("span",{className:"text-text-primary font-mono",children:"-D2 damage"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Tier 2 (Medium):"}),r.jsx("span",{className:"text-text-primary font-mono",children:"-D4 damage"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Tier 3 (Heavy):"}),r.jsx("span",{className:"text-text-primary font-mono",children:"-D6 damage"})]}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"* Reduced one tier on Defense blunder"})]})]}),r.jsxs("div",{className:"border-t border-accent-yellow/30 pt-3",children:[r.jsx("h3",{className:"font-orbitron font-bold text-accent-cyan uppercase mb-2 text-xs",children:"Resting & Recovery"}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Catch Breath:"}),r.jsx("span",{className:"text-text-primary font-mono",children:"Restore D4 HP"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Night's Sleep:"}),r.jsx("span",{className:"text-text-primary font-mono",children:"Restore D6 HP"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Healing Tank (1 week):"}),r.jsx("span",{className:"text-text-primary font-mono",children:"Full HP"})]})]})]}),r.jsxs("div",{className:"border-t border-accent-yellow/30 pt-3",children:[r.jsx("h3",{className:"font-orbitron font-bold text-accent-cyan uppercase mb-2 text-xs",children:"Natural 20 / Natural 1"}),r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-accent-cyan",children:"CRIT (20):"}),r.jsxs("div",{className:"text-gray-300 ml-4",children:[" Attack: Double damage, reduce armor 1 tier",r.jsx("br",{})," Defense: Gain free attack",r.jsx("br",{})," Other: Outrageous success"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-accent-red",children:"BLUNDER (1):"}),r.jsx("div",{className:"text-gray-300 ml-4",children:" Roll on Blunder table (d4)"})]})]})]}),r.jsxs("div",{className:"border-t border-accent-yellow/30 pt-3",children:[r.jsx("h3",{className:"font-orbitron font-bold text-accent-cyan uppercase mb-2 text-xs",children:"Enemy Morale"}),r.jsxs("div",{className:"text-xs space-y-1",children:[r.jsx("p",{className:"text-gray-300",children:"Roll 2D6 when:"}),r.jsxs("div",{className:"text-gray-400 ml-4",children:[" Leader killed",r.jsx("br",{})," Half group eliminated",r.jsx("br",{})," Single enemy at 1/3 HP"]}),r.jsxs("p",{className:"text-gray-300 mt-2",children:["If roll > enemy MRL: Roll D6",r.jsx("br",{}),r.jsx("span",{className:"ml-4",children:"1-4 = Flees, 5-6 = Surrenders"})]})]})]}),r.jsxs("div",{className:"border-t border-accent-yellow/30 pt-3",children:[r.jsx("h3",{className:"font-orbitron font-bold text-accent-cyan uppercase mb-2 text-xs",children:"Threat Die Triggers"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-accent-red font-bold",children:"INCREASE:"}),r.jsxs("div",{className:"text-gray-400 ml-2 mt-1",children:[" New Danger Clock",r.jsx("br",{})," Roll Blunder",r.jsx("br",{})," Begin Escape"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-accent-cyan font-bold",children:"DECREASE:"}),r.jsxs("div",{className:"text-gray-400 ml-2 mt-1",children:[" Complete Mission",r.jsx("br",{})," Resolve Clock",r.jsx("br",{})," Roll Critical",r.jsx("br",{})," Catch Breath"]})]})]}),r.jsx("p",{className:"text-gray-400 text-xs mt-2",children:"When TD = 6: Advance ALL Clocks +1, OR fill ONE Clock"})]})]})]})]}),document.body)}function cS({roomCode:s,onOpenCharacterSheet:a}){const{character:i}=ar(),{spaceCombat:o,enterCombat:u,exitCombat:h}=ya(),[f,p]=O.useState(!1),[m,g]=O.useState(!1),[x,j]=O.useState(!1),v=()=>{const S=`${window.location.origin}${window.location.pathname}?room=${s}`;navigator.clipboard.writeText(S),p(!0),setTimeout(()=>p(!1),2e3)},w=()=>{const S=cy(),E=`${window.location.origin}${window.location.pathname}?room=${S}`;window.location.href=E},_=()=>{o.isActive?h():u()};return r.jsxs(r.Fragment,{children:[r.jsx("header",{className:"border-b-3 border-accent-yellow bg-bg-secondary p-3 md:p-4 border-flicker",children:r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"font-orbitron font-black text-2xl md:text-4xl text-accent-yellow text-glow-yellow tracking-wider",children:"STAR DASHBORG"}),r.jsx("p",{className:"text-accent-cyan text-xs md:text-sm font-orbitron",children:"REBEL MISSION DASHBOARD"})]}),r.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i&&a&&r.jsxs(de,{variant:"primary",onClick:a,className:"flex items-center gap-2",title:i.name||"Character Sheet",children:[r.jsx(sd,{className:"w-4 h-4"}),r.jsx("span",{className:"max-w-[100px] truncate",children:i.name?i.name.split(" ")[0]:"Character"})]}),r.jsxs(de,{variant:o.isActive?"primary":"secondary",onClick:_,className:`flex items-center gap-2 ${o.isActive?"glow-pulse-red border-accent-red text-accent-red":""}`,children:[r.jsx(td,{className:"w-4 h-4"}),"Battle Stations"]}),r.jsxs(de,{variant:"primary",onClick:()=>g(!0),className:"flex items-center gap-2",children:[r.jsx(lg,{className:"w-4 h-4"}),"Game Flow"]}),r.jsxs(de,{variant:"secondary",onClick:()=>j(!0),className:"flex items-center gap-2",children:[r.jsx(ig,{className:"w-4 h-4"}),"Quick Ref"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs text-gray-400 font-orbitron uppercase",children:"Room Code"}),r.jsx("p",{className:"text-lg md:text-2xl font-orbitron font-bold text-accent-cyan text-glow-cyan",children:s})]}),r.jsxs("div",{className:"flex gap-1 md:gap-2",children:[r.jsxs(de,{variant:"secondary",onClick:w,className:"flex items-center gap-1 md:gap-2 px-2 md:px-4",children:[r.jsx(Fn,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"New Room"})]}),r.jsx(de,{variant:"ghost",onClick:v,className:"flex items-center gap-1 md:gap-2 px-2 md:px-4",children:f?r.jsxs(r.Fragment,{children:[r.jsx(Jl,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Copied!"})]}):r.jsxs(r.Fragment,{children:[r.jsx(aj,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Copy Invite"})]})})]})]}),r.jsxs("div",{className:`md:hidden w-full grid gap-2 ${i&&a?"grid-cols-4":"grid-cols-3"}`,children:[i&&a&&r.jsxs(de,{variant:"primary",onClick:a,className:"flex items-center justify-center gap-2",title:i.name||"Character Sheet",children:[r.jsx(sd,{className:"w-4 h-4"}),r.jsx("span",{className:"truncate text-xs",children:i.name?i.name.split(" ")[0]:"Char"})]}),r.jsxs(de,{variant:o.isActive?"primary":"secondary",onClick:_,className:`flex items-center justify-center gap-2 ${o.isActive?"glow-pulse-red border-accent-red text-accent-red":""}`,children:[r.jsx(td,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Combat"})]}),r.jsxs(de,{variant:"primary",onClick:()=>g(!0),className:"flex items-center justify-center gap-2",children:[r.jsx(lg,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Guide"})]}),r.jsxs(de,{variant:"secondary",onClick:()=>j(!0),className:"flex items-center justify-center gap-2",children:[r.jsx(ig,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Ref"})]})]})]})}),r.jsx(lS,{isOpen:m,onClose:()=>g(!1)}),r.jsx(oS,{isOpen:x,onClose:()=>j(!1)})]})}function uS({title:s,children:a,className:i,variant:o="cyan",defaultCollapsed:u=!1,maxHeightExpanded:h,minHeightExpanded:f,onHelpClick:p}){const[m,g]=O.useState(u),x={cyan:"border-accent-cyan",yellow:"border-accent-yellow",red:"border-accent-red"},j={cyan:"text-accent-cyan",yellow:"text-accent-yellow",red:"text-accent-red"};return r.jsxs("div",{className:ne("border-3 flex flex-col relative transition-all duration-300",x[o],m?"bg-transparent":"bg-bg-secondary",m?"overflow-visible":"overflow-hidden flex-1",i),children:[s&&r.jsxs("div",{className:ne("px-4 py-2 font-orbitron font-bold uppercase text-lg shrink-0 flex items-center justify-between h-[52px]",j[o],"bg-bg-primary","overflow-hidden",!m&&`border-b-3 ${x[o]}`),children:[r.jsx("span",{className:"break-words flex-1",children:s}),r.jsxs("div",{className:"flex items-center gap-1",children:[p&&r.jsx("button",{onClick:v=>{v.stopPropagation(),p()},className:ne("p-1 hover:bg-current/10 transition-all duration-200 rounded",j[o]),"aria-label":"Show help",children:r.jsx(Z1,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>g(!m),className:ne("p-1 hover:bg-current/10 transition-all duration-200 rounded",j[o]),"aria-label":m?"Expand panel":"Collapse panel",children:m?r.jsx(hy,{className:"w-4 h-4"}):r.jsx(xj,{className:"w-4 h-4"})})]})]}),!m&&r.jsx("div",{className:ne("p-4 flex-1 overflow-auto accordion-reveal relative",h,f),children:a})]})}function dS(){const{gameState:s,updateGameState:a,addLog:i}=Pe(),[o,u]=O.useState(!1),h=()=>{if(o)return;u(!0);const p=s.threatDie===6?1:s.threatDie+1;a({threatDie:p}),i(`Threat Die set to ${p}`,"threat"),setTimeout(()=>u(!1),400)},f=s.threatDie===6;return r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("button",{onClick:h,className:`w-32 h-32 bg-accent-red text-bg-primary font-orbitron font-black text-6xl border-3 border-accent-red hover:bg-transparent hover:text-accent-red transition-all glow-red hover:shadow-[0_0_20px_rgba(255,0,60,0.8)] active:scale-95 ${o?"threat-cycle glow-pulse-red":""} ${f?"glow-pulse-red":""}`,children:r.jsx("span",{className:o?"number-flip inline-block":"inline-block",children:s.threatDie})}),r.jsx("p",{className:"text-accent-red text-sm font-orbitron uppercase",children:"Click to Cycle"}),f&&r.jsxs("div",{className:"w-full border-3 border-accent-red bg-accent-red/10 p-4 inline-alert-pulse",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[r.jsx(wn,{className:"w-5 h-5 text-accent-red flex-shrink-0 mt-0.5"}),r.jsx("h4",{className:"font-orbitron font-bold text-accent-red uppercase text-sm",children:"Maximum Threat"})]}),r.jsx("p",{className:"text-text-primary text-sm mb-2 pl-8",children:"Choose one:"}),r.jsxs("ul",{className:"space-y-1 pl-8",children:[r.jsxs("li",{className:"text-text-primary text-sm flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-red",children:""}),r.jsx("span",{children:"Advance ALL Danger Clocks by 1"})]}),r.jsxs("li",{className:"text-text-primary text-sm flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-red",children:""}),r.jsx("span",{children:"Completely fill ONE Danger Clock"})]})]})]})]})}const at={affirmation:{1:{result:"Extreme No",detail:"As bad as it can be",size:"Miniscule / One",weather:"Electric Storm",npcReaction:"Immediately Attack"},"2-3":{result:"No",detail:"It's Gnarly",size:"Small / Pair",weather:"Ice Storm",npcReaction:"Hostile"},"4-5":{result:"No",detail:"Oof, What Now",size:"Handful (d4+1)",weather:"Blowing Dust",npcReaction:"Threatening"},"6-7":{result:"No",detail:"Could Use a Hand",size:"Several (d6+1)",weather:"Heavy Rain",npcReaction:"Wary"},"8-9":{result:"No, but",detail:"Average",size:"Several (d6+1)",weather:"Drizzling",npcReaction:"Curious"},"10-11":{result:"Random Event",detail:"Average",size:"Several (d6+2)",weather:"Foggy",npcReaction:"Indifferent"},"12-13":{result:"Yes, but",detail:"Average",size:"Several (d6+2)",weather:"Overcast",npcReaction:"Indifferent"},"14-15":{result:"Yes",detail:"I've Seen Better",size:"Several (d6+3)",weather:"A Bit Warm",npcReaction:"Helpful"},"16-17":{result:"Yes",detail:"I've Got This",size:"Patrol (d10+5)",weather:"Sunny",npcReaction:"Helpful"},"18-19":{result:"Yes",detail:"The Good Stuff",size:"Unit (d20+10)",weather:"Comfortable",npcReaction:"Generous"},20:{result:"Extreme Yes",detail:"Top Shelf",size:"Gigantic / Too Many",weather:"Chilly",npcReaction:"Willing to Betray"}},openingScene:["You've been poisoned with a timer-release toxin (d6 days).","A new character pleads for help hiding from a Bounty Hunter.","An important piece of your tech was just broken.","You are in a scrape at a cantina.","You are being chased by a Bounty Hunter.","An electrical storm has knocked out communications.","A bomb has gone off in the nearby spaceport.","Rebels have assaulted an official and are cornered in a plaza.","You've been stopped at a Galactic Legion checkpoint.","A scrap trader offers to sell you a rusty old bot and box of parts.","A patrol is knocking on doors demanding information on rebels.","A ship was just shot down nearby.","Word that a connection to the PC has been captured.","Word that the Galactic Legion has destroyed PC's homeworld.","A major storm has halted all travel.","An NPC has betrayed you, the Galactic Legion is on the way.","A festival and hov-zoom racing event.","Broke down vehicle hails you for an emergency lift.","Galactic Legion forces have just arrived in the area.","You're being held by a group of gangsters."],sceneShakeup:["Rival appears.","Ambush.","Something in the environment changes.","Someone gets hurt.","You discover a beneficial opportunity.","New NPC appears.","Resource you had is lost.","You discover a beneficial object.","New Event takes place.","All Danger Clocks advance."],critBlunder:{crit:["You gain useful information.","You gain a minor item or resource.","You gain a tactical advantage.","You double the intended effect."],blunder:["Something thought true now appears false.","You break or lose gear or a resource.","More enemies or obstacles appear.","The intended effect harms you or an ally."]},eventOracle:[{roll:1,verb:"Abandon",subject:"Battle",description:"Foul",activity:"Fighting",omen:"Shadow"},{roll:2,verb:"Acquire",subject:"Enemy",description:"Dark",activity:"Seeking",omen:"Sound"},{roll:3,verb:"Seek",subject:"Path",description:"Modified",activity:"Hunting",omen:"Odor"},{roll:4,verb:"Betray",subject:"Balance",description:"Corrupt",activity:"Learning",omen:"Tracks"},{roll:5,verb:"Return",subject:"Peace",description:"Blocked",activity:"Stealing",omen:"Blood"},{roll:6,verb:"Destroy",subject:"Law",description:"Hidden",activity:"Repairing",omen:"Scorching"},{roll:7,verb:"Plot",subject:"Leader",description:"Refined",activity:"Dying",omen:"Debris"},{roll:8,verb:"Move",subject:"Device",description:"Mystical",activity:"Killing",omen:"Wreckage"},{roll:9,verb:"Begin",subject:"Secret",description:"Strange",activity:"Negotiating",omen:"Disconnected"},{roll:10,verb:"Pursue",subject:"Knowledge",description:"Protected",activity:"Planning",omen:"Voices"},{roll:11,verb:"Control",subject:"Fellowship",description:"Feeble",activity:"Lying",omen:"Message"},{roll:12,verb:"Breach",subject:"Structure",description:"Harsh",activity:"Guiding",omen:"Sparks"},{roll:13,verb:"Guard",subject:"Corruption",description:"Worn",activity:"Demanding",omen:"Footsteps"},{roll:14,verb:"Deliver",subject:"Faction",description:"New",activity:"Examining",omen:"Scratches"},{roll:15,verb:"Oppress",subject:"Weapon",description:"Complex",activity:"Gambling",omen:"Body"},{roll:16,verb:"Hunt",subject:"Ally",description:"Rare",activity:"Hiding",omen:"Damage"},{roll:17,verb:"Secure",subject:"Debt",description:"Broken",activity:"Performing",omen:"Slime"},{roll:18,verb:"Inspect",subject:"Community",description:"Ancient",activity:"Conspiring",omen:"Temperature"},{roll:19,verb:"Protect",subject:"Supply",description:"Grimy",activity:"Escorting",omen:"Blocked"},{roll:20,verb:"Explore",subject:"Vow",description:"Graceful",activity:"Disabling",omen:"Illness"}],eventSpecific:["PC Positive","PC Negative","Far Away Event","Relating to current Mission","NPC Positive","NPC Negative"]},nt={villain:["Crime Lord","Space Monstrosity","Galactic Legion","Legionary Grand Admiral","Dragoon","Lord Commander Vortex"],villainGoal:["Destroy","Enrich","Control","Chaos","Justice","Return"],villainPlan:["Recruit","Poison","Overrun","Silence","Subterfuge","Catastrophe"],villainMeans:["Mercenaries","Beasts","Troops","Technology","Super Weapon","Ancient Magi Arts"],missionType:["Deliver","Rescue","Steal","Destroy","Locate","Negotiate"],missionGoods:["Weapons","Leader","Plans","Base","Magi","Bits"],missionSpot:["Crime Lord","Space Ship","Space Pirates","Remote Planet","Bounty Hunter","Base"],missionReward:["Ally","Bits","Key","Weapon","Item","Tactical Advantage"],quickMission:["Locate","Steal","Rescue","Protect","Sabotage","Destroy"],quickTarget:["Valuable contraband / Bounty Hunter target","Prototype Tech / Captured prince","Blackmail / Small but formidable creature","Powerful relic / Crime Lord confidant","Forbidden knowledge / Legionary high-up","Legionary Super Weapon / Bot with secret plans"],scenarios:[{title:"The Planet Gun",desc:"Legion using super hyperdrive to smash planets together. Drop antiparticle bomb in core to destroy."},{title:"Bot-Mind Overlord",desc:"Colossal bot mind reprogramming billions. Install data tape countermind to wipe memory banks."},{title:"The Antispace Circuit",desc:"Pirate warstation disabling hyperdrives. Activate thrusters to misalign circuit and destroy field."},{title:"The Doomsday Engine",desc:"Floating mega-factory disassembling planets. Kill Lord Commander Vortex on throne to tear machine apart."},{title:"The Magi Harvester",desc:"Extracting Magi powers for Immortals. Demolish ancient necropolis foundation to collapse facility."},{title:"The Pangalactic Teleporter",desc:"Instant troop travel via pulsar station. Sabotage super-solar collectors to malfunction permanently."}]},_e={sceneLocation:["Wilderness","Wilderness","Settlement","Settlement","Space Ship","Base"],sceneTone:["Too quiet","Lively","On alert","Secretive","Dangerous","Cryptic"],sceneObstacle:["Wildlife / Alien Beast","Guards / Security","Terrain / Weather","Lock / Barrier / Trap","NPC","Villain"],urgentObstacles:["Fire spreading towards fuel/people (D2+1 rounds).","Tremors/Unstable footing, chasm opening (D2+1 rounds).","Flooding with toxic gas/insects/sewage (D2+1 rounds).","Turret calibrating / Monster waking / Machine approaching (D2+1 rounds).","Evidence of battle discovered soon, area on high alert in 20 mins.","Public execution / Prison barge departing / Weapon firing (4 rounds)."],generalMishaps:[{roll:1,title:"LURKING MONSTER",desc:"The trash chute leads to a swampy dump with an enormous alien beast that eats trash AND people."},{roll:2,title:"AMBUSH",desc:"There's a Bounty Hunter with a Net Launcher waiting by the back exit."},{roll:3,title:"INCLEMENT WEATHER",desc:"Escaping outside leads into dangerous lightning storms (landslides, low atmosphere, acid floods). Maybe it was better to stay inside?"},{roll:4,title:"STINK BOMB",desc:"The explosion used for a distraction erupts in a cloud of choking poison. It spreads quickly, leaving anyone who breathes it in agonising pain (sick, paralyzed, hypnotic visions)."},{roll:5,title:"TRACKING DEVICE",desc:"When the Rebels finally get to rest, they realize they've been tagged with a tracking beacon. A deadly Murder Bot is on its way."},{roll:6,title:"A MYSTERY UNFOLDS",desc:"Rumors have led the Rebels this far, but the only way to discover the truth is to go deeper inside, where even greater dangers lurk."}],spaceObstacles:["Debris field of destroyed ships/warheads.","Asteroid field infested with Space Worms.","Stellar nursery with explosive gas.","Comet Tail with freezing fog.","Space Lane Traffic Jam.","Freak Ion Pulse disabled ships."],hyperspaceMishaps:["Timespace Rift (Your future ship needs help).","Uncharted Hypermagnetic Storm.","Magi Temple Ship (Near black hole).","Hyperspace Femtosharks.","Protocol Bot Corsairs (Polite robbery).","Rebel Distress Signal (Trap)."],planetTerrain:["Mountainous/Wasteland","Swampy/Canyonlands","Fungal/Desert","Forested/Oceanic","Barren/Hilly","Volcanic/Crystalline"],planetWeather:["Frozen","Rain","Arid","Windy","Static Storms","Pleasant"],planetColor:["Blue","Green","Yellow","Brown","Red","White"],planetPopulation:["Hundreds","Hundreds","Thousands","Thousands","Millions","Outpost/Abandoned"],planetControl:["Local Gov","Rebels","Pirates","Crime Lord","Galactic Legion","Galactic Legion"],settlementAppearance:["Colorful tents","Mobile huts","Circular buildings on stilts","Container towers","Underground bunkers","Dusty low buildings","Floating villas","Stone ziggurat","Stacked modular highrises","Legion-constructed prefabs"],settlementKnownFor:["Rebels","Trade","Information","Carousing","Transports","Mining","Prison","Trade","Racing","Legion"],settlementCurrentState:["Noisy / Chaotic","Dangerous / Curfew","Quiet / Industrious","Political Upheaval","Preparing for threat","Suspicious locals","Fertile / Productive","Wild / Overgrown","Sleepy / Docile","Seized by Legion"],settlementComplication:["Electrical storms","Flood / Quake","Creatures","Crime","Science","Illness","Dark omen","Raiders","Factional warfare","Revolt"],settlementLeader:["Crime Lord","Galactic Legion","Elected Leader","Two separate Gangsters","Exiled Smuggler","Space Pirates"],settlementLandmark:["Neon obelisk","Crashed ship","Dark grey prison building","Large fountain plaza","Tall communications tower","Hill with glass roof"],settlementRumors:["Map","Gear","Secret information","Combat","Hacking","Uprising"],settlementHookups:["Transfer of Bits","Stolen information","Disguised Magi","Weapons cache","Transport","Huge refining factory"],planetFeatures:["Desert of dead sea salt, bleached coral, boneyards.","Pits of gurgling mud and geysers.","Bottomless misty canyons with petrified trees.","Lakes of bioluminescent scum beneath sunless sky.","Choking black dust storms, electro lanterns needed.","Industrial sludge waves, red lightning clouds.","Creeping vines/tropical trees reclaiming megacity.","Craters of scorched glass, fulgurite pillars.","Partially constructed ring station on asteroids.","Revelers lounging in hallucinogenic fungal colonies."],backwaters:["High atmosphere gas mining operations.","Spice-dust farmstead with malfunctioning bots.","Space ice quarry carving comet blocks.","Pre-terraforming fertilizer crew.","Bot graveyard (Grand Galactic Backup).","Slime rigs on moon-sized protoplasm."],backalleys:["Flickering hologram signs in factory smog.","Snow/sleet from refrigeration unit.","Iridescent oil pools under solar dome.","Scaly hides drying in sweltering air.","Tethered dynamo towers sapping aurora energy.","Razorleaf vines taking over hovels."],hiddenFeatures:["Downtrodden locals ready to rise up!","Secret network of local Rebels.","Old friend working on the inside.","Vault full of bits.","Concealed weak point.","Secret back entrance.","Readily available stimpacks.","The Rebels' map doesn't match location.","Rigged to explode.","IT'S A TRAP!"],locationDangers:["Swarming with Legionary Foot Soldiers.","Team of Bounty Hunters.","Security cameras everywhere.","Space Pirates using Rebels as distraction.","Hungry wildlife.","Impenetrable force fields.","Guarded by laser turrets.","Patrolling security bots.","Caged Space Monstrosity.","Bottomless pit."]},Hl={features:[{roll:1,ship:"Plain",base:"Dormitory",obstacle:"Bot",search:"Junk"},{roll:2,ship:"Barracks",base:"Holding",obstacle:"Alarm",search:"Scrap (Tradeable to right client)"},{roll:3,ship:"Pod Bay",base:"Storage",obstacle:"Enemy",search:"Bot Parts"},{roll:4,ship:"Workshop",base:"Fighting Pit",obstacle:"Enemy",search:"Goods (Worth Bits on Black Market)"},{roll:5,ship:"Comms",base:"Parts",obstacle:"Enemy",search:"Eye / Headwear"},{roll:6,ship:"Medical",base:"Trash",obstacle:"Missile",search:"Clothing"},{roll:7,ship:"Hangar",base:"Mess",obstacle:"Debris",search:"Datapad"},{roll:8,ship:"Trash",base:"Torture",obstacle:"Trap",search:"Stimpack"},{roll:9,ship:"Scrap",base:"Cage",obstacle:"Lost",search:"Repair Toolkit"},{roll:10,ship:"Mess",base:"Armory",obstacle:"Monster",search:"Bits"},{roll:11,ship:"Life Support",base:"Laboratory",obstacle:"Barrier",search:"Power Pack / Battery"},{roll:12,ship:"Interrogation",base:"Cantina",obstacle:"Shaft",search:"Melee Weapon"},{roll:13,ship:"Prison Cells",base:"Lounge",obstacle:"Environment",search:"Ranged Weapon"},{roll:14,ship:"Mission Deck",base:"Gambling",obstacle:"Device",search:"Thrown Weapon"},{roll:15,ship:"Officer Quarters",base:"Storage",obstacle:"Ambush",search:"Random Gear"},{roll:16,ship:"Armory",base:"Vault",obstacle:"Crushing",search:"Armor"},{roll:17,ship:"Science",base:"Quarters",obstacle:"Distraction",search:"Legionary Equipment"},{roll:18,ship:"Cargo",base:"Hover-Port",obstacle:"Surveillance",search:"Special Item"},{roll:19,ship:"Bridge",base:"Generator",obstacle:"Resources",search:"Keycard"},{roll:20,ship:"Power",base:"Comms",obstacle:"Gas",search:"Ally"}]},gt={travelTheme:["Hostility","Trade","Tracking","Smuggling","Battle","Assistance","Wreck","Science","Religion","Weather"],travelActor:["Legionary Troopers","Caravan","Bounty Hunter","Gangsters","Crime Lord","Survivors","Space Pirates","Refugees","Alien Beast","Monstrosity"],npcRoles:["Soldier","Bounty Hunter","Smuggler","Commoner","Youth","Magi","Guard","Criminal","Pilot","Bot","Gangster","Mercenary","Clone","Trader","Mechanic","Politician","Hacker","Gambler","Leader","Healer"],npcSpecies:["Baseline Human","Woolly Anthrosquatch","Fish-eyed Ichthyoid","Scaley Lacertian","Flatheaded Tricladid","Runtish Zinto","Sucker-lipped Anuran","Flightless Macrobat","Lithe Pseudopoid","Little Ursanid","Ocular Picaroo","Flammari Siren","Ratling Ambau","Avian Caldecta","Horned Thernee","Cerebral Roothan","Bantam Clookoo","Waifish Nilata","Green Mardonalians","Pale Vril-ya"],npcMotivations:["Revenge","Truth","Belonging","Adventure","Favor","Mentor","Discipline","Chaos","Reputation","Connection","Wealth","Rebellion","Power","Discovery","Redemption","Peace","War","Death","Love","Justice"],npcSecrets:["Killed someone powerful","Owns valuable data pad","Noble birth","Wealthy","Has mystical pull","Desires power","Will betray","Has bunker of stolen goods","Never been in battle","Holding valuable info","Wants to be someone else","Wanted fugitive","Stolen identity","Lost family in conflict","Deserter","Wants war","Collects scandalous info","Massive debt","Is a Clone","More powerful than lets on"],npcTraits:["Tattoo on face","Ragged clothes","Visible scar","Drunkard","Well-dressed","Missing eye","Tall","Missing hand","Big hair","Charming voice","Bristly beard","Gaunt","Covered hand","Rotten teeth","Mechanical leg","Facial birthmark","Pierced chin","Sideburns","Glasses","Beaded beard"],npcDemeanor:["Stoic","Harsh","Jovial","Menacing","Thoughtful","Warm","Hostile","Chatty","Greedy","Humorous","Merciful","Terse","Needy","Mopey","Ambitious","Aggressive","Polite","Lazy","Anxious","Kind"],rebelContacts:["Gwarark (Grumpy Anthrosquatch)","TN-60 (Talkative Bot)","Boomer (Sly Roothan)","Selene (Guilty Avian)","Tuz Rix (Experienced Ichthyoid)","Bamro (Radical Ursanid)"],weirdoAliens:["Ylat Dara (Conniving Anuran)","Erden Rainsinger (Enthusiastic Mardonalian)","Kodo Shif (Suave Thernee)","Corde Nenu (Bored Flammari)","Tillie Winai (Curious Pseudopoid)","Gorts (Grunting Lacertian)","Shoom (Aloof Macrobat)","Cataru (Keen Zinto)","HD-3N (Dull Bot)","Valin Pax (Reclusive Magi)"],reactions:["Hostile","Betray","Angered","Cautious","Indifferent","Curious","Friendly","Helpful"]},Ze={baselineFirst:["Mason","Wren","Alex","Luca","Harper","Teagan","Ellis","Vick","Dylan","Jace"],botNamePrefixes:["XT","RY","KT","Q","VV","ZZT","L5R","NTH","ALT","TM"],botNameSuffixes:["64","90","37","88","42","5E","02","16","F4","006"],familyNames:["Parsec","Lighthour","Cotorn","Bastion","Outlander","Quasar","Voyager","Hadron","Fraction","Lysander"],shipNames:["Z / Wing","Midnight / Bolt","Crimson / Ray","Violet / Baroness","Boreal / Storm","Nova / Dragon","Shadow / Huntress","Light / Banshee","Fallen / Chimera","Centurion / Hawk"],shipNameFirstParts:["Androm","Anth","Aph","Aqu","Ar","Arc","Ast","Astr","Ath","Aur","Bell","Cael","Cap","Cass","Cast","Ch","Chron","Cr","Crys","Cyg","D","Dr","Drac","El","Elys","Erid","Eryth","G","Gal","Galax","Geos","H","Heli","Hesp","Hul","Hulv","Hydr","Hyp","Icar","Ir","Jup","L","Lar","Lum","Lumi","Lun","Lyr","M","Mar","Min","Mon","N","Neb","Nep","Nept","Nim","Nom","Nov","Nyx","Or","Os","P","Peg","Per","Pers","Ph","Phaet","Pis","Plut","Pol","Prox","Pyr","Pyth","R","Rhex","Rhiz","S","Sel","Selen","Sol","Solar","Solv","Stas","Stel","Styg","T","Tar","Taur","Th","Thalas","Tir","Titan","Ur","Urb","Urs","V","Vir","Virg","Z","Zeph"],shipNameSecondParts:["a","adan","aelios","aidon","alis","an","anithos","anthys","antia","aphos","ar","ara","aras","arax","archos","arex","aria","arion","aros","arpos","arubra","aryx","as","aster","astra","astria","astrias","astro","ate","athos","axis","edon","elios","ella","emoros","eneon","eneus","entus","eon","eonia","eonis","ephyra","erato","eratus","ere","erium","eron","erra","ex","exus","ia","iarex","ichthon","idon","ilia","ilion","ima","imatra","ina","ion","ios","ipolis","irra","is","isaurum","isilva","ithos","ius","oclia","ocris","odon","olis","olith","on","onexus","onis","onox","onyx","or","ora","oria","oros","os","oterra","otos","ox","ubra","ulon","ulos","urox","us","usis","usmaris","ux","ygia","ympus","ys","ythos","ythron","yx"],planetNames:["Corinath","Mardestine","Poxor","Faergonh","Bal'poex","Hurs-V","Laerdwu","Muwh_13","Cirgo","Cordinnia","Gornath","Jagost","Xirnoth","Qul","Otr System","Rusgith Major","Sartun","Dornsu","Vilnix","Lormae 6"],settlementNames:["Ger / -atoom","Nabeck / -rikaant","Dablar / -ordest","Grim / -cite","Saar / -tex","Hyro / -avor","Popwa / -dorp","Urvok / Outpost","Vandirg / City","Tar / Station"],settlementNamePrefixes:["Ger","Nabeck","Dablar","Grim","Saar","Hyro","Popwa","Urvok","Vandirg","Tar"],settlementNameSuffixes:["-atoom","-rikaant","-ordest","-cite","-tex","-avor","-dorp","Outpost","City","Station"],legionaryNames:["Aelia / Albus","Caelia / Calvus","Decima / Domitius","Fabricia / Faustus","Galla / Gaius","Juliana / Jovian","Marcella / Maximus","Sabina / Scorpio","Tatiana / Tiberius","Vita / Virgil"],bountyHunterNames:["Harkin 'The Red'","Graven","Boris Deadlock","Ragna Nebula","Cassandra Syko","Sskob","Scotch Torga","H3-0"],crimeLordNames:["Andras 'the Duke'","Witch of Baa","Blood Prince Odaros","'Crusher' Vuul","Shax 'Kingpin of Krysar'","Dr. Raum","Brainy Zelez","Voynix 'the Bookie'","'Numbers'","Yurdra 'the Jeweler'"],pirateCrewNames:["Bloody Bots","Gnar Dogs","Rogue Gang","Lost Squad","Shiver Hellions","Dread Posse","Wicked Raiders","Skull Scoundrels","Deep Legends","Wild Pirates"]},la={bobsWeapons:["Utility Knife (D4 damage)","Upcycled Staff (D4 damage)","Modified Shock Baton (D6, shoddy)","Pocket Blaster (D6, reload)","Old Service Blaster (D6 damage)","Busted Blaster Rifle (D8, bulky, shoddy)"],bobsGear:["Deck of Hologram Playing Cards","Binocular with Laser Microphone","Legionary Bot Head (answers one question, then explodes D8)","Space Helmet with 5 minutes of air","Counterfeit Bits","Collapsible Gravbike (shoddy)"],bobsArmor:["Tattered Robes over a Tunic","Scuffed Boots and Smudged Goggles","Patched-up Flight Suit","Bandoleer and Vest","Scarf and Leather Jacket (tier 1, -D2)","Scavenged Bot Plate Armor (tier 2, -D4)"],galacticSpecies:["Baseline Human","Woolly Anthrosquatch","Fish-eyed Ichthyoid","Scaley Lacertian","Flatheaded Tricladid","Runtish Zinto","Sucker-lipped Anuran","Flightless Macrobat","Lithe Pseudopoid","Little Ursanid"],rebelMotivations:["Destroy criminal record database.","Free long lost twin from prison.","Find cure for pet space lizard.","Solve cold case of what happened years ago.","Convince childhood friend to defect.","Revenge on elusive adversary.","Repay favor to Rebel General.","Prove you aren't a low-life.","Protect best pal on the mission.","Atonement: You caused this crisis."],nicks:["Hilt of Magi Blazer Sword (2D6 damage)","Polished breastplate with family crest (Tier 2, -D4)","Pair of blaster pistols and badge (2D4 damage)","Disintegrator rifle (D8, reload)","Coded research notes on Legion Superweapon","Signet ring of noble house"],knacks:["Burdogs Body (Roll highest stat when following orders)","Busker (Techno-harp distraction)","Bootshiner (Blend in)","Cutpurse (Sticky fingers)","Tinkerer (Understand bots)","Mucker (Search garbage)"],broken:[{roll:1,result:"Unconscious D4 rounds, awaken with D4 HP."},{roll:2,result:"Roll D6: 13 Broken Limb, 45 Severed Limb, 6 Lost Eye. Unconscious D4 rounds."},{roll:3,result:"Severe Injury! Death in 1 hour unless treated. All tests DR16/DR18."},{roll:4,result:"Dead! Roll a new Rebel."}]},bn={botFunctions:["Protocol (Translate/Bureaucracy)","Porter (Lifting/Hauling)","Supervisor (Tiny repair bot)","Computer Interface (Talk to systems)","Power (Walking battery)","Surveillance (Fly/Scan)"],botMalfunctions:["Exterminate (Attack randoms)","Warning Critical Error (Freeze)","Bugged Audio (Repeat words)","Archived Memories (Wrong function)","Trick Leg (Dislocate)","Screw Loose (No stealth)"],botMods:["Retractable Bone Saw","Smuggling Compartment","Comm Scrambler","Legion Cypher","Trash Compactor Torso","Self Destruct"],bountyHunterSkills:["Rough Rider (Ride anything)","Escape Artist (Slip bonds)","Deserter (Know Legion tactics)","Tracker (Find prey)","Bouncer (Unarmed combat)","Armorer (Start with Tier 3 Armor)"],bountyHunterSoftSpots:["Helpless little creatures.","Youthful whippersnappers.","Simple folk making ends meet.","Mistreated bots.","Elderly curmudgeons.","Wounded veterans."],magiArts:["Mind Muddle","Magi Hand","Blaster Deflect","Healing Touch"],smugglerTricks:["Ceramic Knife","Eyeball Blaster","Psychogun","Monofilament Garrote","Sonic Grenade","Vapor Tooth"],technicianScratchBuilds:["Hyperspace Transporter Pack","Zero Blaster","Gravity Disruptor","Cloaking Device","Machine Mind Dominator","Devastator Fist"]},hS={spaceJunk:["Scrapped Bot parts","Dim Fusion Lantern","Glitched Data Pad","Discarded Key Card","Flimsy Trip Mine","Shoddy Blaster D6","Broken Blazer Sword","Bits"]},Vn={beastAdaptations:["Stalker: Always attacks first.","Ferocious: Attacks twice per round (DR10 to hit).","Stinger: D6 damage + D2 next round.","Carapace: Armor tier 3 -D6.","Bile: Regurgitates acid puddles (D10).","Wings: DR14 to hit with melee attacks."],monstrosityAdaptations:["Calcified Shell: Can only target Weak Spot with Melee.","Gigantic: Double damage attacks, Rebels defend with Advantage.","Horrid: Rebels test PRS DR12 or skip first turn.","Bioelectric: Melee attackers take D6 damage.","Venomous: Target suffers D2 damage every turn until treated.","Jaws: Bite holds target (D6/turn), STR DR14 to escape."],weakSpots:["Glowing Eye","Pulsating Core","Soft Underbelly","Old Wound","Open Mouth","Missing Exoskeleton Plate"],monsterNames:{prefix:["Rukkadon","Wroat","Irragorr","Phyto","Vorpal","Xith","Kanth","Jadoon","Balo","Zodan"],suffix:["Beast","Kraken","Raptor","Worm","Dragon","Hound","Brute","Beak","Hog","Crawler"]}},$u={meleeWeapons:["Knife (D4)","Chain Whip (D4)","Slash Staff (D4)","Quakehammer (D6)","Taser Baton (D6)","Rivet Gun (D8, bulky)","Sonic Mining Drill (D8, bulky)","Battle Axe (D8, bulky)","Blazer Sword (2D6)"],rangedWeapons:["Hold-Out Blaster (D4)","Blaster Pistol (D6)","Blaster Rifle (D8, bulky)","Scatter Blaster (2D4, blast)","Bolt Caster (D10, bulky)","Rocket Launcher (D12, blast)"],gear:["Magnetic Boots","Grapple Hook","Repair Toolkit","Battery Lamp","Lockpicking Kit","Grav-Lock Manacles","Stimpack","Shortwave Communicator"]},fg={personnel:[{name:"Minion",hp:"6-12",morale:"7",armor:"None",weapon:"Blaster D6",notes:"Rebels roll DR12 AGI to dodge."},{name:"Leader",hp:"12-24",morale:"10",armor:"Tier 2 (-D4)",weapon:"D8 or D10",notes:"Rebels roll DR14 AGI to dodge."},{name:"Legionary Foot Soldier",hp:"6 (Fodder)",morale:"6 (Squad 8)",armor:"Tier 1 (-D2)",weapon:"Blaster D6",notes:"Dies in 1 hit."},{name:"Legionary Officer",hp:"6",morale:"9",armor:"None",weapon:"Sidearm D6",notes:"Calls D4 backup."},{name:"War Bot",hp:"12",morale:"-",armor:"Tier 2 (-D4)",weapon:"Blaster D6",notes:"Ceaseless."},{name:"Dragoon (Elite)",hp:"40",morale:"10",armor:"Tier 2 (-D4)",weapon:"Blazer Sword 2D6",notes:"Magi Arts. DR14 to defend."},{name:"Space Pirate",hp:"8",morale:"7",armor:"None",weapon:"Blaster D6",notes:"Slippery."},{name:"Bounty Hunter (Elite)",hp:"14",morale:"10",armor:"Tier 2 (-D4)",weapon:"Pulse Rifle D6+1",notes:"Greedy."}],monsters:[{name:"Alien Beast",hp:"12",morale:"9",armor:"Tier 1 (-D2)",weapon:"Bite/Claw D8",notes:"Wilds."},{name:"Space Monstrosity",hp:"45",morale:"10",armor:"Carapace -D8",weapon:"Tusk/Talon D10",notes:"Weak Spot DR16."}]},Tt={theEpic:{col1:["The","The","The","A","A","Attack"],col2:["New","Rise","Fall","Last","Void","Prophecy"],col3:["Hope","Empire","Cosmic","Ascending","Shadow","Sword"],col4:["Prophet","War","Gambit","Star","Gods","Exile"]},theEpisode:{col1:["The","The","The","A","A","NPC Name"],col2:["Cage","Trap","Flight","Final","Doppelganger","Errand"],col3:["Dagger","Plot","Operation","Metamorphosis","Journey","Hidden"],col4:["Doom","Arena","Garden","Separation","Home","Sacrifice"]}},fS={boost:["Star / Compass / Direction","Skull / Death / Danger","Blaster / Attack / Conflict","Droid / Tech / AI","Atom / Science / Energy","Cloak / Hidden / Secret","Monster / Beast / Wild","Arrow / Up / Rise","Remote / Control / Signal","Mask / Deception / Persona","Planet / World / Environment","TIE Fighter / Enemy / Empire","Hand / Stop / Help","Spiral / Confusion / Hypnosis","Card / Chance / Gamble","Boot / Kick / Travel","Mushrooms / Nature / Growth","Trash / Container / Loot","Radar / Search / Scan","Saber / Weapon / Power"]},Ks={dastardlyWeapons:["Homing Missile (D6, DR14 to dodge)","Laser Eye Beams (D6, fire at any time)","Bits Blaster (D8, fires currency)","Repeating Bolt Caster (D10, bulky, no reload)"],lordlyVisages:["Bloated slug with stimulant gas tanks.","Enormous pulsating brain in a jar.","Bickering two-headed bot.","Colossal hologram (real body hidden).","Battle-scarred Legionary dragoon.","Slobbering chitinous queen in royal jelly."],criminalBases:["Souped-up spaceship orbiting a blackhole.","Floating palace in gas giant tempest.","Grand penthouse on throne world.","Decommissioned military fortress.","Submersible arena on swamp world.","Sewage nexus station beneath starport."]};function te(s){return Math.floor(Math.random()*s)+1}function oa(s){return!s||s.length===0?"Table not found or empty":s[Math.floor(Math.random()*s.length)]}function Hu(){const s=te(20);if(s===1)return{roll:s,...at.affirmation[1]};if(s>=2&&s<=3)return{roll:s,...at.affirmation["2-3"]};if(s>=4&&s<=5)return{roll:s,...at.affirmation["4-5"]};if(s>=6&&s<=7)return{roll:s,...at.affirmation["6-7"]};if(s>=8&&s<=9)return{roll:s,...at.affirmation["8-9"]};if(s>=10&&s<=11)return{roll:s,...at.affirmation["10-11"]};if(s>=12&&s<=13)return{roll:s,...at.affirmation["12-13"]};if(s>=14&&s<=15)return{roll:s,...at.affirmation["14-15"]};if(s>=16&&s<=17)return{roll:s,...at.affirmation["16-17"]};if(s>=18&&s<=19)return{roll:s,...at.affirmation["18-19"]};if(s===20)return{roll:s,...at.affirmation[20]}}function mS(){const s=te(20),a=te(20),i=te(20),o=te(20),u=te(20),h=te(6);return{roll:s,verbRoll:s,subjectRoll:a,descRoll:i,activityRoll:o,omenRoll:u,specificRoll:h,verb:at.eventOracle[s-1].verb,subject:at.eventOracle[a-1].subject,description:at.eventOracle[i-1].description,activity:at.eventOracle[o-1].activity,omen:at.eventOracle[u-1].omen,specific:at.eventSpecific[h-1]}}function pS(s=1){const a=te(20),i=a+s,o=i>=15;let u=null;if(o){const h=te(20),f=h+s,p=Math.min(f-1,at.sceneShakeup.length-1);u={d20:h,roll:f,result:at.sceneShakeup[p]}}return{checkRoll:a,threatDie:s,total:i,success:o,shakeup:u}}function gS(){const s=te(nt.missionType.length),a=te(nt.missionGoods.length),i=te(nt.missionSpot.length),o=te(nt.missionReward.length);return{typeRoll:s,goodsRoll:a,spotRoll:i,rewardRoll:o,type:nt.missionType[s-1],goods:nt.missionGoods[a-1],spot:nt.missionSpot[i-1],reward:nt.missionReward[o-1]}}function yS(){const s=te(nt.quickMission.length),a=te(nt.quickTarget.length);return{actionRoll:s,targetRoll:a,action:nt.quickMission[s-1],target:nt.quickTarget[a-1]}}function bS(){const s=te(nt.villain.length),a=te(nt.villainGoal.length),i=te(nt.villainPlan.length),o=te(nt.villainMeans.length);return{villainRoll:s,goalRoll:a,planRoll:i,meansRoll:o,villain:nt.villain[s-1],goal:nt.villainGoal[a-1],plan:nt.villainPlan[i-1],means:nt.villainMeans[o-1]}}function xS(){const s=te(gt.npcRoles.length),a=te(gt.npcSpecies.length),i=te(gt.npcMotivations.length),o=te(gt.npcSecrets.length),u=te(gt.npcTraits.length),h=te(gt.npcDemeanor.length);return{roleRoll:s,speciesRoll:a,motivationRoll:i,secretRoll:o,traitRoll:u,demeanorRoll:h,role:gt.npcRoles[s-1],species:gt.npcSpecies[a-1],motivation:gt.npcMotivations[i-1],secret:gt.npcSecrets[o-1],trait:gt.npcTraits[u-1],demeanor:gt.npcDemeanor[h-1]}}function vS(){const s=te(_e.planetTerrain.length),a=te(_e.planetWeather.length),i=te(_e.planetColor.length),o=te(_e.planetPopulation.length),u=te(_e.planetControl.length),h=te(Ze.planetNames.length);return{terrainRoll:s,weatherRoll:a,colorRoll:i,populationRoll:o,controlRoll:u,nameRoll:h,terrain:_e.planetTerrain[s-1],weather:_e.planetWeather[a-1],color:_e.planetColor[i-1],population:_e.planetPopulation[o-1],control:_e.planetControl[u-1],name:Ze.planetNames[h-1]}}function wS(){const s=te(_e.settlementAppearance.length),a=te(_e.settlementKnownFor.length),i=te(_e.settlementCurrentState.length),o=te(_e.settlementComplication.length),u=te(_e.settlementLeader.length),h=te(_e.settlementLandmark.length),f=te(_e.settlementRumors.length),p=te(_e.settlementHookups.length),m=te(Ze.settlementNamePrefixes.length),g=te(Ze.settlementNameSuffixes.length),x=Ze.settlementNamePrefixes[m-1],j=Ze.settlementNameSuffixes[g-1],v=`${x}${j}`;return{appearanceRoll:s,knownForRoll:a,currentStateRoll:i,complicationRoll:o,leaderRoll:u,landmarkRoll:h,rumorsRoll:f,hookupsRoll:p,namePrefixRoll:m,nameSuffixRoll:g,appearance:_e.settlementAppearance[s-1],knownFor:_e.settlementKnownFor[a-1],currentState:_e.settlementCurrentState[i-1],complication:_e.settlementComplication[o-1],leader:_e.settlementLeader[u-1],landmark:_e.settlementLandmark[h-1],rumors:_e.settlementRumors[f-1],hookups:_e.settlementHookups[p-1],name:v}}function jS(){const s=te(_e.sceneLocation.length),a=te(_e.sceneTone.length),i=te(_e.sceneObstacle.length);return{locationRoll:s,toneRoll:a,obstacleRoll:i,location:_e.sceneLocation[s-1],tone:_e.sceneTone[a-1],obstacle:_e.sceneObstacle[i-1]}}function SS(s=1){const a=te(20),i=a+s,o=i>=12;let u=null;if(o){const h=te(gt.travelTheme.length),f=te(gt.travelActor.length);u={themeRoll:h,actorRoll:f,theme:gt.travelTheme[h-1],actor:gt.travelActor[f-1]}}return{checkRoll:a,threatDie:s,total:i,success:o,encounter:u}}function ql(s=1){const a=te(20),i=te(20),o=te(20),u=te(20),h=te(20),f=h+s,p=f>=12;return{shipRoll:a,baseRoll:i,obstacleRoll:o,searchRoll:u,threatRoll:h,threatTotal:f,threatDie:s,obstacleTriggered:p,ship:Hl.features[a-1].ship,base:Hl.features[i-1].base,obstacle:Hl.features[o-1].obstacle,search:Hl.features[u-1].search}}function NS(){const s=te(6),a=te(6),i=te(6),o=te(Vn.monsterNames.prefix.length),u=te(Vn.monsterNames.suffix.length);return{beastRoll:s,monstrosityRoll:a,weakSpotRoll:i,namePrefixRoll:o,nameSuffixRoll:u,beast:Vn.beastAdaptations[s-1],monstrosity:Vn.monstrosityAdaptations[a-1],weakSpot:Vn.weakSpots[i-1],name:`${Vn.monsterNames.prefix[o-1]} ${Vn.monsterNames.suffix[u-1]}`}}function _S(){const s=te(Tt.theEpic.col1.length),a=te(Tt.theEpic.col2.length),i=te(Tt.theEpic.col3.length),o=te(Tt.theEpic.col4.length);return{col1Roll:s,col2Roll:a,col3Roll:i,col4Roll:o,col1:Tt.theEpic.col1[s-1],col2:Tt.theEpic.col2[a-1],col3:Tt.theEpic.col3[i-1],col4:Tt.theEpic.col4[o-1]}}function kS(){const s=te(Tt.theEpisode.col1.length),a=te(Tt.theEpisode.col2.length),i=te(Tt.theEpisode.col3.length),o=te(Tt.theEpisode.col4.length);return{col1Roll:s,col2Roll:a,col3Roll:i,col4Roll:o,col1:Tt.theEpisode.col1[s-1],col2:Tt.theEpisode.col2[a-1],col3:Tt.theEpisode.col3[i-1],col4:Tt.theEpisode.col4[o-1]}}function TS(){const s=te(Ze.crimeLordNames.length),a=te(Ks.lordlyVisages.length),i=te(Ks.dastardlyWeapons.length),o=te(Ks.criminalBases.length);return{nameRoll:s,visageRoll:a,weaponRoll:i,baseRoll:o,name:Ze.crimeLordNames[s-1],visage:Ks.lordlyVisages[a-1],weapon:Ks.dastardlyWeapons[i-1],base:Ks.criminalBases[o-1]}}function ES(){const s=oa(Ze.shipNameFirstParts),a=oa(Ze.shipNameSecondParts);return`The ${s}${a}`}function RS(){const{gameState:s,updateGameState:a,addLog:i}=Pe(),[o,u]=O.useState(""),[h,f]=O.useState(6),[p,m]=O.useState(!1),g=()=>{if(!o.trim()){m(!0),setTimeout(()=>m(!1),400);return}const w={id:Date.now().toString(),title:o,length:h,progress:0};a({missions:[...s.missions,w]}),i(`New mission added: ${o}`,"mission"),u("")},x=(w,_)=>{const S=s.missions.find(q=>q.id===w),E=s.missions.map(q=>q.id===w?{...q,progress:_}:q);a({missions:E}),_===S.length&&i(`Mission completed: ${S.title}`,"success")},j=w=>{const _=s.missions.find(S=>S.id===w);a({missions:s.missions.filter(S=>S.id!==w)}),i(`Mission removed: ${_.title}`,"info")},v=w=>{const _=s.missions.find(I=>I.id===w);if(!_)return;const E={4:10,6:12,8:14,10:16}[_.length]||12,q=te(20),U=q+_.progress;if(U>=E)i(`Mission completion [${q}] + [${_.progress}] = ${U} vs DR${E}  SUCCESS! "${_.title}" completed!`,"success"),a({missions:s.missions.filter(I=>I.id!==w)});else{i(`Mission completion [${q}] + [${_.progress}] = ${U} vs DR${E}  FAIL. Remove 1 progress, increase Threat Die.`,"danger");const I=s.missions.map(L=>L.id===w?{...L,progress:Math.max(0,L.progress-1)}:L);a({missions:I})}};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",placeholder:"Enter mission objective...",value:o,onChange:w=>u(w.target.value),onKeyPress:w=>w.key==="Enter"&&g(),className:`w-full px-3 py-2 bg-bg-primary border-2 border-accent-cyan text-text-primary focus:outline-none focus:border-accent-yellow focus:shadow-[0_0_15px_rgba(255,252,0,0.4)] transition-all duration-300 font-orbitron ${p?"input-shake border-accent-red":""}`}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:h,onChange:w=>f(Number(w.target.value)),className:"flex-1 px-3 py-2 bg-bg-primary border-2 border-accent-cyan text-text-primary focus:outline-none focus:border-accent-yellow focus:shadow-[0_0_15px_rgba(255,252,0,0.4)] transition-all duration-300 font-orbitron [&>option]:bg-bg-secondary [&>option]:text-text-primary",children:[r.jsx("option",{value:4,className:"bg-bg-secondary text-text-primary",children:"Short / Easy (DR10)"}),r.jsx("option",{value:6,className:"bg-bg-secondary text-text-primary",children:"Average / Normal (DR12)"}),r.jsx("option",{value:8,className:"bg-bg-secondary text-text-primary",children:"Long / Difficult (DR14)"}),r.jsx("option",{value:10,className:"bg-bg-secondary text-text-primary",children:"Galaxy Saving (DR16)"})]}),r.jsxs(de,{onClick:g,variant:"primary",className:"flex items-center gap-2",children:[r.jsx(Fn,{className:"w-4 h-4"}),"Add"]})]})]}),r.jsx("div",{className:"space-y-3",children:s.missions.length===0?r.jsxs("div",{className:"text-center py-8 space-y-2",children:[r.jsx("div",{className:"text-accent-cyan/30 text-4xl mb-2",children:""}),r.jsx("p",{className:"text-gray-500 font-orbitron text-sm",children:"NO ACTIVE MISSIONS"}),r.jsx("p",{className:"text-gray-600 text-xs",children:"Add a mission to track your progress"})]}):s.missions.map(w=>r.jsxs("div",{className:"bg-bg-primary p-3 border-2 border-accent-cyan",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h4",{className:"font-orbitron font-bold text-accent-cyan",children:w.title}),r.jsx("button",{onClick:()=>j(w.id),className:"text-accent-red hover:text-red-400",children:r.jsx(er,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"flex gap-1",children:Array.from({length:w.length}).map((_,S)=>r.jsx("button",{onClick:()=>x(w.id,S+1),className:`flex-1 h-6 border-2 transition-all duration-200 ${S<w.progress?"bg-accent-cyan border-accent-cyan segment-fill":"bg-transparent border-accent-cyan hover:bg-accent-cyan hover:bg-opacity-30 hover:scale-105"} ${S===w.progress-1?"ripple":""} ${w.progress===w.length&&S===w.length-1?"completion-bounce":""}`},S))}),r.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[r.jsxs("span",{className:"text-gray-400 font-orbitron",children:["Progress: ",w.progress," | DR",w.length===4?"10":w.length===6?"12":w.length===8?"14":"16"]}),r.jsxs("button",{onClick:()=>v(w.id),className:"px-2 py-1 bg-transparent border-2 border-accent-yellow text-accent-yellow hover:bg-accent-yellow hover:text-bg-primary transition-all font-orbitron font-bold uppercase text-xs flex items-center gap-1",children:[r.jsx(Xn,{className:"w-3 h-3"}),"Attempt"]})]})]},w.id))})]})}function CS(){const{gameState:s,updateGameState:a,addLog:i}=Pe(),[o,u]=O.useState(""),[h,f]=O.useState(6),[p,m]=O.useState(!1),g=()=>{if(!o.trim()){m(!0),setTimeout(()=>m(!1),400);return}const v={id:Date.now().toString(),title:o,segments:h,filled:0};a({dangerClocks:[...s.dangerClocks,v]}),i(`New danger clock added: ${o}`,"danger"),u("")},x=(v,w)=>{const _=s.dangerClocks.map(E=>E.id===v?{...E,filled:w}:E);a({dangerClocks:_});const S=s.dangerClocks.find(E=>E.id===v);w===S.segments&&i(`DANGER! Clock filled: ${S.title}`,"danger")},j=v=>{const w=s.dangerClocks.find(_=>_.id===v);a({dangerClocks:s.dangerClocks.filter(_=>_.id!==v)}),i(`Danger clock removed: ${w.title}`,"info")};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",placeholder:"Enter looming threat...",value:o,onChange:v=>u(v.target.value),onKeyPress:v=>v.key==="Enter"&&g(),className:`w-full px-3 py-2 bg-bg-primary border-2 border-accent-red text-text-primary focus:outline-none focus:border-accent-yellow focus:shadow-[0_0_15px_rgba(255,252,0,0.4)] transition-all duration-300 font-orbitron ${p?"input-shake border-accent-red":""}`}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:h,onChange:v=>f(Number(v.target.value)),className:"flex-1 px-3 py-2 bg-bg-primary border-2 border-accent-red text-text-primary focus:outline-none focus:border-accent-yellow focus:shadow-[0_0_15px_rgba(255,252,0,0.4)] transition-all duration-300 font-orbitron [&>option]:bg-bg-secondary [&>option]:text-text-primary",children:[r.jsx("option",{value:4,className:"bg-bg-secondary text-text-primary",children:"4 Segments - Imminent"}),r.jsx("option",{value:6,className:"bg-bg-secondary text-text-primary",children:"6 Segments - Building"}),r.jsx("option",{value:8,className:"bg-bg-secondary text-text-primary",children:"8 Segments - Slow Burn"}),r.jsx("option",{value:10,className:"bg-bg-secondary text-text-primary",children:"10 Segments - Long Game"})]}),r.jsxs(de,{onClick:g,variant:"danger",className:"flex items-center gap-2",children:[r.jsx(Fn,{className:"w-4 h-4"}),"Add"]})]})]}),r.jsx("div",{className:"space-y-3",children:s.dangerClocks.length===0?r.jsxs("div",{className:"text-center py-8 space-y-2",children:[r.jsx("div",{className:"text-accent-red/30 text-4xl mb-2",children:""}),r.jsx("p",{className:"text-gray-500 font-orbitron text-sm",children:"NO DANGER CLOCKS"}),r.jsx("p",{className:"text-gray-600 text-xs",children:"Track looming threats and countdowns"})]}):s.dangerClocks.map(v=>{const w=v.filled===v.segments;return r.jsxs("div",{className:`bg-bg-primary p-3 border-2 border-accent-red ${w?"glow-pulse-red":""}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h4",{className:"font-orbitron font-bold text-accent-red",children:v.title}),r.jsx("button",{onClick:()=>j(v.id),className:"text-accent-red hover:text-red-400",children:r.jsx(er,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"relative w-24 h-24 mx-auto my-3",children:[r.jsxs("svg",{viewBox:"0 0 100 100",className:"transform -rotate-90",children:[r.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#1a1a1a",strokeWidth:"10"}),Array.from({length:v.segments}).map((_,S)=>{const E=360/v.segments,q=S*E,U=S<v.filled;return r.jsx("path",{d:AS(50,50,45,q,q+E-2),fill:"none",stroke:U?"#ff003c":"#333",strokeWidth:"10",className:"cursor-pointer hover:opacity-80 transition-all duration-200 hover:stroke-[#ff003c]",style:{transition:"stroke 0.3s ease-out"},onClick:()=>x(v.id,S+1)},S)})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("span",{className:`font-orbitron font-bold text-accent-red text-xl transition-all ${v.filled===v.segments?"completion-bounce text-glow-red":""}`,children:[v.filled,"/",v.segments]})})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsxs("button",{onClick:()=>v.filled>0&&x(v.id,v.filled-1),disabled:v.filled===0,className:"px-3 py-1 bg-bg-primary border-2 border-accent-red text-accent-red hover:bg-accent-red hover:text-bg-primary disabled:opacity-30 disabled:cursor-not-allowed transition-all font-orbitron text-sm flex items-center gap-1",children:[r.jsx(fd,{className:"w-3 h-3"}),"-1"]}),r.jsxs("button",{onClick:()=>v.filled<v.segments&&x(v.id,v.filled+1),disabled:v.filled===v.segments,className:"px-3 py-1 bg-bg-primary border-2 border-accent-red text-accent-red hover:bg-accent-red hover:text-bg-primary disabled:opacity-30 disabled:cursor-not-allowed transition-all font-orbitron text-sm flex items-center gap-1",children:[r.jsx(W1,{className:"w-3 h-3"}),"+1"]})]}),w&&r.jsx("div",{className:"mt-3 border-3 border-accent-red bg-accent-red/10 p-3 inline-alert-pulse",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(wn,{className:"w-4 h-4 text-accent-red flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-orbitron font-bold text-accent-red uppercase text-xs",children:"Danger Triggered!"}),r.jsx("p",{className:"text-text-primary text-xs mt-1",children:"The consequence occurs"})]})]})})]},v.id)})})]})}function AS(s,a,i,o,u){const h=mg(s,a,i,u),f=mg(s,a,i,o),p=u-o<=180?"0":"1";return["M",h.x,h.y,"A",i,i,0,p,0,f.x,f.y].join(" ")}function mg(s,a,i,o){const u=(o-90)*Math.PI/180;return{x:s+i*Math.cos(u),y:a+i*Math.sin(u)}}const pg={D4:r.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 inline-block",fill:"currentColor",children:r.jsx("polygon",{points:"12,4 20,20 4,20",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})}),D6:r.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 inline-block",fill:"currentColor",children:r.jsx("rect",{x:"6",y:"6",width:"12",height:"12",stroke:"currentColor",strokeWidth:"1.5",fill:"none",rx:"1"})}),D8:r.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 inline-block",fill:"currentColor",children:r.jsx("polygon",{points:"12,4 18,9 18,15 12,20 6,15 6,9",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})}),D10:r.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 inline-block",fill:"currentColor",children:r.jsx("polygon",{points:"8,12 12,4 16,12 12,20",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})}),D12:r.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 inline-block",fill:"currentColor",children:r.jsx("polygon",{points:"12,3 16,6 19,10 19,14 16,18 12,21 8,18 5,14 5,10 8,6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})}),D20:r.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 inline-block",fill:"currentColor",children:r.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})}),D100:r.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 inline-block",fill:"currentColor",children:r.jsx("rect",{x:"5",y:"8",width:"14",height:"8",stroke:"currentColor",strokeWidth:"1.5",fill:"none",rx:"1"})}),"2D6":r.jsxs("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 inline-block",fill:"currentColor",children:[r.jsx("rect",{x:"4",y:"4",width:"8",height:"8",stroke:"currentColor",strokeWidth:"1.5",fill:"none",rx:"1"}),r.jsx("rect",{x:"12",y:"12",width:"8",height:"8",stroke:"currentColor",strokeWidth:"1.5",fill:"none",rx:"1"})]})};function OS(){const{gameState:s}=Pe(),a=O.useRef(null),[i,o]=O.useState(null);O.useEffect(()=>{if(a.current&&(a.current.scrollTop=a.current.scrollHeight),s.log.length>0){const g=s.log[s.log.length-1];g.id!==i&&o(g.id)}},[s.log,i]);const u=g=>{switch(g){case"threat":return"text-accent-red";case"danger":return"text-accent-red font-bold";case"success":return"text-accent-cyan";case"mission":return"text-accent-yellow";case"roll":return"text-accent-cyan";case"oracle":return"text-accent-yellow";default:return"text-gray-400"}},h=(g,x)=>{if(g==="roll"&&x.includes("Rolled")){const j=x.match(/Rolled (D\d+|2D6)/);if(j&&pg[j[1]])return pg[j[1]]}switch(g){case"threat":return"";case"danger":return"";case"success":return"";case"mission":return"";case"oracle":return"";default:return""}},f=g=>g.includes("(ADV)")||g.includes("(DIS)")?g.replace(/\((ADV|DIS)\)/,'<span class="text-accent-yellow">($1)</span>').replace(/= (\d+)$/,'= <strong class="text-glow-cyan">$1</strong>'):g.replace(/: (\d+)$/,': <strong class="text-glow-cyan">$1</strong>'),p=g=>g.includes(" | ")?g.split(" | ").map((v,w)=>w===0?v:`<span class="text-accent-cyan">${v}</span>`).join(' <span class="text-accent-yellow/40">|</span> '):g.replace(/: ([^:]+)$/,': <span class="text-accent-cyan">$1</span>'),m=g=>new Date(g).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return r.jsx("div",{ref:a,className:"h-full overflow-y-auto space-y-2 font-mono text-sm",children:s.log.length===0?r.jsx("div",{className:"h-full flex items-center justify-center",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsxs("div",{className:"text-accent-cyan/20 text-3xl font-mono",children:["[ ]",r.jsx("br",{}),">","_"]}),r.jsx("p",{className:"text-gray-500 font-orbitron text-sm",children:"SHIP LOG EMPTY"}),r.jsx("p",{className:"text-gray-600 text-xs",children:"Activity will appear here"})]})}):s.log.slice().reverse().map((g,x)=>{const j=g.id===i&&x===0,v=x<s.log.length-1?s.log.slice().reverse()[x+1]:null,w=v&&v.type===g.type;return r.jsx("div",{className:`border-l-2 pl-3 py-1 hover:border-accent-cyan hover:bg-bg-secondary/30 transition-all duration-200 ${j?"log-entry-slide new-entry-pulse":"slide-up"} ${w?"border-accent-cyan/30":"border-accent-cyan/50 mt-1"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:`${u(g.type)} mt-0.5 flex-shrink-0`,children:h(g.type,g.message)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:`text-xs mr-2 ${g.type==="threat"||g.type==="danger"?"text-accent-red/60":g.type==="success"?"text-accent-cyan/60":g.type==="mission"||g.type==="oracle"?"text-accent-yellow/60":"text-accent-cyan/60"}`,children:m(g.timestamp)}),r.jsx("span",{className:u(g.type),dangerouslySetInnerHTML:{__html:g.type==="roll"?f(g.message):g.type==="oracle"?p(g.message):g.message}})]})]})},g.id)})})}function my(s,a=500){const[i,o]=O.useState(s);return O.useEffect(()=>{const u=setTimeout(()=>{o(s)},a);return()=>{clearTimeout(u)}},[s,a]),i}function DS(){const{gameState:s,updateGameState:a}=Pe(),[i,o]=O.useState(s.journal||""),u=my(i,2e3);return O.useEffect(()=>{s.journal!==i&&s.journal!==u&&o(s.journal)},[s.journal]),O.useEffect(()=>{u!==s.journal&&a({journal:u})},[u]),r.jsxs("div",{className:"absolute inset-0 flex flex-col gap-2",children:[r.jsx("textarea",{value:i,onChange:h=>o(h.target.value),placeholder:">> MISSION LOG: Document your journey, decisions, and discoveries...",className:"flex-1 w-full px-3 py-2 bg-bg-primary border-2 border-accent-yellow text-text-primary focus:outline-none focus:border-accent-cyan focus:shadow-[0_0_15px_rgba(0,240,255,0.4)] transition-all duration-300 font-mono text-sm resize-none min-h-0"}),r.jsx("div",{className:"text-xs text-gray-500 font-orbitron shrink-0",children:i!==s.journal?r.jsx("span",{className:"text-accent-yellow animate-pulse",children:" Saving..."}):r.jsx("span",{className:"text-accent-cyan",children:" Synced"})})]})}const MS={4:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsx("polygon",{points:"50,15 85,85 15,85",fill:"#0a0a0a",fillOpacity:"0.9",stroke:"currentColor",strokeWidth:"2"}),r.jsx("text",{x:"50",y:"70",textAnchor:"middle",fill:"#ffffff",style:{fontSize:"28px",fontWeight:900},children:"4"})]}),6:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsx("rect",{x:"20",y:"20",width:"60",height:"60",fill:"#0a0a0a",fillOpacity:"0.9",stroke:"currentColor",strokeWidth:"2",rx:"4"}),r.jsx("text",{x:"50",y:"58",textAnchor:"middle",fill:"#ffffff",style:{fontSize:"28px",fontWeight:900},children:"6"})]}),8:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsx("polygon",{points:"25,50 50,15 75,50 50,85",fill:"#0a0a0a",fillOpacity:"0.9",stroke:"currentColor",strokeWidth:"2"}),r.jsx("text",{x:"50",y:"58",textAnchor:"middle",fill:"#ffffff",style:{fontSize:"28px",fontWeight:900},children:"8"})]}),10:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsx("polygon",{points:"50,10 80,35 80,65 50,90 20,65 20,35",fill:"#0a0a0a",fillOpacity:"0.9",stroke:"currentColor",strokeWidth:"2"}),r.jsx("text",{x:"50",y:"58",textAnchor:"middle",fill:"#ffffff",style:{fontSize:"24px",fontWeight:900},children:"10"})]}),12:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsx("polygon",{points:"50,10 70,20 82,35 82,65 70,80 50,90 30,80 18,65 18,35 30,20",fill:"#0a0a0a",fillOpacity:"0.9",stroke:"currentColor",strokeWidth:"2"}),r.jsx("text",{x:"50",y:"58",textAnchor:"middle",fill:"#ffffff",style:{fontSize:"24px",fontWeight:900},children:"12"})]}),20:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsx("polygon",{points:"50,8 82,25 82,70 50,87 18,70 18,25",fill:"#0a0a0a",fillOpacity:"0.9",stroke:"currentColor",strokeWidth:"2"}),r.jsx("polygon",{points:"50,8 18,25 82,25",fill:"none",stroke:"currentColor",strokeWidth:"2"}),r.jsx("polygon",{points:"50,32 25,65 75,65",fill:"#0a0a0a",fillOpacity:"0.95",stroke:"currentColor",strokeWidth:"2"}),r.jsx("polygon",{points:"18,25 18,70 25,65",fill:"none",stroke:"currentColor",strokeWidth:"2"}),r.jsx("polygon",{points:"82,25 75,65 82,70",fill:"none",stroke:"currentColor",strokeWidth:"2"}),r.jsx("line",{x1:"50",y1:"32",x2:"50",y2:"8",stroke:"currentColor",strokeWidth:"2"}),r.jsx("line",{x1:"25",y1:"65",x2:"18",y2:"25",stroke:"currentColor",strokeWidth:"2"}),r.jsx("line",{x1:"75",y1:"65",x2:"82",y2:"25",stroke:"currentColor",strokeWidth:"2"}),r.jsx("line",{x1:"25",y1:"65",x2:"50",y2:"87",stroke:"currentColor",strokeWidth:"2"}),r.jsx("line",{x1:"75",y1:"65",x2:"50",y2:"87",stroke:"currentColor",strokeWidth:"2"}),r.jsx("line",{x1:"18",y1:"70",x2:"25",y2:"65",stroke:"currentColor",strokeWidth:"2"}),r.jsx("line",{x1:"82",y1:"70",x2:"75",y2:"65",stroke:"currentColor",strokeWidth:"2"}),r.jsx("text",{x:"50",y:"56",textAnchor:"middle",fill:"#ffffff",style:{fontSize:"24px",fontWeight:900},children:"20"})]}),100:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"#0a0a0a",fillOpacity:"0.9",stroke:"currentColor",strokeWidth:"2"}),r.jsx("text",{x:"50",y:"58",textAnchor:"middle",fill:"#ffffff",style:{fontSize:"22px",fontWeight:900},children:"100"})]}),"2d6":r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsx("rect",{x:"15",y:"25",width:"32",height:"32",fill:"#0a0a0a",fillOpacity:"0.9",stroke:"currentColor",strokeWidth:"2",rx:"3"}),r.jsx("rect",{x:"53",y:"43",width:"32",height:"32",fill:"#0a0a0a",fillOpacity:"0.9",stroke:"currentColor",strokeWidth:"2",rx:"3"}),r.jsx("text",{x:"31",y:"48",textAnchor:"middle",fill:"#ffffff",style:{fontSize:"18px",fontWeight:900},children:"6"}),r.jsx("text",{x:"69",y:"66",textAnchor:"middle",fill:"#ffffff",style:{fontSize:"18px",fontWeight:900},children:"6"})]})};function gg({sides:s,label:a,variant:i="cyan",isRolling:o=!1,onClick:u,className:h}){const f={cyan:"text-accent-cyan",yellow:"text-accent-yellow",red:"text-accent-red"};return r.jsx("button",{onClick:u,disabled:o,className:ne("relative aspect-square bg-transparent","transition-all duration-300 ease-out","hover:scale-110 active:scale-95","disabled:opacity-50 disabled:cursor-not-allowed","group",f[i],o&&"dice-rolling",!o&&"dice-idle",h),children:r.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-2",children:MS[s]})})}function US({result:s,diceType:a,sides:i,rolls:o,rollMode:u,onComplete:h}){const[f,p]=O.useState(!0),[m,g]=O.useState(!1),[x,j]=O.useState(!1),v=i===20&&s===20,w=i===20&&s===1,_=s>i*.75,S=s<=i*.25,E=u==="advantage"||u==="disadvantage",q=i===100;O.useEffect(()=>{const L=setTimeout(()=>{p(!1),(v||w)&&(g(!0),j(!0),setTimeout(()=>j(!1),400))},q?400:300),G=setTimeout(()=>{h&&h()},2500);return()=>{clearTimeout(L),clearTimeout(G)}},[s,v,w,q,h]);const U=()=>v?"text-accent-yellow":w?"text-accent-red":_?"text-accent-cyan":S?"text-gray-400":"text-accent-cyan",A=()=>v?"text-glow-yellow":w?"text-glow-red":"text-glow-cyan",I=q?s.toString().padStart(3,"0").split(""):[s.toString()];return r.jsxs("div",{className:"relative w-full py-3 px-3 bg-bg-secondary/30 backdrop-blur-sm border-2 border-accent-cyan/50 overflow-hidden",children:[x&&r.jsx("div",{className:ne("fixed inset-0 pointer-events-none z-50",v?"bg-accent-yellow screen-flash-yellow":"bg-accent-red screen-flash-red")}),r.jsx("div",{className:ne("absolute inset-0 opacity-30 transition-opacity duration-500",v&&"bg-gradient-radial from-accent-yellow/40 to-transparent animate-pulse",w&&"bg-gradient-radial from-accent-red/40 to-transparent",!v&&!w&&"bg-gradient-radial from-accent-cyan/20 to-transparent")}),m&&v&&r.jsx("div",{className:"absolute inset-0 crit-burst pointer-events-none"}),r.jsxs("div",{className:ne("relative z-10",m&&w&&"fumble-shake"),children:[r.jsx("div",{className:"text-center mb-0.5",children:r.jsxs("span",{className:ne("text-xs font-orbitron uppercase tracking-wider opacity-70",U()),children:[a,E&&r.jsxs("span",{className:ne("ml-1",u==="advantage"?"text-accent-yellow":"text-accent-red"),children:["(",u==="advantage"?"ADV":"DIS",")"]})]})}),r.jsxs("div",{className:"text-center",children:[q&&!f?r.jsx("span",{className:ne("font-orbitron font-black text-5xl",U(),A()),children:I.map((L,G)=>r.jsx("span",{className:`inline-block digit-reveal-${G+1}`,children:L},G))}):r.jsx("span",{className:ne("font-orbitron font-black transition-all duration-300","inline-block",f?"text-4xl scale-0 opacity-0":"text-5xl scale-100 opacity-100 result-reveal",U(),A()),children:s}),!f&&E&&o&&r.jsxs("span",{className:ne("ml-2 text-2xl font-orbitron font-bold opacity-50",U()),children:["[",o.find(L=>L!==s),"]"]})]}),!f&&(v||w)&&r.jsx("div",{className:ne("text-center mt-0.5 slide-up","text-xs font-orbitron uppercase tracking-widest",v?"text-accent-yellow":"text-accent-red"),children:v?" CRITICAL ":" FUMBLE "})]}),r.jsx("div",{className:"absolute inset-0 pointer-events-none scan-effect opacity-30"})]})}function LS(){const{addLog:s}=Pe(),[a,i]=O.useState(null),[o,u]=O.useState(null),[h,f]=O.useState([]),[p,m]=O.useState("normal"),g=[{sides:4,label:"D4"},{sides:6,label:"D6"},{sides:8,label:"D8"},{sides:10,label:"D10"},{sides:12,label:"D12"},{sides:20,label:"D20"},{sides:100,label:"D100"}],x=(v,w)=>{a||(i(w),setTimeout(()=>{let _,S,E;if(p==="advantage"||p==="disadvantage"){const q=te(v),U=te(v);S=[q,U],_=p==="advantage"?Math.max(q,U):Math.min(q,U),E=`Rolled ${w} (${p==="advantage"?"ADV":"DIS"}): [${S.join(", ")}] = ${_}`}else _=te(v),E=`Rolled ${w}: ${_}`;u({result:_,diceType:w,sides:v,rolls:S,rollMode:p}),s(E,"roll"),f(q=>[{label:w,result:_},...q.slice(0,4)]),i(null)},600))},j=()=>{a||(i("2D6"),setTimeout(()=>{const v=[te(6),te(6)],w=v.reduce((_,S)=>_+S,0);u({result:w,diceType:"2D6",sides:12,isMultiple:!0}),s(`Rolled 2D6: [${v.join(", ")}] = ${w}`,"roll"),f(_=>[{label:"2D6",result:w},..._.slice(0,4)]),i(null)},600))};return r.jsxs("div",{className:"space-y-2",children:[o&&r.jsx(US,{result:o.result,diceType:o.diceType,sides:o.sides,rolls:o.rolls,rollMode:o.rollMode,onComplete:()=>{}}),r.jsxs("div",{className:"flex gap-1 justify-center",children:[r.jsx("button",{onClick:()=>m("normal"),className:`px-3 py-1 font-orbitron font-bold uppercase text-xs border-2 transition-all ${p==="normal"?"bg-accent-cyan text-bg-primary border-accent-cyan":"bg-transparent text-accent-cyan border-accent-cyan hover:bg-accent-cyan/20"}`,children:"Normal"}),r.jsx("button",{onClick:()=>m("advantage"),className:`px-3 py-1 font-orbitron font-bold uppercase text-xs border-2 transition-all ${p==="advantage"?"bg-accent-yellow text-bg-primary border-accent-yellow":"bg-transparent text-accent-yellow border-accent-yellow hover:bg-accent-yellow/20"}`,children:"Advantage"}),r.jsx("button",{onClick:()=>m("disadvantage"),className:`px-3 py-1 font-orbitron font-bold uppercase text-xs border-2 transition-all ${p==="disadvantage"?"bg-accent-red text-bg-primary border-accent-red":"bg-transparent text-accent-red border-accent-red hover:bg-accent-red/20"}`,children:"Disadvantage"})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 max-w-lg mx-auto",children:[g.map(({sides:v,label:w})=>r.jsx(gg,{sides:v,label:w,variant:"cyan",isRolling:a===w,onClick:()=>x(v,w)},v)),r.jsx(gg,{sides:"2d6",label:"2D6",variant:"cyan",isRolling:a==="2D6",onClick:j})]}),h.length>0&&r.jsx("div",{className:"pt-2 border-t border-accent-cyan/30",children:r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-accent-cyan/70 font-orbitron uppercase text-xs",children:"Recent:"}),r.jsx("div",{className:"flex gap-1",children:h.map((v,w)=>r.jsxs("span",{className:"text-accent-cyan font-mono font-bold text-xs slide-in-recent",children:[v.label.replace("D",""),":",v.result,w<h.length-1&&r.jsx("span",{className:"text-accent-cyan/40 mx-1",children:""})]},`${v.label}-${v.result}-${w}`))})]})})]})}function BS({setOracleResult:s}){const{addLog:a,gameState:i}=Pe(),[o,u]=O.useState("normal"),h=()=>{let m,g;if(o==="advantage"||o==="disadvantage"){const x=Hu(),j=Hu(),v=o==="advantage"?x.roll>j.roll?x:j:x.roll<j.roll?x:j;m={...v,rolls:[x.roll,j.roll],rollMode:o},g=`Oracle (${o==="advantage"?"ADV":"DIS"}) [${x.roll}, ${j.roll}] = ${v.roll}: ${v.result} - ${v.detail}`}else m=Hu(),g=`Oracle (${m.roll}): ${m.result} - ${m.detail}`;s&&s(m),a(g,"roll")},f=()=>{const m=i.threatDie||1,g=pS(m);if(g.success){const x={roll:g.total,result:"Scene Shakeup",detail:g.shakeup.result,checkRoll:g.checkRoll,threatDie:m,shakeupD20:g.shakeup.d20,shakeupRoll:g.shakeup.roll};s&&s(x),a(`Scene Shakeup Check [${g.checkRoll}] + [${m}] = ${g.total}   Shakeup [${g.shakeup.d20}] + [${m}] = ${g.shakeup.roll}: ${g.shakeup.result}`,"roll")}else{const x={roll:g.total,result:"No Scene Shakeup",detail:`Rolled [${g.checkRoll}] + [${m}] = ${g.total}, need 15+`,checkRoll:g.checkRoll,threatDie:m,success:!1};s&&s(x),a(`Scene Shakeup Check [${g.checkRoll}] + [${m}] = ${g.total}  No shakeup`,"roll")}},p=()=>{const m=mS();s&&s(m),a(`Event (${m.roll}): ${m.verb} ${m.subject} - ${m.specific}`,"roll")};return r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("button",{onClick:h,className:"w-full px-3 py-2 bg-accent-cyan text-bg-primary border-2 border-accent-cyan hover:bg-transparent hover:text-accent-cyan transition-all font-orbitron font-bold uppercase text-xs",children:"Ask Oracle"}),r.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[r.jsx("button",{onClick:()=>u("normal"),className:`px-1 py-1 font-orbitron font-bold uppercase text-xs border-2 transition-all ${o==="normal"?"bg-accent-cyan text-bg-primary border-accent-cyan":"bg-transparent text-accent-cyan border-accent-cyan hover:bg-accent-cyan/20"}`,children:"Norm"}),r.jsx("button",{onClick:()=>u("advantage"),className:`px-1 py-1 font-orbitron font-bold uppercase text-xs border-2 transition-all ${o==="advantage"?"bg-accent-yellow text-bg-primary border-accent-yellow":"bg-transparent text-accent-yellow border-accent-yellow hover:bg-accent-yellow/20"}`,children:"Adv"}),r.jsx("button",{onClick:()=>u("disadvantage"),className:`px-1 py-1 font-orbitron font-bold uppercase text-xs border-2 transition-all ${o==="disadvantage"?"bg-accent-red text-bg-primary border-accent-red":"bg-transparent text-accent-red border-accent-red hover:bg-accent-red/20"}`,children:"Dis"})]})]}),r.jsx("button",{onClick:f,className:"px-3 py-2 bg-accent-yellow text-bg-primary border-2 border-accent-yellow hover:bg-transparent hover:text-accent-yellow transition-all font-orbitron font-bold uppercase text-xs",children:"Shakeup"}),r.jsx("button",{onClick:p,className:"px-3 py-2 bg-accent-red text-bg-primary border-2 border-accent-red hover:bg-transparent hover:text-accent-red transition-all font-orbitron font-bold uppercase text-xs",children:"Event"})]})}function es({result:s,variant:a="cyan",className:i}){const[o,u]=O.useState(!1);if(O.useEffect(()=>{s&&(u(!1),setTimeout(()=>u(!0),50))},[s]),!s)return null;const h={cyan:"border-accent-cyan",yellow:"border-accent-yellow",red:"border-accent-red"},f={cyan:"text-accent-cyan",yellow:"text-accent-yellow",red:"text-accent-red"},p={cyan:"glow-pulse-cyan",yellow:"glow-pulse-yellow",red:"glow-pulse-red"},m={cyan:"text-glow-cyan",yellow:"text-glow-yellow",red:"text-glow-red"};return r.jsx("div",{className:ne("border-3 bg-bg-secondary p-4 scan-effect",h[a],p[a],o?"fade-in":"opacity-0",i),children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:ne("text-xs font-orbitron uppercase tracking-wider flicker",f[a]),children:" TRANSMISSION RECEIVED "}),s.roll!==void 0&&r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"text-gray-400 text-sm font-orbitron",children:"ROLL:"}),s.rolls&&s.rollMode?r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:ne("text-sm font-orbitron",s.rollMode==="advantage"?"text-accent-yellow":"text-accent-red"),children:s.rollMode==="advantage"?"ADV":"DIS"}),r.jsxs("span",{className:"text-base sm:text-lg font-orbitron text-gray-500",children:["[",s.rolls.join(", "),"]"]}),r.jsx("span",{className:"text-gray-500",children:"="}),r.jsxs("span",{className:ne("text-xl sm:text-2xl font-orbitron font-bold",f[a],m[a]),children:["[",s.roll,"]"]})]}):r.jsxs("span",{className:ne("text-xl sm:text-2xl font-orbitron font-bold",f[a],m[a]),children:["[",s.roll,"]"]})]}),r.jsx("div",{className:ne("h-px",h[a]),style:{opacity:.3}}),s.result&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:ne("text-sm font-orbitron uppercase text-gray-400"),children:"RESULT:"}),r.jsx("div",{className:ne("text-base sm:text-xl font-orbitron font-bold typewriter break-words",f[a],m[a]),children:s.result})]}),s.detail&&s.size&&s.weather&&s.npcReaction&&r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm font-orbitron uppercase text-gray-400",children:"DETAIL:"}),r.jsx("div",{className:"text-base text-text-primary terminal-text break-words",children:s.detail})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm font-orbitron uppercase text-gray-400",children:"SIZE:"}),r.jsx("div",{className:"text-base text-text-primary terminal-text break-words",children:s.size})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm font-orbitron uppercase text-gray-400",children:"WEATHER:"}),r.jsx("div",{className:"text-base text-text-primary terminal-text break-words",children:s.weather})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm font-orbitron uppercase text-gray-400",children:"NPC REACTION:"}),r.jsx("div",{className:"text-base text-text-primary terminal-text break-words",children:s.npcReaction})]})]}),s.detail&&!s.weather&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm font-orbitron uppercase text-gray-400",children:"DETAIL:"}),r.jsx("div",{className:"text-base sm:text-lg text-text-primary terminal-text break-words",children:s.detail})]}),s.size&&!s.weather&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm font-orbitron uppercase text-gray-400",children:"SIZE:"}),r.jsx("div",{className:"text-base sm:text-lg text-text-primary terminal-text break-words",children:s.size})]}),s.action&&s.target&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:["ACTION",s.actionRoll?` [${s.actionRoll}]`:"",":"]}),r.jsx("span",{className:ne("text-base font-bold terminal-text break-words",f[a]),children:s.action})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:["TARGET",s.targetRoll?` [${s.targetRoll}]`:"",":"]}),r.jsx("span",{className:ne("text-base font-bold terminal-text break-words",f[a]),children:s.target})]})]}),s.location&&s.tone&&s.obstacle&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:["LOCATION",s.locationRoll?` [${s.locationRoll}]`:"",":"]}),r.jsx("span",{className:ne("text-base font-bold terminal-text break-words",f[a]),children:s.location})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:["TONE",s.toneRoll?` [${s.toneRoll}]`:"",":"]}),r.jsx("span",{className:ne("text-base terminal-text break-words",f[a]),children:s.tone})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:["OBSTACLE",s.obstacleRoll?` [${s.obstacleRoll}]`:"",":"]}),r.jsx("span",{className:ne("text-base text-accent-red terminal-text break-words"),children:s.obstacle})]})]}),s.theme&&s.actor&&!s.role&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:["THEME",s.themeRoll?` [${s.themeRoll}]`:"",":"]}),r.jsx("span",{className:ne("text-base font-bold terminal-text break-words",f[a]),children:s.theme})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:["ACTOR",s.actorRoll?` [${s.actorRoll}]`:"",":"]}),r.jsx("span",{className:ne("text-base terminal-text break-words",f[a]),children:s.actor})]})]}),s.ship&&s.base&&s.obstacle&&s.search&&s.shipRoll&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[80px] sm:min-w-[120px]",children:["SHIP [",s.shipRoll,"]:"]}),r.jsx("span",{className:ne("text-base font-bold terminal-text break-words",f[a]),children:s.ship})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[80px] sm:min-w-[120px]",children:["BASE [",s.baseRoll,"]:"]}),r.jsx("span",{className:ne("text-base font-bold terminal-text break-words",f[a]),children:s.base})]}),s.threatRoll!==void 0&&r.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[80px] sm:min-w-[120px]",children:["THREAT [",s.threatRoll,"] + [",s.threatDie,"] = ",s.threatTotal,":"]}),r.jsx("span",{className:ne("text-base font-bold break-words",s.obstacleTriggered?"text-accent-red":"text-gray-500"),children:s.obstacleTriggered?" OBSTACLE TRIGGERED":"Safe"})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[80px] sm:min-w-[120px]",children:["OBSTACLE [",s.obstacleRoll,"]:"]}),r.jsx("span",{className:ne("text-base font-bold terminal-text break-words",s.obstacleTriggered?"text-accent-red text-glow-red":"text-gray-500"),children:s.obstacle})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[80px] sm:min-w-[120px]",children:["SEARCH [",s.searchRoll,"]:"]}),r.jsx("span",{className:ne("text-base text-accent-yellow terminal-text break-words"),children:s.search})]})]}),s.type&&s.typeRoll&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:["TYPE [",s.typeRoll,"]:"]}),r.jsx("span",{className:ne("text-base terminal-text font-bold break-words",f[a]),children:s.type})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:["GOODS [",s.goodsRoll,"]:"]}),r.jsx("span",{className:ne("text-base terminal-text break-words",f[a]),children:s.goods})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:["SPOT [",s.spotRoll,"]:"]}),r.jsx("span",{className:ne("text-base terminal-text break-words",f[a]),children:s.spot})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:["REWARD [",s.rewardRoll,"]:"]}),r.jsx("span",{className:ne("text-base terminal-text text-accent-yellow break-words"),children:s.reward})]})]}),s.type&&!s.typeRoll&&r.jsx("div",{className:"space-y-2",children:Object.entries(s).map(([g,x])=>g==="roll"?null:r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs("span",{className:"text-sm font-orbitron uppercase text-gray-400 min-w-[70px] sm:min-w-[100px]",children:[g,":"]}),r.jsx("span",{className:ne("text-base terminal-text break-words",f[a]),children:x})]},g))}),s.verb&&s.verbRoll&&r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["VERB [",s.verbRoll,"]:"]}),r.jsx("div",{className:ne("text-base font-bold break-words",f[a]),children:s.verb})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["SUBJECT [",s.subjectRoll,"]:"]}),r.jsx("div",{className:ne("text-base font-bold break-words",f[a]),children:s.subject})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["DESC [",s.descRoll,"]:"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.description})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["ACTIVITY [",s.activityRoll,"]:"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.activity})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["OMEN [",s.omenRoll,"]:"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.omen})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["SPECIFIC [",s.specificRoll,"]:"]}),r.jsx("div",{className:ne("text-base font-bold break-words",f[a],m[a]),children:s.specific})]})]})}),s.role&&s.roleRoll&&r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["ROLE [",s.roleRoll,"]:"]}),r.jsx("div",{className:ne("text-base font-bold break-words",f[a]),children:s.role})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["SPECIES [",s.speciesRoll,"]:"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.species})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["MOTIVATION [",s.motivationRoll,"]:"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.motivation})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["SECRET [",s.secretRoll,"]:"]}),r.jsx("div",{className:"text-base text-accent-yellow break-words",children:s.secret})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["TRAIT [",s.traitRoll,"]:"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.trait})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["DEMEANOR [",s.demeanorRoll,"]:"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.demeanor})]})]})}),s.terrain&&r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["TERRAIN",s.terrainRoll?` [${s.terrainRoll}]`:"",":"]}),r.jsx("div",{className:ne("text-base break-words",f[a]),children:s.terrain})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["WEATHER",s.weatherRoll?` [${s.weatherRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.weather})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["COLOR",s.colorRoll?` [${s.colorRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.color})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["POPULATION",s.populationRoll?` [${s.populationRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.population})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["CONTROL",s.controlRoll?` [${s.controlRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.control})]}),s.name&&r.jsxs("div",{className:"sm:col-span-2",children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["NAME",s.nameRoll?` [${s.nameRoll}]`:"",":"]}),r.jsx("div",{className:ne("text-base sm:text-lg font-bold break-words",f[a],m[a]),children:s.name})]})]})}),s.appearance&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["APPEARANCE",s.appearanceRoll?` [${s.appearanceRoll}]`:"",":"]}),r.jsx("div",{className:ne("text-base break-words",f[a]),children:s.appearance})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["KNOWN FOR",s.knownForRoll?` [${s.knownForRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.knownFor})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["STATE",s.currentStateRoll?` [${s.currentStateRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.currentState})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["COMPLICATION",s.complicationRoll?` [${s.complicationRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-accent-red break-words",children:s.complication})]}),s.leader&&r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["LEADER",s.leaderRoll?` [${s.leaderRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.leader})]}),s.landmark&&r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["LANDMARK",s.landmarkRoll?` [${s.landmarkRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.landmark})]}),s.rumors&&r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["RUMORS",s.rumorsRoll?` [${s.rumorsRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-accent-yellow break-words",children:s.rumors})]}),s.hookups&&r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["NPC HOOK-UPS",s.hookupsRoll?` [${s.hookupsRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-accent-cyan break-words",children:s.hookups})]})]}),s.name&&r.jsxs("div",{className:"pt-2 border-t border-accent-cyan/30",children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["NAME",s.nameRoll?` [${s.nameRoll}]`:"",":"]}),r.jsx("div",{className:ne("text-base sm:text-lg font-bold break-words",f[a],m[a]),children:s.name})]})]}),s.villain&&!s.visage&&r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[r.jsxs("div",{className:"sm:col-span-2",children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["VILLAIN",s.villainRoll?` [${s.villainRoll}]`:"",":"]}),r.jsx("div",{className:ne("text-base sm:text-lg font-bold break-words",f[a],m[a]),children:s.villain})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["GOAL",s.goalRoll?` [${s.goalRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.goal})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["PLAN",s.planRoll?` [${s.planRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.plan})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["MEANS",s.meansRoll?` [${s.meansRoll}]`:"",":"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.means})]})]})}),s.visage&&s.visageRoll&&r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.name&&r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["NAME [",s.nameRoll,"]:"]}),r.jsx("div",{className:ne("text-base sm:text-lg font-bold break-words",f[a],m[a]),children:s.name})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["VISAGE [",s.visageRoll,"]:"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.visage})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["WEAPON [",s.weaponRoll,"]:"]}),r.jsx("div",{className:"text-base text-accent-red break-words",children:s.weapon})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["BASE [",s.baseRoll,"]:"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.base})]})]})}),s.beast&&s.monstrosity&&s.weakSpot&&s.beastRoll&&r.jsxs("div",{className:"space-y-2",children:[s.name&&r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:"MONSTER NAME:"}),r.jsx("div",{className:ne("text-base sm:text-lg font-bold break-words",f[a],m[a]),children:s.name})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["BEAST ADAPTATION [d6: ",s.beastRoll,"]:"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.beast})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["MONSTROSITY [d6: ",s.monstrosityRoll,"]:"]}),r.jsx("div",{className:"text-base text-text-primary break-words",children:s.monstrosity})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["WEAK SPOT [d6: ",s.weakSpotRoll,"]:"]}),r.jsx("div",{className:"text-base text-accent-yellow break-words",children:s.weakSpot})]})]}),s.titleType&&s.col1&&s.col2&&s.col3&&s.col4&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["[",s.col1Roll,"]"]}),r.jsx("div",{className:ne("text-base font-bold break-words",f[a]),children:s.col1})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["[",s.col2Roll,"]"]}),r.jsx("div",{className:ne("text-base font-bold break-words",f[a]),children:s.col2})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["[",s.col3Roll,"]"]}),r.jsx("div",{className:ne("text-base font-bold break-words",f[a]),children:s.col3})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:["[",s.col4Roll,"]"]}),r.jsx("div",{className:ne("text-base font-bold break-words",f[a]),children:s.col4})]})]}),r.jsxs("div",{className:"pt-2 border-t border-accent-cyan/30",children:[r.jsx("span",{className:"text-xs font-orbitron uppercase text-gray-400",children:"FULL TITLE:"}),r.jsxs("div",{className:ne("text-base sm:text-xl font-bold break-words",f[a],m[a]),children:[s.col1," ",s.col2," ",s.col3," ",s.col4]})]})]}),typeof s=="string"&&r.jsx("div",{className:ne("text-base sm:text-lg terminal-text break-words",f[a]),children:s})]})})}function zS(s,a){if(typeof a=="string")return`${s}: ${a}`;if(typeof a!="object"||a===null)return`${s}: ${a}`;if(a.ship&&a.base){let o=`${s}: ${a.ship} | ${a.base}`;return a.obstacleTriggered&&a.obstacle&&(o+=` | ${a.obstacle}`),a.search&&(o+=` | ${a.search}`),o}if(a.species||a.role||a.demeanor){const o=[];return a.species&&o.push(a.species),a.role&&o.push(a.role),a.demeanor&&o.push(a.demeanor),`${s}: ${o.join(" - ")}`}if(a.type&&a.goods)return`${s}: ${a.type} ${a.goods} at ${a.spot||"location"} for ${a.reward||"reward"}`;if(a.name&&a.terrain)return`${s}: ${a.name} - ${a.terrain}, ${a.weather||""}`;if(a.name&&a.beast)return`${s}: ${a.name} - ${a.beast}`;if(a.result&&a.detail)return`${s}: ${a.result} - ${a.detail}`;if(a.result)return`${s}: ${a.result}`;const i=Object.keys(a).filter(o=>!o.includes("Roll")&&!o.includes("Triggered")&&typeof a[o]=="string");if(i.length>0){const o=i.map(u=>a[u]).filter(u=>u);return`${s}: ${o.join(" | ")}`}return`${s}: ${JSON.stringify(a)}`}function Se({title:s,table:a,variant:i="cyan",diceType:o="d6",rollFunction:u=null,formatResult:h=null,setOracleResult:f=null}){const{addLog:p}=Pe(),[m,g]=O.useState(null),x=()=>{let j;u?j=u():Array.isArray(a)?j=oa(a):j="Error: Invalid table";const v=h?h(j):j;g(v),f&&f(v);const w=zS(s,v);p(w,"oracle")};return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-orbitron uppercase text-gray-300",children:s}),r.jsx("span",{className:"text-xs font-orbitron text-gray-500",children:o})]}),r.jsx(de,{onClick:x,variant:i==="cyan"?"ghost":i==="yellow"?"secondary":"danger",className:"w-full",children:"ROLL"}),m&&r.jsx(es,{result:m,variant:i,className:"mt-3"})]})}function $S(){const{addLog:s}=Pe(),[a,i]=O.useState(null),[o,u]=O.useState("detailed"),h=()=>{const g=gS();i(g),s(`Mission: ${g.type} ${g.goods} at ${g.spot} for ${g.reward}`,"mission")},f=()=>{const g=yS();i(g),s(`Quick Mission: ${g.action} ${g.target}`,"mission")},p=()=>{const g=bS();i(g),s(`Villain: ${g.villain} wants to ${g.goal} via ${g.plan} using ${g.means}`,"mission")},m=()=>{const g=oa(nt.scenarios);i({result:g.title,detail:g.desc}),s(`Scenario: ${g.title}`,"mission")};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-4 gap-1 sm:gap-2",children:[r.jsx("button",{onClick:()=>u("detailed"),className:`px-1 sm:px-2 py-1 text-[10px] sm:text-xs font-orbitron uppercase border-2 transition-colors leading-tight ${o==="detailed"?"bg-accent-cyan text-bg-primary border-accent-cyan":"bg-transparent text-accent-cyan border-accent-cyan hover:bg-accent-cyan hover:text-bg-primary"}`,children:"Detailed"}),r.jsx("button",{onClick:()=>u("quick"),className:`px-1 sm:px-2 py-1 text-[10px] sm:text-xs font-orbitron uppercase border-2 transition-colors leading-tight ${o==="quick"?"bg-accent-cyan text-bg-primary border-accent-cyan":"bg-transparent text-accent-cyan border-accent-cyan hover:bg-accent-cyan hover:text-bg-primary"}`,children:"Quick"}),r.jsx("button",{onClick:()=>u("villain"),className:`px-1 sm:px-2 py-1 text-[10px] sm:text-xs font-orbitron uppercase border-2 transition-colors leading-tight ${o==="villain"?"bg-accent-red text-bg-primary border-accent-red":"bg-transparent text-accent-red border-accent-red hover:bg-accent-red hover:text-bg-primary"}`,children:"Villain"}),r.jsx("button",{onClick:()=>u("scenario"),className:`px-1 sm:px-2 py-1 text-[10px] sm:text-xs font-orbitron uppercase border-2 transition-colors leading-tight ${o==="scenario"?"bg-accent-yellow text-bg-primary border-accent-yellow":"bg-transparent text-accent-yellow border-accent-yellow hover:bg-accent-yellow hover:text-bg-primary"}`,children:"Scenario"})]}),o==="detailed"&&r.jsx(de,{onClick:h,variant:"primary",className:"w-full",children:"Generate Detailed Mission"}),o==="quick"&&r.jsx(de,{onClick:f,variant:"primary",className:"w-full",children:"Generate Quick Mission"}),o==="villain"&&r.jsx(de,{onClick:p,variant:"danger",className:"w-full",children:"Generate Villain Plot"}),o==="scenario"&&r.jsx(de,{onClick:m,variant:"secondary",className:"w-full",children:"Generate Campaign Scenario"}),a&&r.jsx(es,{result:a,variant:o==="villain"?"red":o==="scenario"?"yellow":"cyan"})]})}function HS(){const{addLog:s,gameState:a}=Pe(),[i,o]=O.useState(null),u=()=>{const g=xS();o(g),s(`NPC: ${g.species} ${g.role} - ${g.demeanor}`,"mission")},h=()=>{const g=a.threatDie||1,x=SS(g);if(x.success){const j={theme:x.encounter.theme,actor:x.encounter.actor,themeRoll:x.encounter.themeRoll,actorRoll:x.encounter.actorRoll,checkRoll:x.checkRoll,total:x.total};o(j),s(`Travel Encounter Check [${x.checkRoll}] + [${g}] = ${x.total}   ${x.encounter.theme} - ${x.encounter.actor}`,"mission")}else{const j={result:"No Travel Encounter",detail:`Rolled [${x.checkRoll}] + [${g}] = ${x.total}, need 12+`,checkRoll:x.checkRoll,threatDie:g,total:x.total,success:!1};o(j),s(`Travel Encounter Check [${x.checkRoll}] + [${g}] = ${x.total}  No encounter`,"roll")}},f=()=>{const g=oa(gt.rebelContacts);o({result:"Rebel Contact",detail:g}),s(`Rebel Contact: ${g}`,"mission")},p=()=>{const g=oa(gt.weirdoAliens);o({result:"Weirdo Alien",detail:g}),s(`Weirdo Alien: ${g}`,"mission")},m=()=>{const g=oa(gt.reactions);o({result:"NPC Reaction",detail:g}),s(`Reaction: ${g}`,"roll")};return r.jsxs("div",{className:"space-y-4",children:[r.jsx(de,{onClick:u,variant:"primary",className:"w-full text-base py-3",children:"GENERATE FULL NPC"}),r.jsx("div",{className:"text-xs text-gray-400 text-center font-orbitron -mt-2",children:"Role  Species  Motivation  Secret  Trait  Demeanor"}),r.jsxs("div",{className:"pt-2 border-t border-accent-yellow/30",children:[r.jsx("div",{className:"text-xs text-gray-400 font-orbitron uppercase mb-2",children:"Quick Generators:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(de,{onClick:h,variant:"ghost",className:"text-xs py-2",children:"Travel Encounter"}),r.jsx(de,{onClick:m,variant:"ghost",className:"text-xs py-2",children:"Reaction"}),r.jsx(de,{onClick:f,variant:"secondary",className:"text-xs py-2",children:"Rebel Contact"}),r.jsx(de,{onClick:p,variant:"secondary",className:"text-xs py-2",children:"Weirdo Alien"})]})]}),i&&r.jsx(es,{result:i,variant:"yellow"})]})}function GS(){const{addLog:s}=Pe(),[a,i]=O.useState(null),[o,u]=O.useState("planet"),h=()=>{const w=vS();i(w),s(`Planet: ${w.name} - ${w.terrain}, ${w.weather}`,"mission")},f=()=>{const w=wS();i(w),s(`Settlement: ${w.name} (Leader: ${w.leader}) - ${w.knownFor}`,"mission")},p=()=>{const w=jS();i({location:w.location,tone:w.tone,obstacle:w.obstacle,locationRoll:w.locationRoll,toneRoll:w.toneRoll,obstacleRoll:w.obstacleRoll}),s(`Scene: ${w.location} - ${w.tone} - ${w.obstacle}`,"mission")},m=()=>{const w=oa(_e.planetFeatures);i({result:"Planet Feature",detail:w}),s(`Planet Feature: ${w}`,"mission")},g=()=>{const w=oa(_e.backwaters);i({result:"Backwater Location",detail:w}),s(`Backwater: ${w}`,"mission")},x=()=>{const w=oa(_e.backalleys);i({result:"Back Alley Detail",detail:w}),s(`Back Alley: ${w}`,"mission")},j=()=>{const w=oa(_e.hiddenFeatures);i({result:"Hidden Feature",detail:w}),s(`Hidden Feature: ${w}`,"mission")},v=()=>{const w=oa(_e.locationDangers);i({result:"Location Danger",detail:w}),s(`Danger: ${w}`,"mission")};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx("button",{onClick:()=>u("planet"),className:`px-1 sm:px-2 py-1 text-[10px] sm:text-xs font-orbitron uppercase border-2 transition-colors leading-tight ${o==="planet"?"bg-accent-cyan text-bg-primary border-accent-cyan":"bg-transparent text-accent-cyan border-accent-cyan hover:bg-accent-cyan hover:text-bg-primary"}`,children:"Planet"}),r.jsx("button",{onClick:()=>u("settlement"),className:`px-1 sm:px-2 py-1 text-[10px] sm:text-xs font-orbitron uppercase border-2 transition-colors leading-tight ${o==="settlement"?"bg-accent-cyan text-bg-primary border-accent-cyan":"bg-transparent text-accent-cyan border-accent-cyan hover:bg-accent-cyan hover:text-bg-primary"}`,children:"Settlement"}),r.jsx("button",{onClick:()=>u("scene"),className:`px-1 sm:px-2 py-1 text-[10px] sm:text-xs font-orbitron uppercase border-2 transition-colors leading-tight ${o==="scene"?"bg-accent-cyan text-bg-primary border-accent-cyan":"bg-transparent text-accent-cyan border-accent-cyan hover:bg-accent-cyan hover:text-bg-primary"}`,children:"Scene"})]}),o==="planet"&&r.jsx(de,{onClick:h,variant:"primary",className:"w-full",children:"Generate Planet"}),o==="settlement"&&r.jsx(de,{onClick:f,variant:"primary",className:"w-full",children:"Generate Settlement"}),o==="scene"&&r.jsx(de,{onClick:p,variant:"primary",className:"w-full",children:"Generate Scene"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(de,{onClick:m,variant:"ghost",className:"text-[10px] sm:text-xs py-2 px-2 leading-tight",children:"Planet Feature"}),r.jsx(de,{onClick:g,variant:"ghost",className:"text-[10px] sm:text-xs py-2 px-2 leading-tight",children:"Backwater"}),r.jsx(de,{onClick:x,variant:"ghost",className:"text-[10px] sm:text-xs py-2 px-2 leading-tight",children:"Back Alley"}),r.jsx(de,{onClick:j,variant:"secondary",className:"text-[10px] sm:text-xs py-2 px-2 leading-tight whitespace-nowrap overflow-hidden text-ellipsis",children:"Hidden Feature"}),r.jsx(de,{onClick:v,variant:"danger",className:"text-[10px] sm:text-xs py-2 px-2 col-span-2 leading-tight",children:"Location Danger"})]}),a&&r.jsx(es,{result:a,variant:"cyan"})]})}function qS(){const{addLog:s}=Pe(),[a,i]=O.useState(null),o=()=>{const u=NS();i(u),s(`Monster: ${u.name} - ${u.beast}`,"mission")};return r.jsxs("div",{className:"space-y-4",children:[r.jsx(de,{onClick:o,variant:"danger",className:"w-full",children:"GENERATE MONSTER"}),a&&r.jsx(es,{result:a,variant:"red"})]})}function PS(){const{addLog:s}=Pe(),[a,i]=O.useState(null),o=()=>{const u=TS();i(u),s(`Crime Lord: ${u.name}`,"mission")};return r.jsxs("div",{className:"space-y-4",children:[r.jsx(de,{onClick:o,variant:"danger",className:"w-full",children:"GENERATE CRIME LORD"}),a&&r.jsx(es,{result:a,variant:"red"})]})}function IS(){const{addLog:s,gameState:a}=Pe(),[i,o]=O.useState(null),[u,h]=O.useState(0),[f,p]=O.useState([]),[m,g]=O.useState(!1),x=()=>{const S=te(20);let E,q,U;S<=10?(E="Small",q=te(6)+2,U="d6+2"):S<=16?(E="Medium",q=te(6)+5,U="d6+5"):(E="Large",q=te(12)+5,U="d12+5");const A=q+1;o({size:E,sizeRoll:S,diceFormula:U,totalZones:A,baseZones:q}),h(1),p([]),g(!1),s(`Site generated: ${E} (${A} zones including Objective)`,"mission")},j=()=>{if(!i||m)return;const S=a.threatDie||1,E=ql(S),q={number:u,ship:E.ship,base:E.base,obstacleTriggered:E.obstacleTriggered,obstacle:E.obstacleTriggered?E.obstacle:null,threatRoll:E.threatRoll,threatTotal:E.threatTotal};p([...f,q]),u===i.totalZones?s(`OBJECTIVE ZONE reached! ${E.ship} / ${E.base}${E.obstacleTriggered?` - OBSTACLE: ${E.obstacle}`:""}`,"success"):s(`Zone ${u}: ${E.ship} / ${E.base}${E.obstacleTriggered?` - OBSTACLE: ${E.obstacle}`:""}`,"mission")},v=()=>{u<i.totalZones?h(u+1):(g(!0),s("Site exploration complete! Roll Escape Obstacle.","success"))},w=S=>{if(!i)return;const E=te(S==="strong"?20:10),q=a.threatDie||1,U=ql(q);s(`Search (${S} hit) [${E}]: ${U.search}`,"roll")},_=()=>{const S=a.threatDie||1,E=ql(S);E.obstacleTriggered?s(`ESCAPE OBSTACLE: ${E.obstacle}`,"danger"):s("Escape: Clear path, no obstacles!","success")};return r.jsxs("div",{className:"space-y-4",children:[!i&&r.jsxs("div",{className:"text-center py-8 space-y-4",children:[r.jsx("div",{className:"text-accent-cyan/30 text-4xl mb-2",children:""}),r.jsx("p",{className:"text-gray-500 font-orbitron text-sm",children:"DANGEROUS LOCATION EXPLORER"}),r.jsx("p",{className:"text-gray-600 text-xs mb-4",children:"Procedurally explore ships, bases, and installations"}),r.jsxs(de,{onClick:x,variant:"primary",className:"flex items-center gap-2 mx-auto",children:[r.jsx(fy,{className:"w-4 h-4"}),"Generate Site"]})]}),i&&r.jsxs("div",{className:"border-3 border-accent-cyan bg-bg-secondary p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-orbitron font-bold text-accent-cyan text-lg",children:[i.size," Site"]}),r.jsxs("p",{className:"text-gray-400 text-xs",children:[i.totalZones," total zones (",i.diceFormula," + 1 Objective)"]})]}),r.jsx(de,{onClick:x,variant:"ghost",className:"text-xs",children:"New Site"})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(og,{className:"w-4 h-4 text-accent-cyan"}),r.jsx("div",{className:"flex-1 flex gap-1",children:Array.from({length:i.totalZones}).map((S,E)=>{const q=E+1,U=f.some(L=>L.number===q),A=q===u,I=q===i.totalZones;return r.jsx("div",{className:`flex-1 h-2 border transition-all ${U?"bg-accent-cyan border-accent-cyan":A?"bg-accent-yellow border-accent-yellow animate-pulse":"bg-transparent border-accent-cyan/30"} ${I?"border-2":"border"}`},E)})}),r.jsxs("span",{className:"text-accent-cyan font-orbitron font-bold text-sm",children:[u,"/",i.totalZones]})]}),!m&&r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(de,{onClick:j,variant:"primary",className:"flex items-center gap-2 justify-center text-sm",disabled:f.some(S=>S.number===u),children:[r.jsx(og,{className:"w-4 h-4"}),"Explore Zone ",u]}),r.jsxs(de,{onClick:v,variant:"secondary",className:"flex items-center gap-2 justify-center text-sm",disabled:!f.some(S=>S.number===u),children:["Next Zone",r.jsx(B1,{className:"w-4 h-4"})]})]}),m&&r.jsxs(de,{onClick:_,variant:"danger",className:"w-full flex items-center gap-2 justify-center",children:[r.jsx(wn,{className:"w-4 h-4"}),"Roll Escape Obstacle"]})]}),i&&f.some(S=>S.number===u)&&r.jsxs("div",{className:"border-2 border-accent-cyan bg-bg-primary p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Yj,{className:`w-5 h-5 ${u===i.totalZones?"text-accent-yellow":"text-accent-cyan"}`}),r.jsx("h4",{className:"font-orbitron font-bold text-accent-cyan",children:u===i.totalZones?"OBJECTIVE ZONE":`Zone ${u}`})]}),f.filter(S=>S.number===u).map((S,E)=>r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Ship Feature:"}),r.jsx("p",{className:"text-text-primary font-orbitron",children:S.ship})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Base Feature:"}),r.jsx("p",{className:"text-text-primary font-orbitron",children:S.base})]})]}),r.jsxs("div",{className:`border-2 p-2 ${S.obstacleTriggered?"border-accent-red bg-accent-red/10":"border-accent-cyan/30"}`,children:[r.jsx("div",{className:"flex items-center gap-2 mb-1",children:r.jsxs("span",{className:"text-xs text-gray-400",children:["Obstacle Check: [",S.threatRoll,"] + Threat = ",S.threatTotal]})}),S.obstacleTriggered?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wn,{className:"w-4 h-4 text-accent-red"}),r.jsx("span",{className:"font-orbitron font-bold text-accent-red uppercase text-sm",children:S.obstacle})]}):r.jsx("p",{className:"text-gray-400 text-sm",children:"No obstacle (need 12+)"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"Search Zone:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{onClick:()=>w("strong"),className:"px-3 py-2 bg-transparent border-2 border-accent-cyan text-accent-cyan hover:bg-accent-cyan hover:text-bg-primary transition-all font-orbitron text-xs flex items-center gap-1 justify-center",children:[r.jsx(dg,{className:"w-3 h-3"}),"Strong Hit (d20)"]}),r.jsxs("button",{onClick:()=>w("weak"),className:"px-3 py-2 bg-transparent border-2 border-accent-yellow text-accent-yellow hover:bg-accent-yellow hover:text-bg-primary transition-all font-orbitron text-xs flex items-center gap-1 justify-center",children:[r.jsx(dg,{className:"w-3 h-3"}),"Weak Hit (d10)"]})]})]})]},E))]}),f.length>1&&r.jsxs("div",{className:"border-t-2 border-accent-cyan/30 pt-3",children:[r.jsx("h4",{className:"text-accent-cyan/70 font-orbitron text-xs uppercase mb-2",children:"Previous Zones:"}),r.jsx("div",{className:"space-y-1",children:f.filter(S=>S.number!==u).map(S=>r.jsxs("div",{className:"text-xs text-gray-500 font-orbitron",children:["Zone ",S.number,": ",S.ship," / ",S.base,S.obstacleTriggered&&r.jsxs("span",{className:"text-accent-red ml-2",children:["(",S.obstacle,")"]})]},S.number))})]})]})}function dt({title:s,children:a,defaultOpen:i=!1}){const[o,u]=O.useState(i);return r.jsxs("div",{className:"border-3 border-accent-yellow mb-2",children:[r.jsxs("button",{onClick:()=>u(!o),className:"w-full px-4 py-3 flex items-center justify-between bg-transparent hover:bg-accent-yellow hover:text-bg-primary transition-all duration-200 font-orbitron font-bold uppercase text-sm active:scale-[0.99]",children:[r.jsx("span",{children:s}),r.jsx(hd,{className:ne("w-5 h-5 transition-all duration-300",o&&"transform rotate-180")})]}),o&&r.jsx("div",{className:"p-4 bg-bg-primary border-t-3 border-accent-yellow accordion-reveal overflow-hidden",children:a})]})}function VS(){const[s,a]=O.useState("core"),[i,o]=O.useState(null),{addLog:u}=Pe(),h=()=>i?i.result==="Scene Shakeup"?"yellow":i.verb?"red":"cyan":"cyan",f=[{id:"core",label:"Core",color:"cyan"},{id:"missions",label:"Missions",color:"yellow"},{id:"world",label:"World",color:"cyan"},{id:"characters",label:"Characters",color:"yellow"},{id:"combat",label:"Combat",color:"red"},{id:"creation",label:"Creation",color:"cyan"}],p={cyan:{active:"bg-accent-cyan text-bg-primary border-accent-cyan",inactive:"bg-transparent text-accent-cyan border-accent-cyan hover:bg-accent-cyan hover:text-bg-primary"},yellow:{active:"bg-accent-yellow text-bg-primary border-accent-yellow",inactive:"bg-transparent text-accent-yellow border-accent-yellow hover:bg-accent-yellow hover:text-bg-primary"},red:{active:"bg-accent-red text-bg-primary border-accent-red",inactive:"bg-transparent text-accent-red border-accent-red hover:bg-accent-red hover:text-bg-primary"}};return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"border-3 border-accent-cyan bg-bg-secondary p-3",children:r.jsx(BS,{setOracleResult:o})}),i&&r.jsx(es,{result:i,variant:h()}),r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-1",children:f.map(m=>r.jsx("button",{onClick:()=>a(m.id),className:ne("px-1 sm:px-2 py-2 border-2 transition-all font-orbitron font-bold uppercase text-[10px] sm:text-xs leading-tight",s===m.id?p[m.color].active:p[m.color].inactive),children:m.label},m.id))}),r.jsxs("div",{className:"border-3 border-accent-yellow bg-bg-secondary p-4 overflow-y-auto flex-1",children:[s==="core"&&r.jsx(KS,{}),s==="missions"&&r.jsx(YS,{}),s==="world"&&r.jsx(JS,{}),s==="characters"&&r.jsx(WS,{}),s==="combat"&&r.jsx(QS,{}),s==="creation"&&r.jsx(ZS,{})]})]})}function ei({morale:s,label:a,onCheck:i}){const[o,u]=O.useState(null),h=()=>{const f=i(s);u(f),setTimeout(()=>u(null),3e3)};return r.jsxs("button",{onClick:h,className:"w-full px-3 py-2 bg-transparent border-2 border-accent-red text-accent-red hover:bg-accent-red hover:text-bg-primary transition-all font-orbitron text-sm flex items-center justify-between",children:[r.jsx("span",{children:a}),o&&r.jsx("span",{className:o.success?"text-accent-yellow font-bold":"text-accent-cyan",children:o.success?o.result:"HOLDS"})]})}function KS(){return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"text-accent-cyan font-orbitron text-lg font-bold uppercase mb-4",children:"Core Solo Play Oracles"}),r.jsx(dt,{title:"Opening Scene (d20)",defaultOpen:!1,children:r.jsx(Se,{title:"Opening Scene",table:at.openingScene,variant:"cyan",diceType:"d20"})}),r.jsx(dt,{title:"Crit & Blunder (d4)",defaultOpen:!1,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(Se,{title:"Critical Hit Effect",table:at.critBlunder.crit,variant:"cyan",diceType:"d4"}),r.jsx(Se,{title:"Blunder Effect",table:at.critBlunder.blunder,variant:"red",diceType:"d4"})]})}),r.jsx(dt,{title:"Broken (When HP Hits 0)",defaultOpen:!1,children:r.jsx(Se,{title:"Roll D4 When Broken",table:la.broken.map(s=>s.result),variant:"red",diceType:"d4"})}),r.jsx(dt,{title:"Visual Oracle / Boost (d20)",defaultOpen:!1,children:r.jsx(Se,{title:"Inspiration Prompt",table:fS.boost,variant:"yellow",diceType:"d20"})})]})}function YS(){const{addLog:s}=Pe(),a=()=>{const o=_S(),u=`${o.col1} ${o.col2} ${o.col3} ${o.col4}`;return s(`Epic Title [${o.col1Roll}, ${o.col2Roll}, ${o.col3Roll}, ${o.col4Roll}]: ${u}`,"mission"),{result:"Campaign Title",titleType:"epic",...o}},i=()=>{const o=kS(),u=`${o.col1} ${o.col2} ${o.col3} ${o.col4}`;return s(`Episode Title [${o.col1Roll}, ${o.col2Roll}, ${o.col3Roll}, ${o.col4Roll}]: ${u}`,"mission"),{result:"Episode Title",titleType:"episode",...o}};return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"text-accent-yellow font-orbitron text-lg font-bold uppercase mb-4",children:"Mission & Plot Generators"}),r.jsx(dt,{title:"Mission Generator",defaultOpen:!0,children:r.jsx($S,{})}),r.jsx(dt,{title:"Pre-Made Scenarios (d6)",defaultOpen:!1,children:r.jsx(Se,{title:"Campaign Scenario",table:nt.scenarios,variant:"yellow",diceType:"d6",formatResult:o=>({result:o.title,detail:o.desc})})}),r.jsx(dt,{title:"Title Generators",defaultOpen:!1,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(Se,{title:"Epic Campaign Title",table:[],variant:"yellow",diceType:"4d6",rollFunction:a}),r.jsx(Se,{title:"Episode/Session Title",table:[],variant:"cyan",diceType:"4d6",rollFunction:i})]})})]})}function JS(){const{gameState:s}=Pe();return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"text-accent-cyan font-orbitron text-lg font-bold uppercase mb-4",children:"World Building & Locations"}),r.jsx(dt,{title:"World Generator",defaultOpen:!0,children:r.jsx(GS,{})}),r.jsx(dt,{title:"Obstacles & Mishaps",defaultOpen:!1,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(Se,{title:"Urgent Obstacle",table:_e.urgentObstacles,variant:"red",diceType:"d6"}),r.jsx(Se,{title:"General Mishap",table:_e.generalMishaps,variant:"yellow",diceType:"d6",formatResult:a=>({roll:a.roll,result:a.title,detail:a.desc})}),r.jsx(Se,{title:"Space Obstacle",table:_e.spaceObstacles,variant:"cyan",diceType:"d6"}),r.jsx(Se,{title:"Hyperspace Mishap",table:_e.hyperspaceMishaps,variant:"red",diceType:"d6"})]})}),r.jsx(dt,{title:"Site Explorer (Dangerous Locations)",defaultOpen:!1,children:r.jsx(IS,{})}),r.jsx(dt,{title:"Dangerous Location Quick Roll",defaultOpen:!1,children:r.jsx(Se,{title:"Ship/Base Location",table:[],variant:"cyan",diceType:"d20",rollFunction:()=>ql(s.threatDie||1)})})]})}function WS(){const{addLog:s}=Pe();return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"text-accent-yellow font-orbitron text-lg font-bold uppercase mb-4",children:"Characters & Names"}),r.jsx(dt,{title:"NPC Generator",defaultOpen:!0,children:r.jsx(HS,{})}),r.jsx(dt,{title:"Name Generators",defaultOpen:!1,children:r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(Se,{title:"Baseline Name",table:Ze.baselineFirst,variant:"yellow",diceType:"d10"}),r.jsx(Se,{title:"Family Name",table:Ze.familyNames,variant:"yellow",diceType:"d10"}),r.jsx(Se,{title:"Bot Name",table:Ze.botNames,variant:"cyan",diceType:"d10"}),r.jsx(Se,{title:"Ship Name",table:Ze.shipNames,variant:"cyan",diceType:"d10"}),r.jsx(Se,{title:"Planet Name",table:Ze.planetNames,variant:"cyan",diceType:"d20"}),r.jsx(Se,{title:"Settlement Name",table:Ze.settlementNames,variant:"cyan",diceType:"d10"}),r.jsx(Se,{title:"Legionary Name",table:Ze.legionaryNames,variant:"red",diceType:"d10"}),r.jsx(Se,{title:"Bounty Hunter",table:Ze.bountyHunterNames,variant:"red",diceType:"d8"}),r.jsx(Se,{title:"Crime Lord",table:Ze.crimeLordNames,variant:"red",diceType:"d10"}),r.jsx(Se,{title:"Pirate Crew",table:Ze.pirateCrewNames,variant:"red",diceType:"d10"})]})})]})}function QS(){const{addLog:s}=Pe(),a=i=>{const o=te(6),u=te(6),h=o+u;if(h>i){const m=te(6)<=4?"FLEES":"SURRENDERS";return s(`Morale Check [${o}, ${u}] = ${h} vs ${i}  FAIL! Enemy ${m}`,"danger"),{success:!0,total:h,result:m}}else return s(`Morale Check [${o}, ${u}] = ${h} vs ${i}  Holds firm`,"roll"),{success:!1,total:h}};return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"text-accent-red font-orbitron text-lg font-bold uppercase mb-4",children:"Combat & Enemies"}),r.jsx(dt,{title:"Morale Check (2D6)",defaultOpen:!1,children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"Roll when: Leader killed, Half group eliminated, or Single enemy at 1/3 HP"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ei,{morale:6,label:"MRL 6 (Foot Soldiers)",onCheck:a}),r.jsx(ei,{morale:7,label:"MRL 7 (Pirates, Minions)",onCheck:a}),r.jsx(ei,{morale:8,label:"MRL 8 (Squad, Gangsters)",onCheck:a}),r.jsx(ei,{morale:9,label:"MRL 9 (Officer, Beasts)",onCheck:a}),r.jsx(ei,{morale:10,label:"MRL 10 (Elite, Leaders)",onCheck:a})]}),r.jsx("p",{className:"text-gray-400 text-xs mt-3",children:"Success (roll > MRL): Roll d6  1-4 Flees, 5-6 Surrenders"})]})}),r.jsx(dt,{title:"Enemy Generators",defaultOpen:!0,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(qS,{}),r.jsx("div",{className:"border-t-2 border-accent-red/30"}),r.jsx(PS,{})]})}),r.jsx(dt,{title:"Enemy Reference",defaultOpen:!1,children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"text-sm font-orbitron text-accent-cyan uppercase mb-2",children:"Personnel"}),fg.personnel.map((i,o)=>r.jsxs("div",{className:"border-2 border-accent-red p-2 bg-bg-primary",children:[r.jsx("div",{className:"text-accent-red font-orbitron font-bold",children:i.name}),r.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs text-gray-300 mt-1",children:[r.jsxs("div",{children:["HP: ",i.hp]}),r.jsxs("div",{children:["Morale: ",i.morale]}),r.jsxs("div",{children:["Armor: ",i.armor]}),r.jsxs("div",{children:["Weapon: ",i.weapon]}),r.jsx("div",{className:"col-span-2 text-gray-400",children:i.notes})]})]},o)),r.jsx("div",{className:"text-sm font-orbitron text-accent-cyan uppercase mt-4 mb-2",children:"Monsters"}),fg.monsters.map((i,o)=>r.jsxs("div",{className:"border-2 border-accent-red p-2 bg-bg-primary",children:[r.jsx("div",{className:"text-accent-red font-orbitron font-bold",children:i.name}),r.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs text-gray-300 mt-1",children:[r.jsxs("div",{children:["HP: ",i.hp]}),r.jsxs("div",{children:["Morale: ",i.morale]}),r.jsxs("div",{children:["Armor: ",i.armor]}),r.jsxs("div",{children:["Weapon: ",i.weapon]}),r.jsx("div",{className:"col-span-2 text-gray-400",children:i.notes})]})]},o))]})}),r.jsx(dt,{title:"Equipment & Loot",defaultOpen:!1,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(Se,{title:"Melee Weapon",table:$u.meleeWeapons,variant:"cyan",diceType:"d10"}),r.jsx(Se,{title:"Ranged Weapon",table:$u.rangedWeapons,variant:"cyan",diceType:"d6"}),r.jsx(Se,{title:"General Gear",table:$u.gear,variant:"cyan",diceType:"d8"}),r.jsx(Se,{title:"Space Junk",table:hS.spaceJunk,variant:"yellow",diceType:"d8"})]})})]})}function ZS(){return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"text-accent-cyan font-orbitron text-lg font-bold uppercase mb-4",children:"Character Creation"}),r.jsx(dt,{title:"Starting Character",defaultOpen:!0,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(Se,{title:"Galactic Species",table:la.galacticSpecies,variant:"cyan",diceType:"d10"}),r.jsx(Se,{title:"Rebel Motivation",table:la.rebelMotivations,variant:"yellow",diceType:"d10"}),r.jsx(Se,{title:"Nick (Special Item)",table:la.nicks,variant:"yellow",diceType:"d6"}),r.jsx(Se,{title:"Knack (Special Ability)",table:la.knacks,variant:"cyan",diceType:"d6"})]})}),r.jsx(dt,{title:"Starting Gear (Bobs)",defaultOpen:!1,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(Se,{title:"Starting Weapon",table:la.bobsWeapons,variant:"red",diceType:"d6"}),r.jsx(Se,{title:"Starting Gear",table:la.bobsGear,variant:"cyan",diceType:"d6"}),r.jsx(Se,{title:"Starting Armor",table:la.bobsArmor,variant:"yellow",diceType:"d6"})]})}),r.jsx(dt,{title:"Class Tables",defaultOpen:!1,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"text-sm font-orbitron text-accent-cyan uppercase",children:"Bot"}),r.jsx(Se,{title:"Bot Function",table:bn.botFunctions,variant:"cyan",diceType:"d6"}),r.jsx(Se,{title:"Bot Malfunction",table:bn.botMalfunctions,variant:"red",diceType:"d6"}),r.jsx(Se,{title:"Bot Mod",table:bn.botMods,variant:"yellow",diceType:"d6"}),r.jsx("div",{className:"text-sm font-orbitron text-accent-cyan uppercase mt-4",children:"Bounty Hunter"}),r.jsx(Se,{title:"Bounty Hunter Skill",table:bn.bountyHunterSkills,variant:"cyan",diceType:"d6"}),r.jsx(Se,{title:"Soft Spot",table:bn.bountyHunterSoftSpots,variant:"yellow",diceType:"d6"}),r.jsx("div",{className:"text-sm font-orbitron text-accent-cyan uppercase mt-4",children:"Other Classes"}),r.jsx(Se,{title:"Magi Art",table:bn.magiArts,variant:"cyan",diceType:"d4"}),r.jsx(Se,{title:"Smuggler Trick",table:bn.smugglerTricks,variant:"cyan",diceType:"d6"}),r.jsx(Se,{title:"Technician Scratch Build",table:bn.technicianScratchBuilds,variant:"yellow",diceType:"d6"})]})})]})}function XS(){return r.jsx(VS,{})}const FS={threatDie:{title:"Threat Die",description:"The Threat Die (TD) is used to ramp up the general sense of 'heat' or 'pressure' against your Rebel. Use a D6 (preferably of a different color from your other dice) to represent your TD. It starts at 1 and can increase to 6.",sections:[{heading:"Increase the Threat Die When...",type:"info",items:["A new threat presents itself or you begin a new Danger Clock.","Roll a Blunder.","Begin an Escape from a Dangerous Location."]},{heading:"Decrease the Threat Die When...",type:"success",items:["Complete a Mission Track or Resolve a Danger Clock.","Roll a Critical.","Your Rebel has a moment to catch their breath in a safe or hidden location."]},{heading:"When the Threat Die Reaches 6...",type:"danger",items:["Advance all Danger Clocks by one.","Or completely fill a single Danger Clock."],note:"This is a critical moment! The pressure has built to maximum. Choose one of the two options above, then reset the Threat Die as appropriate."}]},missionTracks:{title:"Mission Tracks",description:"Mission Tracks are a helpful way of keeping track of your Rebel's progress on their current missions. Some tracks will be long-term, some average length, and others very short. Each has a number of tracking boxes and a Difficulty Rating (DR).",sections:[{heading:"Setting Up a Mission",type:"info",items:["Decide on length/difficulty of the mission and draw the check boxes.","SHORT / EASY - four boxes - DR10","AVERAGE / NORMAL - six boxes - DR12","LONG / DIFFICULT - eight boxes - DR14","GALAXY SAVING - ten boxes - DR16"]},{heading:"Making Progress",type:"info",items:["Each time you make progress in the mission, check off one box.","It is up to you as the Player/GM to decide what constitutes progress.","If you've rolled a Strong Hit in a relevant Test, filling in two progress boxes would be appropriate."]},{heading:"Completing Missions",type:"success",content:"You may attempt to complete a mission at any point (even before the track is filled) by making a Progress Test: Roll D20 + Current Progress against the Mission's DR.",items:["SUCCESS - You've completed the mission.","FAIL - You're not done yet. Remove 1 progress and increase TD by 1."]},{heading:"Example Missions",type:"info",examples:[{type:"Long",description:"Revenge on the one who killed your family; re-stealing the ship you gambled away; corrupting a government official; building a hidden base."},{type:"Average",description:"Repairing a badly damaged bot; delivering contraband; building a Blazer Sword."},{type:"Short",description:"Dismantling a rival's ship; hacking into a console; navigating an asteroid field."}]}]},dangerClocks:{title:"Danger Clocks",description:"Danger Clocks function much like Mission Tracks, but operate for the wider world against your Rebel. When something in the world presents itself that directly opposes your Rebel's existence, start a Danger Clock for it. Clocks are broken into 4, 6, 8, or 10 segments.",sections:[{heading:"Advance the Danger Clock When...",type:"danger",items:["Fail a Test related to the Clock (even if you use a Destiny Point to reroll).","Roll a Scene Shakeup or new Event.","Enter a new scene with an unresolved Danger Clock."]},{heading:"Resolving a Danger Clock",type:"danger",content:"When a Clock is filled, the result happens. Reserve Danger Clocks for events that will present very challenging situations.",items:["When a Clock is filled, the consequence occurs immediately.","When a Mission is completed and danger is avoided, remove the Danger Clock, regardless of how far along it has progressed."]},{heading:"Example Danger Clocks",type:"info",examples:[{segments:4,description:"Legionary reinforcements are on the way"},{segments:6,description:"The reactor core is overheating"},{segments:8,description:"The ion storm rages around your ship"},{segments:10,description:"An Elite Bounty Hunter is hunting you down"}]}]}};function eN({isOpen:s,onClose:a,initialTab:i="threatDie"}){const o=[{id:"threatDie",label:"Threat Die",icon:""},{id:"missionTracks",label:"Mission Tracks",icon:""},{id:"dangerClocks",label:"Danger Clocks",icon:""}],[u,h]=O.useState(i);if(O.useEffect(()=>{if(!s)return;const g=x=>{x.key==="Escape"&&a()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s,a]),O.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),!s)return null;const f=FS[u],p=g=>{switch(g){case"danger":return r.jsx(wn,{className:"w-5 h-5 text-accent-red"});case"success":return r.jsx(dy,{className:"w-5 h-5 text-accent-cyan"});default:return r.jsx(dj,{className:"w-5 h-5 text-accent-yellow"})}},m=g=>{switch(g){case"danger":return"border-accent-red";case"success":return"border-accent-cyan";default:return"border-accent-yellow"}};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-end",children:[r.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:a}),r.jsxs("div",{className:"relative w-full max-w-[420px] h-full bg-bg-primary border-l-3 border-accent-cyan flex flex-col slide-in-right shadow-2xl",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none scanlines opacity-30"}),r.jsxs("div",{className:"relative z-10 flex items-center justify-between px-6 py-4 border-b-3 border-accent-cyan bg-bg-secondary",children:[r.jsx("h2",{className:"font-orbitron font-bold text-xl text-accent-cyan uppercase",children:"Game Help"}),r.jsx("button",{onClick:a,className:"p-2 hover:bg-accent-cyan hover:text-bg-primary transition-all duration-200 border-2 border-accent-cyan","aria-label":"Close help",children:r.jsx(jn,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"relative z-10 flex border-b-3 border-accent-cyan bg-bg-secondary",children:o.map(g=>r.jsxs("button",{onClick:()=>h(g.id),className:`flex-1 px-3 py-3 font-orbitron text-xs uppercase transition-all duration-200 border-r-2 last:border-r-0 ${u===g.id?"bg-accent-cyan text-bg-primary font-bold":"bg-transparent text-text-primary hover:bg-accent-cyan/20 border-accent-cyan"}`,children:[r.jsx("span",{className:"block text-lg mb-1",children:g.icon}),r.jsx("span",{className:"block leading-tight",children:g.label})]},g.id))}),r.jsxs("div",{className:"relative z-10 flex-1 overflow-y-auto p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-orbitron font-bold text-2xl text-accent-yellow mb-3",children:f.title}),r.jsx("p",{className:"text-text-primary leading-relaxed",children:f.description})]}),f.sections.map((g,x)=>r.jsxs("div",{className:`border-3 ${m(g.type)} p-4 space-y-3 bg-bg-secondary/50`,children:[r.jsxs("div",{className:"flex items-start gap-3",children:[p(g.type),r.jsx("h4",{className:"font-orbitron font-bold text-lg text-accent-cyan uppercase flex-1",children:g.heading})]}),g.content&&r.jsx("p",{className:"text-text-primary leading-relaxed pl-8",children:g.content}),g.items&&r.jsx("ul",{className:"space-y-2 pl-8",children:g.items.map((j,v)=>r.jsxs("li",{className:"text-text-primary leading-relaxed flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-yellow mt-1",children:""}),r.jsx("span",{className:"flex-1",children:j})]},v))}),g.examples&&r.jsx("div",{className:"space-y-3 pl-8",children:g.examples.map((j,v)=>r.jsxs("div",{className:"text-text-primary",children:[j.type&&r.jsxs("span",{className:"font-orbitron font-bold text-accent-yellow",children:[j.type,":"," "]}),j.segments&&r.jsxs("span",{className:"font-orbitron font-bold text-accent-red",children:[j.segments," Segments:"," "]}),r.jsx("span",{className:"text-gray-300",children:j.description})]},v))}),g.note&&r.jsx("div",{className:"pl-8 pt-2 border-t-2 border-accent-yellow/30 mt-3",children:r.jsx("p",{className:"text-accent-yellow italic text-sm leading-relaxed",children:g.note})})]},x))]}),r.jsx("div",{className:"relative z-10 px-6 py-3 border-t-3 border-accent-cyan bg-bg-secondary text-center",children:r.jsxs("p",{className:"text-gray-500 text-xs font-orbitron uppercase",children:["Press ",r.jsx("span",{className:"text-accent-cyan",children:"ESC"})," to close"]})})]})]})}function fe(s){return Math.floor(Math.random()*s)+1}function pd(s,a){let i=0;for(let o=0;o<s;o++)i+=fe(a);return i}function py(s,a,i=0){const o=pd(s,a)+i;return Math.max(1,o)}function tN(s){return s<=4?-3:s<=6?-2:s<=8?-1:s<=12?0:s<=14?1:s<=16?2:3}function ja(s,a,i=0){const o=py(s,a,i);return tN(o)}function tr(){return fe(20)}function aN(){const s=tr(),a=tr();return Math.max(s,a)}function nN(){const s=tr(),a=tr();return Math.min(s,a)}function sN(s,a,i=!1,o=!1){let u;i?u=aN():o?u=nN():u=tr();const h=u+s,f=h>=a;return{roll:u,total:h,success:f,crit:u===20,blunder:u===1,dr:a}}function rN(s,a={count:1,sides:8,modifier:0}){const i=py(a.count,a.sides,a.modifier);return a.ignoreSTR?Math.max(1,i):Math.max(1,i+s)}function iN(s={count:1,sides:2}){return pd(s.count,s.sides)}function lN({character:s}){const{user:a}=Fl(),{addLog:i}=Pe(),[o,u]=O.useState(null),[h,f]=O.useState(s),p=O.useRef(h);O.useEffect(()=>{f(s),p.current=s},[s]);const m=h,g=a?.id===m.user_id,x=async(U,A)=>{try{const{data:I,error:L}=await Ke.from("characters").update({[U]:A}).eq("id",m.id).select().single();if(L)throw L;if(I){const G={...p.current,[U]:A};f(G),p.current=G}return I}catch(I){throw console.error("Error updating character field:",I),I}},j=m.hp_current/m.hp_max*100,v=async U=>{if(!g)return;const A=p.current,I=Math.max(0,Math.min(A.hp_max,A.hp_current+U));await x("hp_current",I)},w=async U=>{if(!g)return;const I=p.current.destiny_points||0,L=Math.max(0,I+U);await x("destiny_points",L)},_=async U=>{if(!g)return;const A=p.current,I=Math.max(0,A.bits+U);await x("bits",I)},S=U=>U>0?`+${U}`:U===0?"0":`${U}`,E=U=>U>=2?"text-accent-green":U>=1?"text-accent-cyan":U===0?"text-text-primary":U>=-1?"text-accent-yellow":"text-accent-red",q=(U,A)=>{g&&(u(U),setTimeout(()=>{const I=tr(),L=I+A,G=I===20,Z=I===1;let X=`${U.toUpperCase()} Test: [${I}] ${S(A)} = ${L}`;G?X+="  CRITICAL ":Z&&(X+="  FUMBLE "),i(X,G?"success":Z?"danger":"roll"),u(null)},400))};return r.jsxs("div",{className:`border rounded p-2 transition-all ${g?"bg-bg-primary border-accent-yellow shadow-lg shadow-accent-yellow/20":"bg-bg-primary/50 border-accent-cyan/30"}`,children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("h4",{className:`font-orbitron font-bold text-xs truncate ${g?"text-accent-yellow":"text-text-primary"}`,children:[m.name||"Unnamed Rebel",g&&r.jsx("span",{className:"ml-1 text-[8px] text-accent-yellow/60",children:"(YOU)"})]}),r.jsxs("p",{className:"text-text-secondary text-[9px] font-mono capitalize",children:[m.class_name||m.class,"  ",m.species]})]})}),r.jsxs("div",{className:"bg-bg-primary border border-accent-red rounded p-1.5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(cj,{className:"w-2.5 h-2.5 text-accent-red"}),r.jsx("span",{className:"text-[9px] font-mono text-text-secondary uppercase",children:"HP"})]}),r.jsxs("div",{className:"font-orbitron font-bold text-accent-red text-xs",children:[m.hp_current," / ",m.hp_max]})]}),r.jsx("div",{className:"relative h-1 bg-bg-secondary rounded-full overflow-hidden mb-1",children:r.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-accent-red to-accent-red/60 transition-all duration-300",style:{width:`${j}%`}})}),g&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>v(-5),disabled:m.hp_current===0,className:"flex-1 px-1 py-0.5 bg-accent-red/20 border border-accent-red text-accent-red text-[9px] font-orbitron hover:bg-accent-red hover:text-bg-primary transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"-5"}),r.jsx("button",{onClick:()=>v(-1),disabled:m.hp_current===0,className:"flex-1 px-1 py-0.5 bg-accent-red/20 border border-accent-red text-accent-red text-[9px] font-orbitron hover:bg-accent-red hover:text-bg-primary transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:r.jsx(fd,{className:"w-2 h-2 mx-auto"})}),r.jsx("button",{onClick:()=>v(1),disabled:m.hp_current===m.hp_max,className:"flex-1 px-1 py-0.5 bg-accent-cyan/20 border border-accent-cyan text-accent-cyan text-[9px] font-orbitron hover:bg-accent-cyan hover:text-bg-primary transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:r.jsx(Fn,{className:"w-2 h-2 mx-auto"})}),r.jsx("button",{onClick:()=>v(5),disabled:m.hp_current===m.hp_max,className:"flex-1 px-1 py-0.5 bg-accent-cyan/20 border border-accent-cyan text-accent-cyan text-[9px] font-orbitron hover:bg-accent-cyan hover:text-bg-primary transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"+5"})]})]}),g&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-4 gap-1 mt-2",children:Object.entries(m.stats).map(([U,A])=>r.jsxs("button",{onClick:()=>q(U,A),disabled:o===U,className:"bg-bg-primary border border-accent-cyan/30 hover:border-accent-cyan hover:shadow-[0_0_8px_rgba(0,240,255,0.3)] transition-all p-1.5 text-center group disabled:animate-pulse",children:[r.jsx("div",{className:"text-[9px] font-mono text-text-secondary uppercase mb-0.5",children:U}),r.jsx("div",{className:`text-lg font-orbitron font-bold leading-none ${E(A)}`,children:S(A)})]},U))}),r.jsxs("div",{className:"flex items-center gap-2 bg-bg-primary border border-accent-yellow/30 rounded p-1.5 mt-2",children:[r.jsxs("div",{className:"flex items-center gap-1.5 flex-1",children:[r.jsx(Gj,{className:"w-3 h-3 text-accent-yellow flex-shrink-0"}),r.jsxs("div",{className:"flex items-center gap-1 flex-1",children:[r.jsx("span",{className:"text-[9px] font-mono text-text-secondary uppercase",children:"Destiny:"}),r.jsx("span",{className:"text-base font-orbitron font-bold text-accent-yellow",children:m.destiny_points||0})]}),r.jsx("button",{onClick:()=>w(-1),disabled:!m.destiny_points||m.destiny_points===0,className:"px-1.5 py-0.5 bg-accent-red/20 border border-accent-red text-accent-red text-[8px] font-orbitron hover:bg-accent-red hover:text-bg-primary transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"-1"}),r.jsx("button",{onClick:()=>w(1),className:"px-1.5 py-0.5 bg-accent-cyan/20 border border-accent-cyan text-accent-cyan text-[8px] font-orbitron hover:bg-accent-cyan hover:text-bg-primary transition-all",children:"+1"})]}),r.jsx("div",{className:"w-px h-6 bg-accent-cyan/30"}),r.jsxs("div",{className:"flex items-center gap-1.5 flex-1",children:[r.jsx(ed,{className:"w-3 h-3 text-accent-cyan flex-shrink-0"}),r.jsxs("div",{className:"flex items-center gap-1 flex-1",children:[r.jsx("span",{className:"text-[9px] font-mono text-text-secondary uppercase",children:"Bits:"}),r.jsx("span",{className:"text-base font-orbitron font-bold text-accent-cyan",children:m.bits||0})]}),r.jsx("button",{onClick:()=>_(-1),disabled:!m.bits||m.bits===0,className:"px-1.5 py-0.5 bg-accent-red/20 border border-accent-red text-accent-red text-[8px] font-orbitron hover:bg-accent-red hover:text-bg-primary transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"-1"}),r.jsx("button",{onClick:()=>_(1),className:"px-1.5 py-0.5 bg-accent-cyan/20 border border-accent-cyan text-accent-cyan text-[8px] font-orbitron hover:bg-accent-cyan hover:text-bg-primary transition-all",children:"+1"})]})]})]})]})}function oN({onExpand:s}){const{partyMembers:a,loading:i}=pi(),{user:o}=Fl();if(i)return r.jsxs("div",{className:"text-center text-text-secondary text-sm font-mono p-4 space-y-3",children:[r.jsxs("div",{className:"text-accent-cyan",children:[">"," Loading party members..."]}),r.jsxs("div",{className:"flex justify-center gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-accent-cyan rounded-full animate-pulse",style:{animationDelay:"0ms"}}),r.jsx("span",{className:"w-2 h-2 bg-accent-cyan rounded-full animate-pulse",style:{animationDelay:"150ms"}}),r.jsx("span",{className:"w-2 h-2 bg-accent-cyan rounded-full animate-pulse",style:{animationDelay:"300ms"}})]})]});if(!a||a.length===0)return r.jsxs("div",{className:"text-center text-text-secondary text-sm font-mono p-4",children:[">"," No party members in this room"]});const u=[...a].sort((h,f)=>h.user_id===o?.id?-1:f.user_id===o?.id?1:0);return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xj,{className:"w-4 h-4 text-accent-cyan"}),r.jsxs("h3",{className:"font-orbitron font-bold text-accent-cyan text-sm",children:["Party (",a.length,")"]})]}),s&&r.jsx("button",{onClick:s,className:"p-1 text-accent-cyan hover:text-accent-cyan/80 hover:bg-accent-cyan/10 transition-all rounded",title:"Expand character sheet",children:r.jsx(hy,{className:"w-3 h-3"})})]}),r.jsx("div",{className:"space-y-2",children:u.map(h=>r.jsx(lN,{character:h},h.id))})]})}const si={bot:{id:"bot",name:"Bot",description:"Curse the Maker! Your clanking body of servos and circuits can barely manage stairs.",hpDice:{count:3,sides:6,modifier:0,ignoreSTR:!0},destinyDice:{count:1,sides:2},statModifiers:{agi:{count:3,sides:6,modifier:-2}},special:"Bot Repair Rules: Must destroy mechanical equipment to benefit from rest",specialRules:[{name:"METAL",description:"Roll 3d6 for HP (no STR modifier)"},{name:"CLUMSY",description:"Roll 3d6-2 for AGI"},{name:"BOT REPAIR RULES",description:"Must destroy a piece of mechanical equipment to use its components to benefit from rest. Roll with advantage if a Technician helps."}]},bountyHunter:{id:"bountyHunter",name:"Bounty Hunter",description:"You've been to one end of the Galaxy to the next, caught a lot of bounties.",hpDice:{count:1,sides:8,modifier:0},destinyDice:{count:1,sides:2},statModifiers:{str:{count:3,sides:6,modifier:2}},special:"Has a soft spot for certain types of people",specialRules:[{name:"HARDENED",description:"Roll 3d6+2 for STR"},{name:"SOFT SPOT",description:"You have a soft spot for certain types. They remind you of happier times. Regain a Destiny Point if you help them (but look tough while doing it). Discard your Heirloom Weapon if you don't."}]},magiKnight:{id:"magiKnight",name:"Magi Knight",description:"For a thousand generations, the Magi Knights were the guardians of peace.",hpDice:{count:1,sides:8,modifier:0},destinyDice:{count:1,sides:2},statModifiers:{knw:{count:3,sides:6,modifier:2}},special:"Has Blazer Sword and Magi Arts, but risks Dragoon detection",specialRules:[{name:"WISE",description:"Roll 3d6+2 for KNW"},{name:"DRAGOON TEST",description:"Each time you use Magi Arts or ignite Blazer Sword, roll D20. If you roll equal to or below threshold (starts at 5), the Dragoons sense your presence. The threshold increases by 1 each time you use these powers."},{name:"BURNER IDENTITY",description:"You are in hiding. Your Burner Identity has a quirk that triggers on ability test failures. Roll with advantage when a Youngster is close by."},{name:"BLAZER SWORD",description:"Your Magi weapon - retractable beam of energy (2D6 damage)"}]},smuggler:{id:"smuggler",name:"Smuggler",description:"You look out for just one person in the galaxy, yourself.",hpDice:{count:1,sides:8,modifier:0},destinyDice:{count:1,sides:2},statModifiers:{prs:{count:3,sides:6,modifier:2}},special:"Owns a ramshackle ship and carries contraband",specialRules:[{name:"SWINDLER",description:"Roll 3d6+2 for PRS. Regain 1 Destiny Point when you lie your way out of a problem."},{name:"SCUM",description:'Roll D20 whenever you arrive at a new spaceport. On a blunder, you inconveniently run into an "old friend" who wants payback.'},{name:"HUNK OF JUNK",description:"You own a ramshackle but trustworthy ship."},{name:"CONTRABAND",description:"You are smuggling contraband with Containment Points. When you roll a blunder on any test, reduce Containment Points by 1. When it reaches 0, contraband is no longer salable or safe."}]},technician:{id:"technician",name:"Technician",description:"It's not your fault! The life support was repaired with gardening equipment!",hpDice:{count:1,sides:8,modifier:0},destinyDice:{count:1,sides:2},statModifiers:{knw:{count:3,sides:6,modifier:2},prs:{count:3,sides:6,modifier:-1}},special:"Can invent flimsy devices with Hack Job rules",specialRules:[{name:"HANDY",description:"Roll 3d6+2 for KNW"},{name:"SPACEY",description:"Roll 3d6-1 for PRS"},{name:"HACK JOB RULES",description:"Invent flimsy devices with bizarrely jerry-rigged components. To make a device that works for a single round, destroy two mechanical items and combine their components. Flip a coin: heads it works, tails it doesn't."},{name:"JUNK DRAWER",description:"You have D4 extra inventory slots for small broken machines to be sacrificed for Hack Job parts."}]},youngster:{id:"youngster",name:"Youngster",description:"You are meant for bigger things. You know that your family tree has greatness in it.",hpDice:{count:1,sides:8,modifier:0},destinyDice:{count:1,sides:4},statModifiers:{},special:"Has an heirloom item from their mysterious past",specialRules:[{name:"LUCKY",description:"Roll D4 for Destiny Points (instead of D2)"},{name:"MYSTERIOUS PAST",description:"Tragedy struck your guardians. You have an heirloom from your mysterious lineage."},{name:"KNACK",description:"You have a special knack or skill from your upbringing."}]}},Pl=[{id:"baselineHuman",name:"Baseline Human",description:"Standard galactic citizen"},{id:"woolyAnthrosquatch",name:"Wooly Anthrosquatch",description:"Large, hairy bipedal creature"},{id:"fishEyedIchthyoid",name:"Fish-eyed Ichthyoid",description:"Aquatic humanoid with large eyes"},{id:"scaleyLacertian",name:"Scaley Lacertian",description:"Reptilian species with scales"},{id:"flatheadedTricladid",name:"Flatheaded Tricladid",description:"Creature with distinctive flat head"},{id:"runtishZinto",name:"Runtish Zinto",description:"Small but resilient species"},{id:"suckerLippedAnuran",name:"Sucker-lipped Anuran",description:"Amphibian-like with sucker lips"},{id:"flightlessMacrobat",name:"Flightless Macrobat",description:"Large bat-like creature that cannot fly"},{id:"lithePseudopoid",name:"Lithe Pseudopoid",description:"Flexible and agile species"},{id:"littleUrsanid",name:"Little Ursanid",description:"Small bear-like creature"}];function cN(){const{character:s,updateField:a}=ar(),[i,o]=O.useState(s?.journal||""),u=my(i,2e3);if(O.useEffect(()=>{s?.journal!==i&&s?.journal!==u&&o(s?.journal||"")},[s?.journal]),O.useEffect(()=>{s&&u!==s.journal&&a("journal",u)},[u]),!s)return null;const h=i!==s.journal;return r.jsxs("div",{className:"flex flex-col gap-2 min-h-[200px]",children:[r.jsx("textarea",{value:i,onChange:f=>o(f.target.value),placeholder:">> PERSONAL LOG: Track your character's thoughts, goals, relationships, secrets, and discoveries...",className:"flex-1 w-full px-3 py-2 bg-bg-primary border-2 border-accent-yellow text-text-primary focus:outline-none focus:border-accent-cyan focus:shadow-[0_0_15px_rgba(0,240,255,0.4)] transition-all duration-300 font-mono text-sm resize-y min-h-[180px]"}),r.jsx("div",{className:"text-xs text-gray-500 font-orbitron",children:h?r.jsx("span",{className:"text-accent-yellow animate-pulse",children:" Saving..."}):r.jsx("span",{className:"text-accent-cyan",children:" Synced"})})]})}function yg({isOpen:s,onClose:a}){const{character:i,updateCharacter:o,updateField:u,deleteCharacter:h}=ar(),[f,p]=O.useState(null),[m,g]=O.useState(!1),[x,j]=O.useState(!1);if(O.useEffect(()=>{i&&p({...i})},[i]),O.useEffect(()=>{const L=G=>{s&&G.key==="Escape"&&a()};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[s,a]),!s||!f)return null;const v=L=>L>0?`+${L}`:L===0?"0":`${L}`,w=L=>L>=2?"text-accent-green":L>=1?"text-accent-cyan":L===0?"text-text-primary":L>=-1?"text-accent-yellow":"text-accent-red",_=async(L,G)=>{p(Z=>({...Z,[L]:G}));try{await u(L,G)}catch(Z){console.error("Failed to update field:",Z)}},S=async(L,G)=>{const Z=f.stats[L],X=Math.max(-3,Math.min(3,Z+G)),xe={...f.stats,[L]:X};p(Le=>({...Le,stats:xe}));try{await u("stats",xe)}catch(Le){console.error("Failed to update stats:",Le)}},E=async()=>{const L=[...f.equipment||[],"New Item"];p(G=>({...G,equipment:L}));try{await u("equipment",L)}catch(G){console.error("Failed to add equipment:",G)}},q=async(L,G)=>{const Z=[...f.equipment];Z[L]=G,p(X=>({...X,equipment:Z}));try{await u("equipment",Z)}catch(X){console.error("Failed to update equipment:",X)}},U=async L=>{const G=f.equipment.filter((Z,X)=>X!==L);p(Z=>({...Z,equipment:G}));try{await u("equipment",G)}catch(Z){console.error("Failed to remove equipment:",Z)}},A=async()=>{try{j(!0),await h(),g(!1),a()}catch(L){console.error("Failed to delete character:",L),alert("Failed to delete character. Please try again.")}finally{j(!1)}},I=r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/70 z-40 animate-fade-in",onClick:a}),r.jsxs("div",{className:"fixed top-0 right-0 h-full w-full md:w-[600px] lg:w-[700px] bg-bg-primary border-l-4 border-accent-cyan shadow-2xl z-50 slide-in-right overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"bg-bg-secondary border-b-3 border-accent-cyan p-4 flex items-center justify-between shrink-0",children:[r.jsx("h2",{className:"text-2xl font-orbitron font-bold text-accent-cyan text-glow-cyan",children:"CHARACTER SHEET"}),r.jsx("button",{onClick:a,className:"p-2 text-accent-cyan hover:text-accent-red hover:bg-accent-red/10 transition-all rounded",children:r.jsx(jn,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-orbitron font-bold text-accent-yellow uppercase border-b border-accent-yellow/30 pb-2",children:"Basic Information"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1 uppercase",children:"Character Name"}),r.jsx("input",{type:"text",value:f.name||"",onChange:L=>_("name",L.target.value),placeholder:"Enter rebel name...",className:"w-full bg-bg-secondary border-2 border-accent-cyan/30 rounded px-3 py-2 text-text-primary font-mono focus:outline-none focus:border-accent-cyan focus:shadow-[0_0_10px_rgba(0,240,255,0.4)] transition-all"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1 uppercase",children:"Class"}),r.jsx("div",{className:"bg-bg-secondary border-2 border-accent-cyan/30 rounded px-3 py-2 text-text-primary font-mono capitalize",children:f.className||f.class})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1 uppercase",children:"Species"}),r.jsx("select",{value:f.species||"",onChange:L=>_("species",L.target.value),className:"w-full bg-bg-secondary border-2 border-accent-cyan/30 rounded px-3 py-2 text-text-primary font-mono focus:outline-none focus:border-accent-cyan [&>option]:bg-bg-secondary [&>option]:text-text-primary",children:f.class==="bot"?r.jsx("option",{value:"Bot",children:"Bot"}):Pl.map(L=>r.jsx("option",{value:L.name,children:L.name},L.id))})]})]}),f.motivation&&r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1 uppercase",children:"Rebel Motivation"}),r.jsx("div",{className:"bg-bg-secondary border-2 border-accent-yellow/30 rounded px-3 py-2 text-text-primary font-mono text-sm",children:f.motivation})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-orbitron font-bold text-accent-yellow uppercase border-b border-accent-yellow/30 pb-2",children:"Ability Scores"}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(f.stats).map(([L,G])=>r.jsxs("div",{className:"bg-bg-secondary border-2 border-accent-cyan/30 rounded p-3",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx("span",{className:"text-xs font-mono text-text-secondary uppercase",children:L})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>S(L,-1),className:"px-2 py-1 bg-accent-red/20 border border-accent-red text-accent-red font-bold hover:bg-accent-red hover:text-bg-primary transition-all",children:"-"}),r.jsx("div",{className:`flex-1 text-center text-2xl font-orbitron font-bold ${w(G)}`,children:v(G)}),r.jsx("button",{onClick:()=>S(L,1),className:"px-2 py-1 bg-accent-cyan/20 border border-accent-cyan text-accent-cyan font-bold hover:bg-accent-cyan hover:text-bg-primary transition-all",children:"+"})]})]},L))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-orbitron font-bold text-accent-yellow uppercase border-b border-accent-yellow/30 pb-2",children:"Vitals"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-bg-secondary border-2 border-accent-red rounded p-3",children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1 uppercase",children:"HP Current"}),r.jsx("input",{type:"number",value:f.hp_current,onChange:L=>_("hp_current",Math.max(0,parseInt(L.target.value)||0)),min:"0",className:"w-full text-2xl font-orbitron font-bold text-accent-red bg-transparent border-0 focus:outline-none"})]}),r.jsxs("div",{className:"bg-bg-secondary border-2 border-accent-red rounded p-3",children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1 uppercase",children:"HP Max"}),r.jsx("input",{type:"number",value:f.hp_max,onChange:L=>_("hp_max",Math.max(1,parseInt(L.target.value)||1)),min:"1",className:"w-full text-2xl font-orbitron font-bold text-accent-red bg-transparent border-0 focus:outline-none"})]}),r.jsxs("div",{className:"bg-bg-secondary border-2 border-accent-yellow rounded p-3",children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1 uppercase",children:"Destiny"}),r.jsx("input",{type:"number",value:f.destiny_points||0,onChange:L=>_("destiny_points",Math.max(0,parseInt(L.target.value)||0)),min:"0",className:"w-full text-2xl font-orbitron font-bold text-accent-yellow bg-transparent border-0 focus:outline-none"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-orbitron font-bold text-accent-yellow uppercase border-b border-accent-yellow/30 pb-2",children:"Currency"}),r.jsxs("div",{className:"bg-bg-secondary border-2 border-accent-cyan rounded p-3",children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1 uppercase",children:"Bits "}),r.jsx("input",{type:"number",value:f.bits||0,onChange:L=>_("bits",Math.max(0,parseInt(L.target.value)||0)),min:"0",className:"w-full text-xl font-orbitron font-bold text-accent-cyan bg-transparent border-0 focus:outline-none"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-accent-yellow/30 pb-2",children:[r.jsx("h3",{className:"text-lg font-orbitron font-bold text-accent-yellow uppercase",children:"Equipment"}),r.jsx("button",{onClick:E,className:"text-accent-cyan hover:text-accent-cyan/80 transition-colors",title:"Add item",children:r.jsx(Fn,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"space-y-2",children:!f.equipment||f.equipment.length===0?r.jsxs("p",{className:"text-text-secondary text-sm font-mono text-center py-4",children:[">"," No equipment yet"]}):f.equipment.map((L,G)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>U(G),className:"text-accent-red hover:text-accent-red/80 transition-colors shrink-0",children:r.jsx(er,{className:"w-4 h-4"})}),r.jsx("input",{type:"text",value:L,onChange:Z=>q(G,Z.target.value),className:"flex-1 bg-bg-secondary border-2 border-accent-cyan/30 rounded px-3 py-2 text-text-primary font-mono text-sm focus:outline-none focus:border-accent-cyan"})]},G))})]}),f.classFeatures&&Object.keys(f.classFeatures).length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-orbitron font-bold text-accent-yellow uppercase border-b border-accent-yellow/30 pb-2",children:"Class Features"}),r.jsx("div",{className:"space-y-3",children:Object.entries(f.classFeatures).map(([L,G])=>typeof G=="number"||typeof G=="boolean"?null:r.jsxs("div",{className:"bg-bg-secondary border-2 border-accent-yellow/30 rounded p-3",children:[r.jsxs("div",{className:"text-xs font-mono text-accent-yellow uppercase mb-1",children:[L.replace(/([A-Z])/g," $1").trim(),G.roll&&` [${G.roll}]`]}),r.jsx("div",{className:"text-text-primary text-sm font-mono",children:G.name?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"font-bold text-accent-yellow",children:G.name}),r.jsx("div",{className:"text-text-secondary text-xs mt-1",children:G.description})]}):r.jsx("div",{className:"text-text-secondary text-xs",children:G.result||G})})]},L))}),f.classFeatures.containmentPoints&&r.jsxs("div",{className:"bg-accent-yellow/10 border-2 border-accent-yellow/30 rounded p-3",children:[r.jsx("div",{className:"text-xs font-mono text-accent-yellow uppercase mb-1",children:"Containment Points"}),r.jsxs("div",{className:"text-text-secondary text-xs",children:["Current: ",f.classFeatures.containmentPoints," / 6",r.jsx("br",{}),r.jsx("span",{className:"text-accent-red",children:"Reduces by 1 on each blunder"})]})]}),f.classFeatures.junkDrawerSlots&&r.jsxs("div",{className:"bg-accent-cyan/10 border-2 border-accent-cyan/30 rounded p-3",children:[r.jsx("div",{className:"text-xs font-mono text-accent-cyan uppercase mb-1",children:"Junk Drawer"}),r.jsxs("div",{className:"text-text-secondary text-xs",children:["Extra Inventory Slots: +",f.classFeatures.junkDrawerSlots,r.jsx("br",{}),r.jsx("span",{className:"text-text-secondary",children:"For small broken machines (Hack Job parts)"})]})]}),f.classFeatures.ownsShip&&r.jsxs("div",{className:"bg-accent-cyan/10 border-2 border-accent-cyan/30 rounded p-3",children:[r.jsx("div",{className:"text-xs font-mono text-accent-cyan uppercase mb-1",children:"Hunk of Junk"}),r.jsx("div",{className:"text-text-secondary text-xs",children:"You own a ramshackle but trustworthy ship"})]})]}),si[f.class]?.specialRules&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-orbitron font-bold text-accent-cyan uppercase border-b border-accent-cyan/30 pb-2",children:"Class Special Rules"}),r.jsx("div",{className:"space-y-2",children:si[f.class].specialRules.map((L,G)=>r.jsxs("div",{className:"bg-bg-secondary border-2 border-accent-cyan/30 rounded p-3",children:[r.jsx("div",{className:"text-xs font-mono text-accent-cyan uppercase mb-1",children:L.name}),r.jsx("div",{className:"text-text-secondary text-xs",children:L.description})]},G))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-orbitron font-bold text-accent-yellow uppercase border-b border-accent-yellow/30 pb-2",children:"Personal Journal"}),r.jsx(cN,{})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-orbitron font-bold text-accent-red uppercase border-b border-accent-red/30 pb-2",children:"Danger Zone"}),m?r.jsxs("div",{className:"bg-accent-red/10 border-2 border-accent-red rounded p-4",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx(wn,{className:"w-5 h-5 text-accent-red flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-orbitron font-bold text-accent-red uppercase text-sm mb-1",children:"Confirm Deletion"}),r.jsxs("p",{className:"text-text-primary text-sm",children:["This will permanently delete ",r.jsx("span",{className:"text-accent-yellow font-bold",children:f.name}),". This action cannot be undone."]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{onClick:A,variant:"danger",className:"flex-1",disabled:x,children:x?"DELETING...":"YES, DELETE"}),r.jsx(de,{onClick:()=>g(!1),variant:"ghost",className:"flex-1",children:"CANCEL"})]})]}):r.jsxs(de,{onClick:()=>g(!0),variant:"danger",className:"w-full",children:[r.jsx(er,{className:"w-4 h-4 mr-2"}),"DELETE CHARACTER"]})]})]})]})]});return gi.createPortal(I,document.body)}const uN={laserFire:"/star-dashborg/sounds/laser-fire-short.mp3",torpedoFire:"/star-dashborg/sounds/torpedo-fire.mp3",shieldHit:"/star-dashborg/sounds/shield-hit.mp3",hyperdriveCharge:"/star-dashborg/sounds/hyperdrive-charge.mp3",alarmCritical:"/star-dashborg/sounds/alarm-critical.mp3",evade:"/star-dashborg/sounds/evade.mp3",targetLock:"/star-dashborg/sounds/target-lock.mp3",jamming:"/star-dashborg/sounds/jamming.mp3",repairShield:"/star-dashborg/sounds/repair-shield.mp3",loadTorpedo:"/star-dashborg/sounds/load-torpedo.mp3",deflectors:"/star-dashborg/sounds/deflectors.mp3",steady:"/star-dashborg/sounds/steady.mp3",shieldPowerUp:"/star-dashborg/sounds/shield-power-up.mp3"};function gd(){const s=O.useRef({}),a=O.useRef(!1);O.useEffect(()=>{Object.entries(uN).forEach(([f,p])=>{const m=new Audio(p);m.preload="auto",s.current[f]=m}),localStorage.getItem("spaceCombatSoundsMuted")==="true"&&(a.current=!0)},[]);const i=O.useCallback((h,f=.5)=>{if(a.current)return;const p=s.current[h];if(p){const m=p.cloneNode();m.volume=f,m.play().catch(g=>{console.warn("Sound playback failed:",g)})}},[]),o=O.useCallback(()=>(a.current=!a.current,localStorage.setItem("spaceCombatSoundsMuted",a.current.toString()),a.current),[]),u=O.useCallback(()=>a.current,[]);return{play:i,toggleMute:o,getMutedState:u}}const eo={pilot:{id:"pilot",name:"Pilot",maxAssignments:1,description:"Controls ship movement and evasion",actions:["steady","fixedBeamCannon","evade"]},copilot:{id:"copilot",name:"Co-Pilot",maxAssignments:1,description:"Targeting systems and torpedoes",actions:["targetLock","fireTorpedo","jamming"]},engineer1:{id:"engineer1",name:"Engineer",maxAssignments:1,description:"Ship systems and repairs",actions:["repairShield","loadTorpedo","hyperdriveJump","deflectors"]},engineer2:{id:"engineer2",name:"Engineer",maxAssignments:1,description:"Ship systems and repairs",actions:["repairShield","loadTorpedo","hyperdriveJump","deflectors"]},gunner1:{id:"gunner1",name:"Gunner 1",maxAssignments:1,description:"Laser turret operations",actions:["fireLaserTurret","deflectors"]},gunner2:{id:"gunner2",name:"Gunner 2",maxAssignments:1,description:"Laser turret operations",actions:["fireLaserTurret","deflectors"]}},bg={steady:{id:"steady",name:"Steady",type:"support",ability:"KNW",dr:12,description:"Test KNW to grant advantage to the next attack test against an enemy",effect:"Next ally attack has advantage"},fixedBeamCannon:{id:"fixedBeamCannon",name:"Fixed Beam Cannon",type:"attack",ability:"PRS",dr:12,damage:"1d4",description:"Test PRS to fire the fixed beam cannon",effect:"Deal D4 damage on success"},evade:{id:"evade",name:"Evade",type:"defense",ability:"AGI",dr:12,description:"Test AGI to negate incoming enemy attack",effect:"Negate one incoming attack on success"},targetLock:{id:"targetLock",name:"Target Lock",type:"support",ability:"AGI",dr:12,description:"Test AGI. Reduce a single enemy's armor by 1 tier until end of round",effect:"Reduce enemy armor by 1 tier"},fireTorpedo:{id:"fireTorpedo",name:"Fire Particle Torpedo",type:"attack",ability:"KNW",dr:12,damage:"1d8",description:"If a particle torpedo is loaded, test KNW to fire",effect:"Deal D8 damage on success (requires loaded torpedo)",requiresTorpedo:!0},jamming:{id:"jamming",name:"Jamming",type:"defense",ability:"PRS",dr:12,description:"Test PRS to negate incoming enemy attack",effect:"Negate one incoming attack on success"},repairShield:{id:"repairShield",name:"Repair Shield",type:"support",ability:"KNW",dr:12,description:"Test KNW to increase Ship Armor by 1 tier (max 2)",effect:"Restore 1 armor tier (max Tier 2)"},loadTorpedo:{id:"loadTorpedo",name:"Load Particle Torpedo",type:"support",ability:"STR",dr:12,description:"Test STR to load D2 torpedoes to fire",effect:"Load 1-2 torpedoes on success"},hyperdriveJump:{id:"hyperdriveJump",name:"Charge Hyperdrive",type:"instant",description:"Charting, charging, and engaging takes 3 rounds. Dangerous in combat",effect:"Charge hyperdrive by 1 pip (3 pips to jump)",warning:"Jumping in combat with 4+ enemies destroys the ship!"},deflectors:{id:"deflectors",name:"Deflectors",type:"defense",ability:"PRS",dr:12,description:"Test PRS to negate incoming enemy attack",effect:"Negate one incoming attack on success"},fireLaserTurret:{id:"fireLaserTurret",name:"Fire Laser Turret",type:"attack",ability:"AGI",dr:12,damage:"1d6",description:"Test AGI to fire the laser turret",effect:"Deal D6 damage on success"}},dN=[{tier:0,name:"No Armor",damage:0,description:"No damage negation",color:"red"},{tier:1,name:"Tier 1",damage:2,description:"-D2 damage",color:"yellow"},{tier:2,name:"Tier 2",damage:4,description:"-D4 damage",color:"cyan"},{tier:3,name:"Tier 3",damage:6,description:"-D6 damage (max)",color:"cyan"}],hi={boosterRockets:{id:"boosterRockets",name:"Booster Rockets",description:"The Steady action affects the next D2 attacks against enemies",effect:"steady_multi"},torpedoWinch:{id:"torpedoWinch",name:"Particle Torpedo Winch",description:"Any station can Load Particle Torpedoes with a KNW test",effect:"load_any_station"},overchargeShields:{id:"overchargeShields",name:"Overcharge Shields",description:"At start shields are Tier 2, but can be moved up to Tier 3 by repairing",effect:"max_tier_3"},turboLasers:{id:"turboLasers",name:"Turbo Laser Turrets",description:"Choose a Gunner Station to deal D8 damage instead of D6",effect:"gunner_d8"}};function hN(){const{spaceCombat:s,modifyArmor:a,chargeHyperdrive:i,decrementHyperdrive:o}=ya(),{gameState:u}=Pe(),{play:h}=gd(),{shipArmor:f,hyperdriveCharge:p}=s,m=u.ship||{heroicUpgrades:[],purchasedUpgrades:[]},g=O.useRef(f),x=O.useRef(null),j=dN.find(E=>E.tier===f);O.useEffect(()=>{f===0&&g.current>0?(x.current||(x.current=new Audio("/sounds/alarm-critical.mp3"),x.current.loop=!0,x.current.volume=.4),x.current.play().catch(()=>{})):f>0&&x.current&&(x.current.pause(),x.current.currentTime=0),g.current=f},[f]),O.useEffect(()=>()=>{x.current&&(x.current.pause(),x.current=null)},[]);const w=f===0?Uj:f===1?Dj:md,_=()=>f===0?"text-accent-red":f===1?"text-accent-yellow":"text-accent-cyan",S=()=>f===0?"glow-pulse-red":f===1?"glow-pulse-yellow":"glow-pulse-cyan";return r.jsxs("div",{className:"bg-bg-secondary/80 backdrop-blur-sm border-3 border-accent-cyan p-4 space-y-4",children:[r.jsx("h2",{className:"font-orbitron font-bold text-accent-cyan text-lg uppercase text-center",children:"Ship Status"}),r.jsxs("div",{className:"relative flex items-center justify-center py-6",children:[r.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${f>0?"shield-active":""}`,children:r.jsx("div",{className:`w-40 h-40 rounded-full border-2 ${f===3?"border-accent-cyan":f===2?"border-accent-cyan/60":f===1?"border-accent-yellow/60":"border-accent-red/60"} ${f>0?"shield-pulse":""}`})}),r.jsx("div",{className:"relative z-10",children:r.jsx(w,{className:`w-24 h-24 ${_()} ${f>0?S():""}`})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-400 font-orbitron",children:"ARMOR TIER:"}),r.jsx("span",{className:`text-xl font-orbitron font-bold ${_()}`,children:j.name})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-400 font-orbitron",children:"DAMAGE REDUCTION:"}),r.jsx("span",{className:`text-lg font-orbitron font-bold ${_()}`,children:j.damage>0?`-D${j.damage}`:"NONE"})]}),r.jsx("div",{className:"flex gap-1 mt-3",children:Array.from({length:Wn(m)},(E,q)=>q).map(E=>r.jsx("div",{className:`flex-1 h-3 border-2 transition-all ${E<f?f===1||f===3?"bg-accent-yellow border-accent-yellow":"bg-accent-cyan border-accent-cyan":"border-gray-600 bg-transparent"}`},E))}),r.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-gray-700/50",children:[r.jsx("span",{className:"text-xs text-gray-500 font-orbitron",children:"MAX TIER:"}),r.jsxs("span",{className:`text-sm font-orbitron font-bold ${Wn(m)===3?"text-accent-yellow":"text-accent-cyan"}`,children:["Tier ",Wn(m),Wn(m)===3&&r.jsx("span",{className:"ml-1 text-xs",children:"(Overcharged)"})]})]})]}),(Jt(m,"overchargeShields")||Jt(m,"boosterRockets")||Jt(m,"torpedoWinch")||Jt(m,"turboLasers"))&&r.jsxs("div",{className:"border-2 border-accent-yellow/40 bg-accent-yellow/5 p-3 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Fs,{className:"w-4 h-4 text-accent-yellow"}),r.jsx("p",{className:"text-xs font-orbitron font-bold uppercase text-accent-yellow",children:"Active Upgrades"})]}),r.jsxs("div",{className:"space-y-1",children:[Jt(m,"overchargeShields")&&r.jsxs("div",{className:"text-xs text-gray-300 font-mono flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-cyan",children:""}),r.jsx("span",{children:"Overcharge Shields: Max Tier 3"})]}),Jt(m,"boosterRockets")&&r.jsxs("div",{className:"text-xs text-gray-300 font-mono flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-cyan",children:""}),r.jsx("span",{children:"Booster Rockets: Steady affects D2 attacks"})]}),Jt(m,"torpedoWinch")&&r.jsxs("div",{className:"text-xs text-gray-300 font-mono flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-cyan",children:""}),r.jsx("span",{children:"Torpedo Winch: Any station can load"})]}),Jt(m,"turboLasers")&&r.jsxs("div",{className:"text-xs text-gray-300 font-mono flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-cyan",children:""}),r.jsxs("span",{children:["Turbo Lasers: ",m.turboLaserStation?`${m.turboLaserStation} deals D8`:"Not configured"]})]})]})]}),f===0&&r.jsx("div",{className:"border-3 border-accent-red bg-accent-red/10 p-3 inline-alert-pulse",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(wn,{className:"w-4 h-4 text-accent-red flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-accent-red text-xs font-orbitron font-bold uppercase",children:"SHIELDS DOWN"}),r.jsx("p",{className:"text-text-primary text-xs mt-1",children:"No damage reduction! Repair shields immediately!"})]})]})}),r.jsxs("div",{className:"border-t border-gray-700 pt-3 space-y-2",children:[r.jsx("p",{className:"text-xs text-gray-500 font-orbitron uppercase text-center",children:"Armor Controls"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>a(-1),disabled:f===0,className:"flex-1 px-3 py-2 bg-accent-red/20 border-2 border-accent-red text-accent-red font-orbitron text-xs hover:bg-accent-red hover:text-bg-primary transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"- Tier"}),r.jsx("button",{onClick:()=>a(1),disabled:f>=Wn(m),className:"flex-1 px-3 py-2 bg-accent-cyan/20 border-2 border-accent-cyan text-accent-cyan font-orbitron text-xs hover:bg-accent-cyan hover:text-bg-primary transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"+ Tier"})]})]}),r.jsxs("div",{className:`border-3 p-3 transition-all ${p===3?"border-accent-yellow bg-accent-yellow/10":p>0?"border-accent-yellow/60 bg-accent-yellow/5":"border-gray-600 bg-gray-900/30"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(td,{className:`w-4 h-4 ${p===3?"text-accent-yellow":p>0?"text-accent-yellow/80":"text-gray-500"}`}),r.jsx("p",{className:`text-xs font-orbitron font-bold uppercase ${p===3?"text-accent-yellow":p>0?"text-accent-yellow/80":"text-gray-500"}`,children:p===3?"Hyperdrive Ready":p>0?"Hyperdrive Charging":"Hyperdrive Idle"})]}),r.jsxs("span",{className:`font-orbitron text-sm ${p===3?"text-accent-yellow":p>0?"text-accent-yellow/80":"text-gray-500"}`,children:[p,"/3"]})]}),r.jsx("div",{className:"flex gap-1 mb-3",children:[1,2,3].map(E=>r.jsx("div",{className:`flex-1 h-2 border-2 transition-all ${E<=p?p===3?"bg-accent-yellow border-accent-yellow hyperdrive-charge-pulse":"bg-accent-yellow/80 border-accent-yellow/80":"border-gray-600 bg-transparent"}`},E))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>o(),disabled:p===0,className:"flex-1 px-3 py-2 bg-accent-red/20 border-2 border-accent-red text-accent-red font-orbitron text-xs hover:bg-accent-red hover:text-bg-primary transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"- Charge"}),r.jsx("button",{onClick:()=>{i(),h("hyperdriveCharge",.5)},disabled:p>=3,className:"flex-1 px-3 py-2 bg-accent-yellow/20 border-2 border-accent-yellow text-accent-yellow font-orbitron text-xs hover:bg-accent-yellow hover:text-bg-primary transition-all disabled:opacity-30 disabled:cursor-not-allowed",children:"+ Charge"})]}),p===3&&r.jsx("p",{className:"text-accent-yellow text-xs mt-2 font-orbitron text-center animate-pulse",children:" READY TO JUMP! "}),p===3&&r.jsx("p",{className:"text-accent-red text-xs mt-1 font-orbitron text-center",children:" 4+ enemies = ship destroyed"})]})]})}function to({station:s,assignedCharacterId:a,onAssign:i,onUnassign:o,children:u}){const{partyMembers:h}=pi(),{spaceCombat:f}=ya(),p=h.find(x=>x.id===a),m=!!p,g=h.filter(x=>!Object.values(f.stationAssignments).includes(x.id));return r.jsxs("div",{className:`bg-bg-secondary/90 backdrop-blur-sm border-3 p-3 transition-all ${m?"border-accent-cyan glow-cyan":"border-gray-600 hover:border-accent-yellow/50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b-2 border-gray-700",children:[r.jsxs("div",{children:[r.jsx("h3",{className:`font-orbitron font-bold text-sm uppercase ${m?"text-accent-cyan":"text-gray-400"}`,children:s.name}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:s.description})]}),r.jsx("div",{className:"flex items-center gap-2",children:m?r.jsx(sd,{className:"w-4 h-4 text-accent-cyan"}):r.jsx(Wj,{className:"w-4 h-4 text-gray-600"})})]}),r.jsx("div",{className:"mb-3",children:m?r.jsxs("div",{className:"flex items-center justify-between p-2 bg-accent-cyan/10 border-2 border-accent-cyan/30 rounded",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-orbitron text-accent-cyan font-bold",children:p.name}),r.jsx("p",{className:"text-xs text-gray-400",children:p.class?p.class.charAt(0).toUpperCase()+p.class.slice(1):"Rebel"})]}),r.jsx("button",{onClick:()=>o(s.id),className:"px-2 py-1 text-xs font-orbitron text-accent-red border-2 border-accent-red/30 hover:bg-accent-red hover:text-bg-primary transition-all",children:"UNASSIGN"})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs text-gray-500 font-orbitron uppercase",children:"Station Unmanned"}),g.length>0?r.jsx("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:g.map(x=>r.jsxs("button",{onClick:()=>i(s.id,x.id),className:"w-full px-2 py-1 text-xs font-orbitron text-left text-accent-yellow border-2 border-accent-yellow/30 hover:bg-accent-yellow hover:text-bg-primary transition-all",children:["Assign: ",x.name]},x.id))}):r.jsx("p",{className:"text-xs text-gray-600 italic",children:"All rebels assigned"})]})}),r.jsx("div",{className:`${m?"":"opacity-40 pointer-events-none"}`,children:u})]})}const fi={standard:{id:"standard",name:"Standard Particle Torpedo",damage:"1d8",description:"Standard issue particle torpedo",effect:"Deal D8 damage on hit",cost:0,category:"torpedo"},cluster:{id:"cluster",name:"Cluster Torpedo",damage:"1d4",description:"Up to 3 targets, roll to hit and for damage once for each target",effect:"Hit up to 3 different targets with D4 damage each",cost:2,category:"torpedo",special:"multi_target"},hunterKiller:{id:"hunterKiller",name:"Hunter-Killer Torpedo",damage:"1d8",description:"Advanced targeting system rolls with advantage to hit and damage",effect:"Roll with advantage for both hit and damage",cost:2,category:"torpedo",special:"advantage"},chaff:{id:"chaff",name:"Chaff Torpedo",damage:"0",description:"All rebels make defensive tests with advantage, attack tests with disadvantage for a full round",effect:"Defensive screen - advantage on defense, disadvantage on attacks",cost:1,category:"torpedo",special:"defensive"},ion:{id:"ion",name:"Ion Torpedo",damage:"1d8",description:"Permanently reduces a target's shield tier by 1",effect:"D8 damage + permanently reduces enemy armor by 1 tier",cost:2,category:"torpedo",special:"armor_reduction"}},gy={gravityCatapult:{id:"gravityCatapult",name:"Gravity Catapult",damage:"1d10",description:'Requires the engineer to load an object with the "bulky" tag into the chamber. Add this to 1 gunner station.',effect:"D10 damage but requires bulky items as ammo",cost:2,category:"turret",special:"requires_ammo"},hyperRailgun:{id:"hyperRailgun",name:"Hyper Railgun",damage:"1d6",description:"High-velocity projectiles that ignore all armor",effect:"D6 damage that ignores enemy armor completely",cost:2,category:"turret",special:"ignore_armor"}},yy={smugglingCompartments:{id:"smugglingCompartments",name:"Smuggling Compartments",description:"Hide from sight and sensors if captured or boarded",effect:"Rebels can hide in secret compartments during capture/boarding",cost:1,category:"misc",special:"stealth"},asteroidMiningDrill:{id:"asteroidMiningDrill",name:"Asteroid Mining Drill",damage:"1d8",description:"Bore a tunnel through solid rock at slow speed. Pilot can attack with PRS test, but their next defense test is at disadvantage",effect:"D8 damage attack but next defense has disadvantage",cost:1,category:"misc",special:"drilling"},harpoonTowCable:{id:"harpoonTowCable",name:"Harpoon and Tow Cable",description:"Copilot can attach magnetic harpoon to object of equal or lesser mass. If target is a piloted ship, test AGI",effect:"Grapple and tow objects or enemy ships",cost:1,category:"misc",special:"grapple"},hyperspaceDestabilizer:{id:"hyperspaceDestabilizer",name:"Hyperspace Destabilizer",description:"Makes jumping to Hyperspace impossible in a wide area while active",effect:"Prevent all hyperspace jumps in combat zone",cost:1,category:"misc",special:"anti_hyperspace"}},fN={...fi,...gy,...yy},xg=[{id:"galaxyRewards",name:"Galaxy Rewards",description:"Heroic upgrades earned by saving the galaxy - cannot be purchased",items:[],isHeroic:!0},{id:"torpedoes",name:"Torpedoes",description:"Advanced munitions for devastating attacks",items:Object.keys(fi).filter(s=>s!=="standard")},{id:"turrets",name:"Turret Upgrades",description:"Weapon system enhancements",items:Object.keys(gy)},{id:"misc",name:"Miscellaneous",description:"Utility systems and specialized equipment",items:Object.keys(yy)}];function Wl(s){return fN[s]}function mN({onSelect:s,selectedType:a="standard"}){const{gameState:i}=Pe(),[o,u]=O.useState(!1),h=Uw(i.ship),f=[{type:"standard",count:""},...h.filter(g=>g.type!=="standard")];if(f.length===1)return null;const p=fi[a],m=g=>{s(g),u(!1)};return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>u(!o),className:"w-full px-3 py-2 bg-bg-primary border-2 border-accent-yellow/30 hover:border-accent-yellow transition-all flex items-center justify-between group",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ga,{className:"w-4 h-4 text-accent-yellow"}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-xs font-orbitron text-accent-yellow",children:p.name}),r.jsx("p",{className:"text-[10px] text-gray-400",children:p.damage||"Defensive"})]})]}),r.jsx(hd,{className:`w-4 h-4 text-gray-400 group-hover:text-accent-yellow transition-all ${o?"rotate-180":""}`})]}),o&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-bg-secondary border-3 border-accent-yellow z-50 max-h-64 overflow-y-auto",children:f.map(({type:g,count:x})=>{const j=fi[g],v=g===a;return r.jsxs("button",{onClick:()=>m(g),className:`w-full px-3 py-2 text-left border-b border-gray-700 last:border-0 transition-all ${v?"bg-accent-yellow/20 border-l-4 border-l-accent-yellow":"hover:bg-accent-yellow/10"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-sm font-orbitron text-text-primary",children:j.name}),r.jsxs("span",{className:"text-xs font-orbitron text-accent-cyan flex items-center gap-1",children:[r.jsx(ga,{className:"w-3 h-3"}),x]})]}),r.jsx("p",{className:"text-xs text-gray-400 mb-1",children:j.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[j.damage&&r.jsx("span",{className:"text-xs text-accent-red font-orbitron",children:j.damage}),j.special&&r.jsx("span",{className:"text-[10px] text-accent-yellow",children:j.special.replace("_"," ").toUpperCase()})]})]},g)})})]})}const pN={attack:ga,defense:md,support:sS,special:Xn};function ao({stationId:s,actionIds:a,assignedCharacterId:i}){const{addCombatLog:o,spaceCombat:u,fireTorpedo:h,modifyArmor:f,loadTorpedoes:p,chargeHyperdrive:m}=ya(),{partyMembers:g}=pi(),{gameState:x,updateGameState:j}=Pe(),{play:v}=gd(),[w,_]=O.useState(null),[S,E]=O.useState("standard"),[q,U]=O.useState({}),[A,I]=O.useState(null),L=g.find(ee=>ee.id===i),G=x.ship||{heroicUpgrades:[],purchasedUpgrades:[],turboLaserStation:null};let Z=a.map(ee=>{const Q={...bg[ee]};return!Q||!Q.id?(console.error(`Action not found for id: ${ee}`),null):(Q.id==="fireLaserTurret"&&(Q.damage=Mw(G,s)),Q.id==="loadTorpedo"&&Fp(G),Q)}).filter(Boolean);Fp(G)&&!a.includes("loadTorpedo")&&Z.push({...bg.loadTorpedo});const X=ee=>!L||!L.stats?0:L.stats[ee.toLowerCase()]||0,xe=ee=>q[ee]||{rollMode:"normal",drAdjust:0},Le=(ee,Q)=>{U(D=>({...D,[ee]:{...xe(ee),...Q}}))},ht=ee=>{I(Q=>Q===ee?null:ee)},Ye=async ee=>{if(!L)return;if(ee.requiresTorpedo&&u.torpedoesLoaded===0){o(`${ee.name} failed: No torpedoes loaded!`,"damage");return}_(ee.id);const Q={fireLaserTurret:"laserFire",fixedBeamCannon:"laserFire",fireTorpedo:"torpedoFire",hyperdriveJump:"hyperdriveCharge",evade:"evade",targetLock:"targetLock",jamming:"jamming",repairShield:"repairShield",loadTorpedo:"loadTorpedo",deflectors:"deflectors",steady:"steady"};if(Q[ee.id]&&v(Q[ee.id],.5),ee.type==="instant"){await new Promise($e=>setTimeout($e,300));let se=`${L.name} - ${ee.name}: `;ee.id==="hyperdriveJump"&&(m(),se+=`Hyperdrive charged (${u.hyperdriveCharge+1}/3)!`),o(se,ee.type),_(null);return}await new Promise(se=>setTimeout(se,600));const D=xe(ee.id),N=ee.dr+D.drAdjust,C=X(ee.ability),$=sN(C,N,D.rollMode==="advantage",D.rollMode==="disadvantage"),{roll:ae,total:ce,success:T,crit:V,blunder:W}=$;let F=`${L.name} - ${ee.name}: `,me=ee.type,ve={rollMode:D.rollMode,drAdjust:D.drAdjust,baseDR:ee.dr,effectiveDR:N};if(V)F+=`CRITICAL! (20 + ${C} = ${ce})`,me="attack";else if(W)F+=`BLUNDER! (1 + ${C} = ${ce})`,me="damage",ee.type==="defense"&&(f(-1),F+=" - Shield degraded!");else{let se="";D.rollMode==="advantage"||D.rollMode==="disadvantage"?se=`[ADV/DIS: ${ae}]`:se=`${ae}`;let $e=`DR${N}`;D.drAdjust!==0&&($e+=` (base ${ee.dr} ${D.drAdjust>0?"+":""}${D.drAdjust})`),F+=`${T?"SUCCESS":"FAIL"} (${se} + ${C} = ${ce} vs ${$e})`}if(T&&ee.damage){const se=ee.damage.match(/(\d+)d(\d+)/);if(se){const[,$e,Oe]=se;let Lt=0;for(let ca=0;ca<parseInt($e);ca++)Lt+=pd(parseInt(Oe));F+=` - Dealt ${Lt} damage!`,ee.requiresTorpedo&&h()}}if(T){if(ee.id==="repairShield"){const se=Wn(G);f(1),F+=` - Shield repaired! (Max tier: ${se})`}else if(ee.id==="loadTorpedo"){const se=fe(2);p(se),F+=` - Loaded ${se} torpedo${se>1?"es":""}!`}else if(ee.id==="fireTorpedo"&&S!=="standard"){j($e=>{const Oe={...$e.ship};return Oe.torpedoInventory={...Oe.torpedoInventory,[S]:Math.max(0,(Oe.torpedoInventory[S]||0)-1)},{...$e,ship:Oe}});const se=fi[S].name;F+=` - Used ${se}!`}}o(F,me,ve),_(null)};return r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs text-gray-400 font-orbitron uppercase mb-2",children:"Available Actions:"}),Z.some(ee=>ee.id==="fireTorpedo")&&u.torpedoesLoaded>0&&r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-xs text-gray-400 font-orbitron uppercase mb-1",children:"Select Torpedo:"}),r.jsx(mN,{selectedType:S,onSelect:E})]}),Z.map((ee,Q)=>{const D=pN[ee.type]||Qn,N=w===ee.id,C=ee.requiresTorpedo&&u.torpedoesLoaded===0,$=xe(ee.id),ae=A===ee.id,ce=ee.dr+$.drAdjust;return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:`w-full p-2 border-2 transition-all ${N?"border-accent-yellow bg-accent-yellow/20":C?"border-gray-700 bg-gray-900/50 opacity-50":$.rollMode==="advantage"?"border-accent-yellow/50 bg-accent-yellow/5":$.rollMode==="disadvantage"?"border-accent-red/50 bg-accent-red/5":ee.type==="attack"?"border-accent-red/30 hover:border-accent-red hover:bg-accent-red/10":ee.type==="defense"?"border-accent-cyan/30 hover:border-accent-cyan hover:bg-accent-cyan/10":"border-accent-yellow/30 hover:border-accent-yellow hover:bg-accent-yellow/10"}`,children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(D,{className:`w-4 h-4 flex-shrink-0 mt-0.5 ${N?"animate-spin":""} ${ee.type==="attack"?"text-accent-red":ee.type==="defense"?"text-accent-cyan":"text-accent-yellow"}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[r.jsx("p",{className:"text-xs font-orbitron font-bold text-text-primary",children:ee.name}),ee.type!=="instant"&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("span",{className:"text-xs font-orbitron text-gray-400",children:[ee.ability," DR",ce,$.drAdjust!==0&&r.jsxs("span",{className:"text-accent-yellow ml-1",children:["(",$.drAdjust>0?"+":"",$.drAdjust,")"]})]}),r.jsx("button",{onClick:T=>{T.stopPropagation(),ht(ee.id)},className:"p-0.5 text-gray-500 hover:text-accent-cyan transition-colors",title:"Toggle modifiers",children:ae?r.jsx(K1,{className:"w-3 h-3"}):r.jsx(hd,{className:"w-3 h-3"})})]})]}),r.jsx("p",{className:"text-xs text-gray-400",children:ee.description}),ee.damage&&r.jsxs("p",{className:"text-xs text-accent-red font-orbitron mt-1",children:["Damage: ",ee.damage]}),C&&r.jsx("p",{className:"text-xs text-accent-red font-orbitron mt-1",children:"No torpedoes loaded!"}),ee.warning&&r.jsxs("p",{className:"text-xs text-accent-yellow font-orbitron mt-1",children:[" ",ee.warning]})]})]}),r.jsx("button",{onClick:()=>Ye(ee),disabled:N||C||!L,className:`w-full mt-2 px-2 py-1 text-xs font-orbitron font-bold uppercase border transition-all ${N||C||!L?"opacity-50 cursor-not-allowed":"hover:bg-accent-cyan hover:text-bg-primary"} ${ee.type==="attack"?"border-accent-red text-accent-red hover:bg-accent-red":ee.type==="defense"?"border-accent-cyan text-accent-cyan":"border-accent-yellow text-accent-yellow hover:bg-accent-yellow"}`,children:N?ee.type==="instant"?"Executing...":"Rolling...":ee.type==="instant"?"Execute Action":"Roll Action"})]}),ae&&ee.type!=="instant"&&r.jsxs("div",{className:"bg-bg-secondary/50 border border-accent-cyan/20 p-2 space-y-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 font-orbitron uppercase mb-1",children:"Roll Mode:"}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>Le(ee.id,{rollMode:"normal"}),className:`flex-1 px-2 py-1 font-orbitron font-bold uppercase text-xs border transition-all ${$.rollMode==="normal"?"bg-accent-cyan text-bg-primary border-accent-cyan":"bg-transparent text-accent-cyan border-accent-cyan hover:bg-accent-cyan/20"}`,children:"Normal"}),r.jsx("button",{onClick:()=>Le(ee.id,{rollMode:"advantage"}),className:`flex-1 px-2 py-1 font-orbitron font-bold uppercase text-xs border transition-all ${$.rollMode==="advantage"?"bg-accent-yellow text-bg-primary border-accent-yellow":"bg-transparent text-accent-yellow border-accent-yellow hover:bg-accent-yellow/20"}`,children:"ADV"}),r.jsx("button",{onClick:()=>Le(ee.id,{rollMode:"disadvantage"}),className:`flex-1 px-2 py-1 font-orbitron font-bold uppercase text-xs border transition-all ${$.rollMode==="disadvantage"?"bg-accent-red text-bg-primary border-accent-red":"bg-transparent text-accent-red border-accent-red hover:bg-accent-red/20"}`,children:"DIS"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 font-orbitron uppercase mb-1",children:"DR Adjustment:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>Le(ee.id,{drAdjust:Math.max(-4,$.drAdjust-1)}),disabled:$.drAdjust<=-4,className:"px-2 py-1 border border-accent-cyan text-accent-cyan hover:bg-accent-cyan hover:text-bg-primary disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:r.jsx(fd,{className:"w-3 h-3"})}),r.jsxs("div",{className:"flex-1 text-center",children:[r.jsxs("div",{className:"text-sm font-orbitron font-bold text-accent-cyan",children:["DR ",ce]}),r.jsxs("div",{className:"text-xs text-gray-500 font-orbitron",children:["(Base: ",ee.dr,")"]})]}),r.jsx("button",{onClick:()=>Le(ee.id,{drAdjust:Math.min(4,$.drAdjust+1)}),disabled:$.drAdjust>=4,className:"px-2 py-1 border border-accent-cyan text-accent-cyan hover:bg-accent-cyan hover:text-bg-primary disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:r.jsx(Fn,{className:"w-3 h-3"})})]}),$.drAdjust!==0&&r.jsx("button",{onClick:()=>Le(ee.id,{drAdjust:0}),className:"w-full mt-1 px-2 py-1 text-xs font-orbitron text-gray-400 border border-gray-600 hover:border-accent-cyan hover:text-accent-cyan transition-all",children:"Reset to Base DR"})]})]})]},`${s}-${ee.id}-${Q}`)})]})}function gN(){const{spaceCombat:s,assignStation:a,unassignStation:i}=ya(),o=eo.pilot,u=s.stationAssignments.pilot;return r.jsx(to,{station:o,assignedCharacterId:u,onAssign:a,onUnassign:i,children:r.jsx(ao,{stationId:o.id,actionIds:o.actions,assignedCharacterId:u})})}function yN(){const{spaceCombat:s,assignStation:a,unassignStation:i}=ya(),o=eo.copilot,u=s.stationAssignments.copilot;return r.jsx(to,{station:o,assignedCharacterId:u,onAssign:a,onUnassign:i,children:r.jsx(ao,{stationId:o.id,actionIds:o.actions,assignedCharacterId:u})})}function vg({stationNumber:s=1}){const{spaceCombat:a,assignStation:i,unassignStation:o}=ya(),u=`engineer${s}`,h=eo[u],f=a.stationAssignments[u];return r.jsx(to,{station:{...h,name:`Engineer ${s}`},assignedCharacterId:f,onAssign:i,onUnassign:o,children:r.jsx(ao,{stationId:u,actionIds:h.actions,assignedCharacterId:f})})}function wg({stationNumber:s=1}){const{spaceCombat:a,assignStation:i,unassignStation:o}=ya(),u=`gunner${s}`,h=eo[u],f=a.stationAssignments[u];return r.jsx(to,{station:{...h,name:`Gunner ${s}`},assignedCharacterId:f,onAssign:i,onUnassign:o,children:r.jsx(ao,{stationId:u,actionIds:h.actions,assignedCharacterId:f})})}function bN(){return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"font-orbitron font-bold text-accent-cyan text-lg uppercase text-center mb-4",children:"Ship Stations"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs text-accent-cyan font-orbitron uppercase text-center mb-2",children:" Command Deck "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(gN,{}),r.jsx(yN,{})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs text-accent-red font-orbitron uppercase text-center mb-2",children:" Weapons Deck "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(wg,{stationNumber:1}),r.jsx(wg,{stationNumber:2})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs text-accent-yellow font-orbitron uppercase text-center mb-2",children:" Engineering Bay "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(vg,{stationNumber:1}),r.jsx(vg,{stationNumber:2})]})]})]})}const jg={attack:ga,defense:md,support:Xn,damage:wn,info:cg,combat:cg};function xN(){const{spaceCombat:s,updateSpaceCombat:a}=ya(),i=O.useRef(null),o=O.useRef(null);O.useEffect(()=>{if(o.current){const p=o.current;p.scrollHeight-p.scrollTop<=p.clientHeight+100&&(p.scrollTop=p.scrollHeight)}},[s.combatLog]);const u=()=>{confirm("Clear combat log?")&&a(p=>({...p,combatLog:[]}))},h=p=>{switch(p){case"attack":return"text-accent-red border-accent-red/30";case"defense":return"text-accent-cyan border-accent-cyan/30";case"support":return"text-accent-yellow border-accent-yellow/30";case"damage":return"text-accent-red border-accent-red/30";case"info":return"text-accent-cyan border-accent-cyan/30";default:return"text-text-primary border-gray-700"}},f=p=>new Date(p).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});return r.jsxs("div",{className:"bg-bg-secondary/80 backdrop-blur-sm border-3 border-accent-cyan h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 border-b-2 border-accent-cyan/30",children:[r.jsx("h2",{className:"font-orbitron font-bold text-accent-cyan text-sm uppercase",children:"Combat Log"}),s.combatLog.length>0&&r.jsx(de,{variant:"ghost",onClick:u,className:"px-2 py-1 text-xs",children:r.jsx(er,{className:"w-3 h-3"})})]}),r.jsx("div",{ref:o,className:"flex-1 overflow-y-auto p-3 space-y-2 min-h-[300px] max-h-[600px]",children:s.combatLog.length===0?r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-sm font-orbitron",children:r.jsx("p",{children:"No combat events yet..."})}):r.jsxs(r.Fragment,{children:[s.combatLog.map((p,m)=>{const g=jg[p.type]||jg.info,x=m<3,j=p.data&&(p.data.rollMode!=="normal"||p.data.drAdjust!==0);return r.jsx("div",{className:`border-l-3 pl-3 py-2 ${h(p.type)} ${x?"log-entry-slide":""}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(g,{className:"w-4 h-4 flex-shrink-0 mt-0.5 opacity-70"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs text-text-primary break-words",children:p.message}),j&&r.jsxs("div",{className:"flex gap-1 mt-1",children:[p.data.rollMode==="advantage"&&r.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 text-[9px] font-orbitron font-bold uppercase bg-accent-yellow/20 text-accent-yellow border border-accent-yellow/30",children:"ADV"}),p.data.rollMode==="disadvantage"&&r.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 text-[9px] font-orbitron font-bold uppercase bg-accent-red/20 text-accent-red border border-accent-red/30",children:"DIS"}),p.data.drAdjust!==0&&r.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-[9px] font-orbitron font-bold bg-accent-cyan/20 text-accent-cyan border border-accent-cyan/30",children:["DR ",p.data.drAdjust>0?"+":"",p.data.drAdjust]})]}),r.jsx("p",{className:"text-[10px] text-gray-500 mt-1 font-mono",children:f(p.timestamp)})]})]})},p.id)}),r.jsx("div",{ref:i})]})}),r.jsx("div",{className:"border-t-2 border-accent-cyan/30 p-2 bg-bg-primary/50",children:r.jsxs("p",{className:"text-xs text-gray-400 font-orbitron text-center",children:[s.combatLog.length," event",s.combatLog.length!==1?"s":""," logged"]})})]})}function vN({isOpen:s,onClose:a}){const{gameState:i,updateGameState:o,addLog:u}=Pe(),{character:h,updateField:f}=ar(),[p,m]=O.useState("galaxyRewards"),[g,x]=O.useState(null);if(O.useEffect(()=>{const U=A=>{A.key==="Escape"&&s&&a()};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[s,a]),O.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),!s)return null;const j=h?.bits||0,v=i.ship||{},w=Jg(v),_=async U=>{const A=Wl(U);if(!h){u("No active character to purchase from","error");return}if(!Xp(j,A.cost)){u(`Not enough Bits to purchase ${A.name}`,"error");return}try{await f("bits",j-A.cost)}catch(I){console.error("Failed to deduct bits:",I),u("Failed to complete purchase","error");return}o(I=>{const L={...I.ship};return A.category==="torpedo"?L.torpedoInventory={...L.torpedoInventory,[U]:(L.torpedoInventory[U]||0)+1}:L.purchasedUpgrades.includes(U)||(L.purchasedUpgrades=[...L.purchasedUpgrades,U]),{...I,ship:L}}),u(`Purchased ${A.name} for ${A.cost} Bits`,"info"),x(U),setTimeout(()=>x(null),2e3)},S=xg.find(U=>U.id===p),E=p==="galaxyRewards",q=r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4 md:p-12 lg:p-16 animate-fadeIn",onClick:a,children:r.jsxs("div",{className:`bg-bg-secondary/95 backdrop-blur-md border-3 w-full h-full max-w-[1000px] max-h-[82vh] overflow-hidden flex flex-col shadow-2xl ${E?"border-accent-yellow shadow-accent-yellow/30":"border-accent-cyan shadow-accent-cyan/30"}`,onClick:U=>U.stopPropagation(),children:[r.jsxs("div",{className:`border-b-3 p-6 flex items-center justify-between flex-shrink-0 ${E?"border-accent-yellow/30 bg-gradient-to-r from-accent-yellow/10 to-transparent":"border-accent-cyan/30 bg-gradient-to-r from-accent-cyan/5 to-transparent"}`,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[E?r.jsx(Xs,{className:"w-8 h-8 text-accent-yellow drop-shadow-glow-yellow"}):r.jsx(nd,{className:"w-8 h-8 text-accent-cyan"}),r.jsxs("div",{children:[r.jsx("h2",{className:`font-orbitron font-black text-2xl md:text-3xl tracking-wider ${E?"text-accent-yellow text-glow-yellow":"text-accent-cyan text-glow-cyan"}`,children:E?"GALAXY REWARDS":"UPGRADE SHOP"}),r.jsx("p",{className:"text-sm text-gray-400 font-orbitron mt-1",children:E?"Heroic Upgrades for Saving the Galaxy":'"What A Piece Of Junk!"'})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[!E&&r.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border-3 border-accent-yellow bg-accent-yellow/15 shadow-lg shadow-accent-yellow/20",children:[r.jsx(ed,{className:"w-5 h-5 text-accent-yellow"}),r.jsxs("span",{className:"font-orbitron text-accent-yellow font-bold text-lg",children:[j," Bits"]})]}),E&&r.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border-3 border-accent-yellow bg-accent-yellow/15 shadow-lg shadow-accent-yellow/20",children:[r.jsx(Fs,{className:"w-5 h-5 text-accent-yellow"}),r.jsxs("span",{className:"font-orbitron text-accent-yellow font-bold text-lg",children:[w," Available"]})]}),r.jsx("button",{onClick:a,className:"p-3 text-gray-400 hover:text-accent-red hover:bg-accent-red/10 border-2 border-transparent hover:border-accent-red transition-all rounded",title:"Close (ESC)",children:r.jsx(jn,{className:"w-6 h-6"})})]})]}),r.jsx("div",{className:"border-b-2 border-gray-700 flex bg-bg-primary/30 flex-shrink-0",children:xg.map(U=>{const A=p===U.id,I=U.id==="galaxyRewards",G=(()=>{switch(U.id){case"galaxyRewards":return Xs;case"torpedoes":return ga;case"turrets":return Xn;case"misc":return ad;default:return nd}})();return r.jsxs("button",{onClick:()=>m(U.id),className:`flex-1 px-4 py-4 font-orbitron text-sm transition-all duration-200 relative group ${A?I?"bg-accent-yellow/20 text-accent-yellow border-b-3 border-accent-yellow":"bg-accent-cyan/20 text-accent-cyan border-b-3 border-accent-cyan":"text-gray-400 hover:text-text-primary hover:bg-white/5"}`,children:[r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(G,{className:`w-4 h-4 transition-transform group-hover:scale-110 ${A?"animate-pulse":""}`}),r.jsx("span",{className:"hidden sm:inline",children:U.name})]}),A&&r.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 ${I?"bg-accent-yellow":"bg-accent-cyan"} shadow-lg ${I?"shadow-accent-yellow/50":"shadow-accent-cyan/50"}`})]},U.id)})}),r.jsx("div",{className:`px-6 py-4 border-b-2 border-gray-700 flex-shrink-0 ${E?"bg-gradient-to-r from-accent-yellow/10 to-transparent":"bg-bg-primary/50"}`,children:r.jsx("p",{className:"text-base text-gray-300 font-orbitron",children:S.description})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:E?Object.entries(hi).map(([U,A])=>{const I=Jt(v,U);return r.jsxs("div",{className:`border-3 p-5 transition-all duration-300 flex flex-col group relative overflow-hidden ${I?"border-accent-yellow bg-gradient-to-br from-accent-yellow/15 to-accent-yellow/5 unlock-glow hover:scale-[1.02]":"border-gray-700 bg-gray-900/50 lock-pulse hover:border-gray-600"}`,children:[I&&r.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-accent-yellow/10 transform rotate-45 translate-x-8 -translate-y-8"}),r.jsxs("div",{className:"flex items-start justify-between mb-4 relative z-10",children:[r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("h3",{className:"font-orbitron font-bold text-base mb-1 flex items-center gap-2",children:r.jsx("span",{className:I?"text-accent-yellow":"text-gray-300",children:A.name})})}),I?r.jsx(Fs,{className:"w-5 h-5 text-accent-yellow fill-accent-yellow flex-shrink-0 ml-2 drop-shadow-glow-yellow"}):r.jsx(fj,{className:"w-5 h-5 text-gray-500 flex-shrink-0 ml-2"})]}),r.jsx("p",{className:`text-sm mb-4 flex-1 leading-relaxed ${I?"text-gray-300":"text-gray-500"}`,children:A.description}),r.jsx("div",{className:`text-center py-3 px-4 rounded transition-all ${I?"bg-accent-yellow/25 text-accent-yellow border-2 border-accent-yellow/70 shadow-lg shadow-accent-yellow/20":"bg-gray-800/50 text-gray-500 border-2 border-gray-700/50"}`,children:r.jsx("p",{className:"text-sm font-orbitron font-bold uppercase tracking-wide",children:I?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Jl,{className:"w-5 h-5"}),"Installed"]}):r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Xs,{className:"w-5 h-5"}),"Save Galaxy to Unlock"]})})})]},U)}):S.items.map(U=>{const A=Wl(U),I=i.ship.purchasedUpgrades.includes(U)||(i.ship.torpedoInventory[U]||0)>0,L=i.ship.torpedoInventory[U]||0,G=Xp(j,A.cost),Z=g===U;return r.jsxs("div",{className:`border-3 p-5 transition-all duration-300 flex flex-col relative overflow-hidden group ${Z?"border-accent-yellow bg-accent-yellow/20 scale-105 shadow-lg shadow-accent-yellow/30":I?"border-accent-cyan/50 bg-accent-cyan/5":"border-gray-700 hover:border-accent-cyan/50 hover:shadow-lg hover:shadow-accent-cyan/10 card-hover"}`,children:[r.jsxs("div",{className:"absolute top-3 right-3 z-10",children:[A.category==="torpedo"&&r.jsxs("div",{className:"px-2 py-1 bg-accent-red/20 border border-accent-red/40 rounded text-xs font-orbitron text-accent-red flex items-center gap-1",children:[r.jsx(ga,{className:"w-3 h-3"}),"Torpedo"]}),A.category==="turret"&&r.jsxs("div",{className:"px-2 py-1 bg-accent-cyan/20 border border-accent-cyan/40 rounded text-xs font-orbitron text-accent-cyan flex items-center gap-1",children:[r.jsx(Xn,{className:"w-3 h-3"}),"Turret"]}),A.category==="misc"&&r.jsxs("div",{className:"px-2 py-1 bg-gray-600/20 border border-gray-500/40 rounded text-xs font-orbitron text-gray-400 flex items-center gap-1",children:[r.jsx(ad,{className:"w-3 h-3"}),"Misc"]})]}),r.jsx("div",{className:"mb-3 pr-20",children:r.jsx("h3",{className:"font-orbitron font-bold text-text-primary text-base",children:A.name})}),r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[A.damage&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-sm text-accent-red font-orbitron bg-accent-red/15 border border-accent-red/40 rounded shadow-sm",children:[r.jsx(ga,{className:"w-3 h-3"}),A.damage]}),A.category==="torpedo"&&L>0&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-sm text-accent-cyan font-orbitron bg-accent-cyan/15 border border-accent-cyan/40 rounded shadow-sm",children:["Owned: ",L]})]}),r.jsx("p",{className:"text-sm text-gray-300 mb-4 flex-1 leading-relaxed",children:A.description}),A.effect&&r.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-700/50",children:[r.jsx("p",{className:"text-xs mb-1 font-orbitron text-gray-500 uppercase tracking-wider",children:"Effect"}),r.jsx("p",{className:"text-sm text-accent-cyan font-orbitron",children:A.effect})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3 mt-auto",children:[r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-accent-yellow/10 border border-accent-yellow/30 rounded",children:[r.jsx(ed,{className:"w-4 h-4 text-accent-yellow"}),r.jsxs("span",{className:"font-orbitron font-bold text-accent-yellow",children:[A.cost," Bits"]})]}),r.jsx(de,{variant:G&&h?"primary":"ghost",onClick:()=>_(U),disabled:!G||Z||!h,className:`flex-1 px-4 py-2 text-sm ${Z?"bg-accent-yellow border-accent-yellow text-bg-primary":""}`,children:Z?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Jl,{className:"w-4 h-4"}),"Purchased!"]}):h?G?"Purchase":"Too Expensive":"No Character"})]})]},U)})})}),r.jsxs("div",{className:"border-t-3 border-gray-700 p-4 bg-bg-primary/50 flex-shrink-0 flex items-center justify-between",children:[r.jsx("p",{className:"text-sm text-gray-500 font-orbitron",children:"Prices are for black market goods - no refunds!"}),r.jsxs("p",{className:"text-xs text-gray-600 font-orbitron",children:["Press ",r.jsx("kbd",{className:"px-2 py-1 bg-gray-800 border border-gray-700 rounded",children:"ESC"})," to close"]})]})]})});return gi.createPortal(q,document.body)}function wN({isOpen:s,onClose:a}){const{gameState:i,updateGameState:o,addLog:u}=Pe(),[h,f]=O.useState(null),[p,m]=O.useState(!1);if(!s)return null;const g=i.ship,x=Object.entries(hi).filter(([v])=>!Jt(g,v)),j=()=>{if(!h)return;o(w=>{const _={...w.ship,heroicUpgrades:[...w.ship.heroicUpgrades,h]};return{...w,ship:_}});const v=hi[h].name;u(`Heroic upgrade installed: ${v}!`,"success"),m(!0),setTimeout(()=>{m(!1),f(null),a()},2e3)};return r.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-bg-secondary border-3 border-accent-yellow max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsx("div",{className:"border-b-3 border-accent-yellow/30 p-4 bg-accent-yellow/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Xs,{className:"w-8 h-8 text-accent-yellow glow-pulse-yellow"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-orbitron font-bold text-accent-yellow text-2xl",children:"GALAXY SAVED!"}),r.jsx("p",{className:"text-sm text-gray-400 font-orbitron",children:"Choose one heroic upgrade for your ship"})]})]}),r.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-accent-red transition-colors",children:r.jsx(jn,{className:"w-6 h-6"})})]})}),r.jsx("div",{className:"p-4 bg-gradient-to-b from-accent-yellow/20 to-transparent border-b-2 border-gray-700",children:r.jsxs("p",{className:"text-center text-text-primary font-orbitron",children:["Your heroic actions have earned you the right to install"," ",r.jsx("span",{className:"text-accent-yellow font-bold",children:"special modifications"})," ","to your ship!"]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:x.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Fs,{className:"w-16 h-16 mx-auto mb-4 text-accent-yellow opacity-50"}),r.jsx("p",{className:"text-gray-400 font-orbitron",children:"All heroic upgrades have been installed!"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Your ship is fully upgraded with heroic modifications."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(([v,w])=>{const _=h===v;return r.jsxs("button",{onClick:()=>f(v),disabled:p,className:`border-3 p-4 text-left transition-all ${_?"border-accent-yellow bg-accent-yellow/20 scale-105 glow-yellow":"border-gray-700 hover:border-accent-yellow/50 hover:bg-accent-yellow/5"} ${p?"opacity-50 cursor-not-allowed":""}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:"font-orbitron font-bold text-text-primary",children:w.name}),_&&r.jsx(Fs,{className:"w-5 h-5 text-accent-yellow fill-accent-yellow"})]}),r.jsx("p",{className:"text-sm text-gray-400 mb-3",children:w.description}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-accent-cyan",children:[r.jsx("span",{className:"opacity-70",children:"Effect:"}),r.jsx("span",{className:"font-orbitron",children:w.effect})]})]},v)})})}),x.length>0&&r.jsx("div",{className:"border-t-3 border-accent-yellow/30 p-4 bg-bg-primary/50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs text-gray-400 font-orbitron",children:h?"Confirm your selection to install the upgrade":"Select an upgrade above to claim your reward"}),r.jsx(de,{variant:"primary",onClick:j,disabled:!h||p,className:`flex items-center gap-2 px-6 ${p?"bg-accent-yellow border-accent-yellow":h?"glow-pulse-yellow border-accent-yellow text-accent-yellow":""}`,children:p?r.jsxs(r.Fragment,{children:[r.jsx(Jl,{className:"w-5 h-5"}),"Installed!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Xs,{className:"w-5 h-5"}),"Claim Reward"]})})]})})]})})}function jN(){const{gameState:s,updateGameState:a}=Pe(),[i,o]=O.useState(!1),[u,h]=O.useState(!1),[f,p]=O.useState(null),[m,g]=O.useState(!1),[x,j]=O.useState(""),v=s.ship||{name:"The Rebel Corvette",heroicUpgrades:[],purchasedUpgrades:[],torpedoInventory:{standard:0,cluster:0,hunterKiller:0,chaff:0,ion:0},galaxiesSaved:0},w=Bw(v),_=Lw(v),S=Jg(v),E=G=>{const Z=Wl(G)||hi[G];if(!Z?.name)return G;const X=Z.name;if(X.includes("and")){const Le=X.split(" and ");return`${Le[0]} & ${Le[1]?.split(" ")[0]||""}`}const xe=X.split(" ");return xe.length<=2||X.length<=15?X:xe.slice(0,2).join(" ")},q=()=>{const G=ES();a(Z=>({...Z,ship:{...Z.ship,name:G}}))},U=()=>{j(v.name),g(!0)},A=()=>{x.trim()&&a(G=>({...G,ship:{...G.ship,name:x.trim()}})),g(!1)},I=()=>{g(!1),j("")},L=G=>{G.key==="Enter"?A():G.key==="Escape"&&I()};return r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"border-b-2 border-accent-cyan/30 pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx(zj,{className:"w-4 h-4 text-accent-cyan flex-shrink-0"}),m?r.jsx("input",{type:"text",value:x,onChange:G=>j(G.target.value),onBlur:A,onKeyDown:L,autoFocus:!0,className:"flex-1 min-w-0 bg-bg-primary border-2 border-accent-cyan text-accent-cyan font-orbitron font-bold text-sm px-2 py-1 focus:outline-none focus:border-accent-yellow"}):r.jsx("span",{onClick:U,className:"font-orbitron font-bold text-accent-cyan text-sm truncate cursor-pointer hover:text-accent-yellow transition-colors",title:"Click to edit ship name",children:v.name}),r.jsx("button",{onClick:q,className:"flex-shrink-0 p-1 text-accent-cyan hover:text-accent-yellow hover:bg-accent-cyan/10 transition-all border-2 border-transparent hover:border-accent-cyan rounded",title:"Generate new ship name",children:r.jsx(Qn,{className:"w-3.5 h-3.5"})})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 flex-shrink-0 ml-2",children:[r.jsxs("span",{className:"flex items-center gap-1",title:`${w.length} upgrades installed`,children:[r.jsx(ad,{className:"w-3 h-3 text-accent-cyan"}),w.length]}),r.jsxs("span",{className:"flex items-center gap-1",title:`${v.galaxiesSaved} galaxies saved`,children:[r.jsx(Fs,{className:"w-3 h-3 text-accent-yellow"}),v.galaxiesSaved]}),r.jsxs("span",{className:"flex items-center gap-1",title:`${_} torpedoes in inventory`,children:[r.jsx(ga,{className:"w-3 h-3 text-accent-yellow"}),_]})]})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(de,{variant:"primary",onClick:()=>o(!0),className:"flex-1 px-2 py-2 text-xs flex items-center justify-center gap-1",children:[r.jsx(nd,{className:"w-3 h-3"}),"Shop"]}),S>0&&r.jsxs(de,{variant:"secondary",onClick:()=>h(!0),className:"flex-1 px-2 py-2 text-xs flex items-center justify-center gap-1 glow-pulse-yellow border-accent-yellow text-accent-yellow",children:[r.jsx(Xs,{className:"w-3 h-3"}),"Reward (",S,")"]})]}),w.length>0&&r.jsxs("div",{className:"text-xs space-y-1",children:[v.heroicUpgrades.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"font-orbitron text-accent-yellow text-[10px] uppercase mb-1",children:"Heroic:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:v.heroicUpgrades.map(G=>{const Z=hi[G];return r.jsx("button",{onClick:()=>p({...Z,id:G,isHeroic:!0}),className:"px-2 py-1 bg-accent-yellow/20 border border-accent-yellow/50 text-accent-yellow font-orbitron text-[11px] rounded hover:bg-accent-yellow/30 hover:border-accent-yellow transition-all cursor-pointer whitespace-nowrap",title:Z?.name||G,children:E(G)},G)})})]}),v.purchasedUpgrades.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"font-orbitron text-accent-cyan text-[10px] uppercase mb-1",children:"Purchased:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:v.purchasedUpgrades.map((G,Z)=>{const X=Wl(G);return r.jsx("button",{onClick:()=>p({...X,id:G,isHeroic:!1}),className:"px-2 py-1 bg-accent-cyan/20 border border-accent-cyan/50 text-accent-cyan font-orbitron text-[11px] rounded hover:bg-accent-cyan/30 hover:border-accent-cyan transition-all cursor-pointer whitespace-nowrap",title:X?.name||G,children:E(G)},`${G}-${Z}`)})})]})]}),f&&gi.createPortal(r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[99999] flex items-center justify-center p-4 animate-fadeIn",onClick:()=>p(null),children:r.jsxs("div",{className:`bg-bg-secondary border-3 max-w-lg w-full max-h-[80vh] overflow-y-auto p-5 shadow-2xl relative custom-scrollbar ${f.isHeroic?"border-accent-yellow shadow-accent-yellow/20":"border-accent-cyan shadow-accent-cyan/20"}`,onClick:G=>G.stopPropagation(),children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[r.jsx("h3",{className:`font-orbitron font-bold text-base uppercase flex-1 leading-tight ${f.isHeroic?"text-accent-yellow":"text-accent-cyan"}`,children:f.name||f.id}),r.jsx("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-accent-red transition-colors flex-shrink-0",children:r.jsx(jn,{className:"w-5 h-5"})})]}),f.category&&r.jsx("div",{className:"mb-3",children:r.jsx("span",{className:"inline-block px-2 py-1 bg-gray-700/50 border border-gray-600 text-gray-300 font-orbitron text-[10px] uppercase rounded",children:f.category})}),f.damage&&r.jsxs("div",{className:"mb-3 pb-3 border-b border-gray-700",children:[r.jsx("p",{className:"text-xs font-orbitron text-gray-500 uppercase mb-1",children:"Damage"}),r.jsx("p",{className:"text-accent-red font-orbitron font-bold text-lg",children:f.damage})]}),f.description&&r.jsxs("div",{className:"mb-3 pb-3 border-b border-gray-700",children:[r.jsx("p",{className:"text-xs font-orbitron text-gray-500 uppercase mb-1",children:"Description"}),r.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:f.description})]}),f.effect&&r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-xs font-orbitron text-gray-500 uppercase mb-1",children:"Effect"}),r.jsx("p",{className:`text-sm font-orbitron ${f.isHeroic?"text-accent-yellow/90":"text-accent-cyan/90"}`,children:f.effect})]}),r.jsx("div",{className:"mt-4 pt-3 border-t border-gray-700",children:r.jsx(de,{variant:"ghost",onClick:()=>p(null),className:"w-full text-xs",children:"Close"})})]})}),document.body),r.jsx(vN,{isOpen:i,onClose:()=>o(!1)}),r.jsx(wN,{isOpen:u,onClose:()=>h(!1)})]})}function SN(){const{spaceCombat:s,exitCombat:a}=ya(),{partyMembers:i}=pi(),{toggleMute:o,getMutedState:u}=gd(),[h,f]=O.useState(!1),[p,m]=O.useState(u());O.useEffect(()=>{const j=v=>{v.key==="Escape"&&!h&&g()};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[h]);const g=()=>{confirm("Exit space combat? Progress will be saved.")&&(f(!0),setTimeout(()=>{a(),f(!1)},300))},x=()=>{const j=o();m(j)};return r.jsxs("div",{className:`min-h-screen bg-space-background relative overflow-hidden ${h?"fade-out":"fade-in"}`,children:[r.jsx("div",{className:"stars-layer-1"}),r.jsx("div",{className:"stars-layer-2"}),r.jsx("div",{className:"stars-layer-3"}),r.jsx("div",{className:"scanlines-combat"}),r.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[r.jsx("header",{className:"border-b-3 border-accent-red bg-bg-secondary/90 backdrop-blur-sm p-3 md:p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-accent-red rounded-full glow-pulse-red"}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-orbitron font-black text-xl md:text-3xl text-accent-red text-glow-red tracking-wider",children:"SPACE COMBAT"}),r.jsx("p",{className:"text-accent-cyan text-xs md:text-sm font-orbitron",children:"BATTLE STATIONS ACTIVE"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:x,className:"p-2 text-gray-400 hover:text-accent-cyan transition-colors rounded border-2 border-transparent hover:border-accent-cyan",title:p?"Unmute sounds":"Mute sounds",children:p?r.jsx(aS,{className:"w-4 h-4"}):r.jsx(eS,{className:"w-4 h-4"})}),r.jsxs(de,{variant:"ghost",onClick:g,className:"flex items-center gap-2",children:[r.jsx(jn,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Exit Combat"})]})]})]})}),r.jsx("div",{className:"flex-1 p-4 lg:p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 lg:gap-6",children:[r.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[r.jsx(hN,{}),r.jsxs("div",{className:"bg-bg-secondary/80 backdrop-blur-sm border-3 border-accent-cyan p-4 space-y-3",children:[r.jsx("h3",{className:"font-orbitron font-bold text-accent-cyan text-sm uppercase",children:"Quick Stats"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Crew:"}),r.jsxs("span",{className:"text-accent-cyan font-orbitron",children:[i.length," Rebel",i.length!==1?"s":""]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Stations Manned:"}),r.jsxs("span",{className:"text-accent-yellow font-orbitron",children:[Object.values(s.stationAssignments).filter(Boolean).length,"/6"]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Torpedoes:"}),r.jsxs("span",{className:"text-accent-cyan font-orbitron flex items-center gap-1",children:[r.jsx(ga,{className:"w-3 h-3"}),s.torpedoesLoaded]})]})]})]}),r.jsx("div",{className:"bg-bg-secondary/80 backdrop-blur-sm border-3 border-accent-cyan p-3",children:r.jsx(jN,{})}),r.jsxs("div",{className:"bg-bg-secondary/80 backdrop-blur-sm border-3 border-gray-700 p-4",children:[r.jsx("p",{className:"text-xs text-gray-400 font-orbitron uppercase mb-3",children:"Combat Notes:"}),r.jsxs("ul",{className:"space-y-2 text-xs text-gray-400",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-cyan",children:""}),r.jsx("span",{children:"Solo rebels can make 2 actions per turn"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-cyan",children:""}),r.jsx("span",{children:"Changing stations takes 1 round"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-cyan",children:""}),r.jsx("span",{children:"Failed defense rolls degrade ship armor by 1 tier"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-accent-yellow",children:""}),r.jsx("span",{children:"Hyperdrive takes 3 rounds to charge - dangerous with 4+ enemies!"})]})]})]})]}),r.jsx("div",{className:"lg:col-span-5",children:r.jsx(bN,{})}),r.jsx("div",{className:"lg:col-span-3",children:r.jsx(xN,{})})]})})}),r.jsx("footer",{className:"border-t-3 border-accent-cyan bg-bg-secondary/90 backdrop-blur-sm p-2 md:p-3",children:r.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 text-xs md:text-sm text-gray-400 font-orbitron",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-accent-cyan",children:""}),"Ship starts at Tier 2 armor"]}),r.jsx("span",{className:"hidden md:inline",children:"|"}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-accent-cyan",children:""}),"Armor reduces 1 tier per failed defense"]}),r.jsx("span",{className:"hidden lg:inline",children:"|"}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-accent-cyan",children:""}),"Press ESC to exit"]})]})})]})]})}function ri({message:s="LOADING",details:a=null}){const[i,o]=O.useState(!1);return O.useEffect(()=>{const u=setTimeout(()=>o(!0),100);return()=>clearTimeout(u)},[]),i?r.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center scanlines",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"text-accent-cyan text-3xl font-orbitron text-glow-cyan typewriter",children:s}),r.jsxs("div",{className:"flex justify-center gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-accent-cyan rounded-full animate-pulse",style:{animationDelay:"0ms"}}),r.jsx("span",{className:"w-2 h-2 bg-accent-cyan rounded-full animate-pulse",style:{animationDelay:"150ms"}}),r.jsx("span",{className:"w-2 h-2 bg-accent-cyan rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),a&&r.jsx("div",{className:"text-accent-yellow/50 text-sm font-mono mt-6",children:a.map((u,h)=>r.jsxs("div",{children:[">"," ",u]},h))})]})}):r.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center opacity-0",children:r.jsx("div",{className:"text-center space-y-4",children:r.jsx("div",{className:"text-accent-cyan text-3xl font-orbitron text-glow-cyan",children:s})})})}const Gu="star-dashborg-panel-order",Sg="star-dashborg-panel-version",Ng="3",Gl=[{id:"threat-die",component:"ThreatDie",title:"Threat Die",variant:"red",column:"left"},{id:"mission-tracks",component:"MissionTrack",title:"Mission Tracks",variant:"cyan",column:"left"},{id:"danger-clocks",component:"DangerClock",title:"Danger Clocks",variant:"red",column:"left"},{id:"dice-roller",component:"DiceRoller",title:"Dice Roller",variant:"yellow",column:"center"},{id:"party-panel",component:"PartyPanel",title:"Party",variant:"red",column:"center"},{id:"ship-log",component:"DiceLog",title:"Ship Log",variant:"cyan",column:"center"},{id:"oracle-compendium",component:"OraclePanel",title:"Oracle Compendium",variant:"cyan",column:"right"},{id:"session-journal",component:"SessionJournal",title:"Session Journal",variant:"yellow",column:"right"}];function NN({roomCode:s}){const{refreshPartyMembers:a}=pi(),{spaceCombat:i}=ya(),{gameState:o,loading:u}=Pe(),[h,f]=O.useState(()=>{if(localStorage.getItem(Sg)!==Ng)return localStorage.removeItem(Gu),localStorage.setItem(Sg,Ng),Gl;const N=localStorage.getItem(Gu);if(N){const C=JSON.parse(N),$=new Map(Gl.map(W=>[W.id,W])),ae=C.map(W=>W.id==="character-panel"?{...$.get("party-panel"),column:W.column}:W),ce=ae.map(W=>{const F=$.get(W.id);return F?{...F,column:W.column}:null}).filter(Boolean),T=new Set(ae.map(W=>W.id));return[...Gl.filter(W=>!T.has(W.id)),...ce]}return Gl}),[p,m]=O.useState(null),[g,x]=O.useState(null),[j,v]=O.useState(null),[w,_]=O.useState(!1),[S,E]=O.useState("threatDie"),[q,U]=O.useState(!1);O.useEffect(()=>{localStorage.setItem(Gu,JSON.stringify(h))},[h]),O.useEffect(()=>{const D=N=>{(N.key==="h"||N.key==="H"||N.key==="?")&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&(N.preventDefault(),_(!0))};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[]),O.useEffect(()=>{a()},[a]);const A=(D,N)=>{m(N),D.dataTransfer.effectAllowed="move"},I=(D,N)=>{D.preventDefault(),p!==N&&x(N)},L=(D,N)=>{if(D.preventDefault(),p===N){m(null),x(null),v(null);return}const C=h.findIndex(V=>V.id===p),$=h.findIndex(V=>V.id===N),ae=h[$],ce=[...h],[T]=ce.splice(C,1);T.column=ae.column,ce.splice($,0,T),f(ce),m(null),x(null),v(null)},G=()=>{m(null),x(null),v(null)},Z=(D,N)=>{D.preventDefault(),v(N)},X=(D,N)=>{if(D.preventDefault(),!p){v(null);return}const C=h.findIndex(ce=>ce.id===p),$=[...h],[ae]=$.splice(C,1);ae.column=N,$.push(ae),f($),m(null),x(null),v(null)},xe=D=>{E(D),_(!0)},Le=D=>{const N={PartyPanel:r.jsx(oN,{onExpand:()=>U(!0)}),ThreatDie:r.jsx(dS,{}),MissionTrack:r.jsx(RS,{}),DangerClock:r.jsx(CS,{}),DiceRoller:r.jsx(LS,{}),DiceLog:r.jsx(OS,{}),OraclePanel:r.jsx(XS,{}),SessionJournal:r.jsx(DS,{})};if(!N[D.component])return null;const C=p===D.id,$=g===D.id;let ae,ce;return D.component==="DiceLog"?ae="max-h-[450px]":D.component==="SessionJournal"?ce="min-h-[350px]":D.component==="OraclePanel"&&(ae="max-h-[600px]"),r.jsxs("div",{className:"relative",children:[$&&r.jsx("div",{className:"absolute -top-3 left-0 right-0 h-1 bg-accent-cyan rounded-full shadow-lg shadow-accent-cyan/50 z-50 animate-pulse"}),r.jsx("div",{draggable:!0,onDragStart:T=>A(T,D.id),onDragOver:T=>I(T,D.id),onDrop:T=>L(T,D.id),onDragEnd:G,className:`cursor-move transition-all duration-200 mb-4 lg:mb-6 last:mb-0 ${C?"opacity-40 scale-95":""} ${$?"ring-2 ring-accent-cyan ring-offset-2 ring-offset-bg-primary":""}`,children:r.jsx(uS,{title:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lj,{className:"w-4 h-4 opacity-50"}),r.jsx("span",{children:D.title})]}),variant:D.variant,maxHeightExpanded:ae,minHeightExpanded:ce,onHelpClick:D.id==="threat-die"?()=>xe("threatDie"):D.id==="mission-tracks"?()=>xe("missionTracks"):D.id==="danger-clocks"?()=>xe("dangerClocks"):void 0,children:N[D.component]})})]},D.id)},ht=h.filter(D=>D.column==="left"),Ye=h.filter(D=>D.column==="center"),ee=h.filter(D=>D.column==="right"),Q=D=>{const N=j===D&&p;return r.jsx("div",{onDragOver:C=>Z(C,D),onDrop:C=>X(C,D),className:`hidden lg:block lg:min-h-[100px] flex-1 transition-all duration-200 border-2 border-dashed rounded ${N?"border-accent-cyan bg-accent-cyan/10":"border-transparent"}`})};return u?r.jsx(ri,{message:"LOADING GAME STATE",details:["Retrieving session data...","Syncing ship systems...","Restoring battle stations..."]}):o.spaceCombat?.isActive?r.jsxs(r.Fragment,{children:[r.jsx(SN,{}),r.jsx(yg,{isOpen:q,onClose:()=>U(!1)})]}):r.jsxs("div",{className:"min-h-screen bg-bg-primary scanlines flex flex-col",children:[r.jsx(cS,{roomCode:s,onOpenCharacterSheet:()=>U(!0)}),r.jsxs("div",{className:"flex-1 p-4 space-y-4 lg:space-y-0 lg:grid lg:grid-cols-12 lg:gap-6 overflow-hidden",children:[r.jsxs("div",{className:"space-y-4 lg:contents lg:block lg:col-span-3 lg:space-y-6 lg:flex lg:flex-col",children:[ht.map(Le),Q("left")]}),r.jsxs("div",{className:"space-y-4 lg:contents lg:block lg:col-span-3 lg:space-y-6 lg:flex lg:flex-col",children:[Ye.map(Le),Q("center")]}),r.jsxs("div",{className:"space-y-4 lg:contents lg:block lg:col-span-6 lg:space-y-6 lg:flex lg:flex-col",children:[ee.map(Le),Q("right")]})]}),r.jsx(eN,{isOpen:w,onClose:()=>_(!1),initialTab:S}),r.jsx(yg,{isOpen:q,onClose:()=>U(!1)})]})}function _N(){const[s,a]=O.useState(!1),[i,o]=O.useState(""),[u,h]=O.useState(""),[f,p]=O.useState(!1),[m,g]=O.useState(null),[x,j]=O.useState(null),v=async _=>{_.preventDefault(),a(!0),g(null),j(null);try{if(f){const{error:S}=await Ke.auth.signUp({email:i,password:u});if(S)throw S;j("Account created! Check your email to confirm, then wait for admin approval.")}else{const{error:S}=await Ke.auth.signInWithPassword({email:i,password:u});if(S)throw S}}catch(S){g(S.message)}finally{a(!1)}},w=async _=>{_.preventDefault(),a(!0),g(null),j(null);try{const{error:S}=await Ke.auth.signInWithOtp({email:i});if(S)throw S;j("Check your email for the magic link!")}catch(S){g(S.message)}finally{a(!1)}};return r.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center scanlines p-4",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-orbitron font-bold text-accent-cyan text-glow-cyan mb-2",children:"STAR DASHBORG"}),r.jsxs("p",{className:"text-accent-yellow/70 text-sm font-mono",children:[">"," SECURE ACCESS REQUIRED"]})]}),r.jsx("div",{className:"bg-panel-bg border border-accent-cyan/30 rounded-lg p-6 shadow-lg shadow-accent-cyan/10",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>p(!1),className:`flex-1 py-2 px-4 font-mono text-sm rounded transition-all ${f?"bg-transparent text-accent-cyan border border-accent-cyan/30 hover:border-accent-cyan/60":"bg-accent-cyan text-bg-primary"}`,children:"SIGN IN"}),r.jsx("button",{onClick:()=>p(!0),className:`flex-1 py-2 px-4 font-mono text-sm rounded transition-all ${f?"bg-accent-cyan text-bg-primary":"bg-transparent text-accent-cyan border border-accent-cyan/30 hover:border-accent-cyan/60"}`,children:"SIGN UP"})]}),r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-mono text-text-secondary mb-2",children:"EMAIL"}),r.jsx("input",{id:"email",type:"email",placeholder:"rebel@resistance.net",value:i,onChange:_=>o(_.target.value),required:!0,className:"w-full px-4 py-2 bg-bg-secondary border border-accent-cyan/30 rounded text-text-primary font-mono focus:outline-none focus:border-accent-cyan transition-colors"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-mono text-text-secondary mb-2",children:"PASSWORD"}),r.jsx("input",{id:"password",type:"password",placeholder:"",value:u,onChange:_=>h(_.target.value),required:!0,className:"w-full px-4 py-2 bg-bg-secondary border border-accent-cyan/30 rounded text-text-primary font-mono focus:outline-none focus:border-accent-cyan transition-colors"})]}),r.jsx(de,{type:"submit",disabled:s,className:"w-full",children:s?"PROCESSING...":f?"CREATE ACCOUNT":"SIGN IN"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-accent-cyan/20"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-panel-bg text-text-secondary font-mono",children:"OR"})})]}),r.jsx("form",{onSubmit:w,children:r.jsx(de,{type:"submit",disabled:s||!i,variant:"outline",className:"w-full",children:s?"SENDING...":"SEND MAGIC LINK"})}),m&&r.jsx("div",{className:"p-3 bg-accent-red/10 border border-accent-red/30 rounded",children:r.jsx("p",{className:"text-accent-red text-sm font-mono",children:m})}),x&&r.jsx("div",{className:"p-3 bg-accent-green/10 border border-accent-green/30 rounded",children:r.jsx("p",{className:"text-accent-green text-sm font-mono",children:x})})]})}),r.jsxs("p",{className:"text-center text-text-secondary text-xs font-mono",children:[">"," Encrypted connection established"]})]})})}function kN(){const{signOut:s,user:a}=Fl();return r.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center scanlines p-4",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-orbitron font-bold text-accent-yellow text-glow-yellow mb-2",children:"AWAITING APPROVAL"}),r.jsxs("p",{className:"text-accent-cyan/70 text-sm font-mono",children:[">"," ACCESS PENDING"]})]}),r.jsx("div",{className:"bg-panel-bg border border-accent-yellow/30 rounded-lg p-6 shadow-lg shadow-accent-yellow/10",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"w-16 h-16 border-4 border-accent-yellow rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-accent-yellow",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),r.jsxs("div",{className:"text-center space-y-3",children:[r.jsx("p",{className:"text-text-primary font-mono text-sm",children:"Your account has been created successfully."}),r.jsx("p",{className:"text-text-secondary font-mono text-xs",children:"An administrator must approve your account before you can access the system."}),r.jsx("div",{className:"bg-bg-secondary border border-accent-cyan/20 rounded p-3 mt-4",children:r.jsxs("p",{className:"text-accent-cyan font-mono text-xs",children:[r.jsx("span",{className:"text-text-secondary",children:"Email:"})," ",a?.email]})})]}),r.jsx("div",{className:"bg-bg-secondary/50 border border-accent-yellow/20 rounded p-4",children:r.jsxs("p",{className:"text-text-secondary font-mono text-xs leading-relaxed",children:[">"," You will receive an email notification once approved.",r.jsx("br",{}),">"," Please check your inbox regularly.",r.jsx("br",{}),">"," Contact the administrator if you're waiting too long."]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(de,{onClick:()=>window.location.reload(),variant:"ghost",className:"w-full",children:"CHECK STATUS"}),r.jsx(de,{onClick:s,variant:"ghost",className:"w-full text-xs",children:"SIGN OUT"})]})]})}),r.jsxs("p",{className:"text-center text-text-secondary text-xs font-mono",children:[">"," Secure rebel network access control active"]})]})})}const TN={functions:[{name:"Protocol",description:"Translate any language, parse customs. Know what to say on DR10 PRS test."},{name:"Porter",description:"Roll with advantage for lifting and hauling tasks."},{name:"Supervisor",description:"Oversee tiny rolling repair bot (rarely does what you ask). Flip coin. D4 HP, D2 damage."},{name:"Computer Interface",description:"Plug into terminals to negotiate with computer systems. PRS test. Feedback shock (D4) on blunder."},{name:"Power",description:"Walking battery backup. Power/recharge/jumpstart moderate devices. Super charge on DR14 KNW test."},{name:"Surveillance",description:"Float with weak antigrav. Survey and transmit with sensors. Disadvantage on STR tests."}],malfunctions:[{name:"Exterminate",description:"When you roll two blunders in a row, rush to attack a random individual within sight."},{name:"Warning Critical Error",description:"When you roll a blunder on a test of DR14 or higher, you freeze in place."},{name:"Bugged Audio",description:"When you roll a blunder on a PRS test, you can only repeat the last word of your previous sentence."},{name:"Archived Memories",description:"When you roll a blunder on a test that aligns with your Function, reroll for a new Function."},{name:"Trick Leg",description:"When you roll a blunder on an AGI test, your lower leg dislocates again."},{name:"Screw Loose",description:"Loose components squeak and rattle. Disadvantage on AGI tests for stealth."}],upgrades:["Retractable Bone Saw (D8 damage)","Smuggling Compartment (houses mind-altering snuff-dust)","Comm Scrambler (DR12 KNW test)","Legion Cypher (flip coin to see if codes work)","Trash Compactor Torso (crush handheld objects into cubes)","Self Destruct (D8 damage blast, only head survives with 2HP)"]},EN={skills:[{name:"Rough Rider",description:"Ride any creature you can straddle. Roll PRS with advantage to tame wild beasts."},{name:"Escape Artist",description:"Been in and out of jail cells. Roll AGI with advantage to slip bonds and pick locks."},{name:"Deserter",description:"Know how Legion thinks and talks. Roll KNW with advantage when anticipating or impersonating Legionnaires."},{name:"Tracker",description:"With right tools, always tell if prey has been in area and where they went."},{name:"Bouncer",description:"Pain don't hurt. Roll STR with advantage when wrestling/shoving. D8 damage with bare hands."},{name:"Armorer",description:"Never take off helmet in front of anyone. Start with Quantum Armor (Tier 3, -D6 damage)."}],heirlooms:[{name:"Grapple Whip",description:"Climb and swing. Test Morale to bind creature. Rebels roll with advantage to defend against bound creatures."},{name:"Flamethrower",description:"D6 damage. If you roll 6 for damage, target is on fire for 1 more round."},{name:"Jetpack",description:"You can fly. Every use, roll D20. On blunder, out of fuel."},{name:"Ray Shielding",description:"Ignore first damage from blaster fire. Resets on rest."},{name:"Sawed Off Repeater",description:"2D4 damage. On blunder, jams and can only be fixed on rest."},{name:"Disintegration Rifle",description:"D12 damage. If you roll 8+ on damage, enemy makes Morale test. On blunder, rifle disintegrates."}],softSpots:["Helpless little creatures","Youthful whippersnappers","Simple folk making ends meet","Mistreated bots","Elderly curmudgeons","Wounded veterans"]},RN={arts:[{name:"Mind Muddle",description:"Cloud brains of simple-minded creatures and issue simple hypnotic commands. (KNW test)"},{name:"Magi Hand",description:"Reach out with powers to push, pull, and grasp objects and people. (KNW test)"},{name:"Blaster Deflect",description:"Instead of defense roll, deflect blaster bolts with Blazer Sword. Make damage roll against enemy with their own weapon damage. (KNW test)"},{name:"Healing Touch",description:"Touch a creature of flesh and bone to restore D6 HP. (KNW test)"}],dragoonNemeses:["Tragen Foul the Beheader","Manus Giant the Strangler","Gigus Noldo the Ripper","X-66 the Bot","Lord Commander Vortex","Roll 2 Nemeses"],burnerIdentities:[{name:"Powder Miner",description:"Coughing fit when you fail AGI test."},{name:"Wasteland Scavenger",description:"Freeze for a moment when you fail PRS test."},{name:"Vapor Farmer",description:"Back seizes up when you fail STR test."},{name:"Vagabond",description:"Need help to get back to feet when you fail AGI test."},{name:"Reclusive Healer",description:"Must help everyone who asks, DR14 PRS test to resist."},{name:"Barfly",description:"Must answer slightest insult with your own, DR14 PRS test to resist."}]},CN={tricks:["Ceramic Knife (D4 damage, invisible to weapon scans)","Eyeball Blaster (hidden under eyepatch, one shot, D6 damage)","Psychogun (mechanical arm with bioelectrical cannon, D8 damage)","Monofilament Garrote (retractable wire, 2 STR tests to subdue)","Sonic Grenade (looks like comm unit, deafening stunning blast)","Vapor Tooth (bite down to fill room with thick fog)"],contraband:[{name:"Engineered Organs",description:"Blood is leaking out. D6 Containment Points."},{name:"Frozen Bone Crabs",description:"Will thaw and awaken. D6 Containment Points."},{name:"Particle Warheads",description:"Radioactive. D6 Containment Points."},{name:"Hyper Mushrooms",description:"Rotting smell and consciousness-altering gas. D6 Containment Points."},{name:"Gravity Magnet",description:"Nullification field deteriorating, will become black hole. D6 Containment Points."},{name:"Rogue Bot Mind",description:"Will eventually gain control of all machines in signal range. D6 Containment Points."}],crimeLords:["Don Crom","Jojo 'The Borg'","Moon Queen Zala","'Stumpy' Skadeen","'Meat Hook' Max","Shadow Master Vu"]},AN={scratchBuilds:[{name:"Hyperspace Transporter Pack",description:"Roll KNW to teleport to visible location. Disadvantage if unclear. On blunder, pack and D6 items lost. (bulky, shoddy)"},{name:"Zero Blaster",description:"Cover surface in ice. Freeze target solid with sustained blast for 3 rounds. (bulky, shoddy)"},{name:"Gravity Disruptor",description:"Negate gravity for just a moment on single target you can touch. (bulky, shoddy)"},{name:"Cloaking Device",description:"Make person invisible or group mostly invisible (DR8 Hiding/Stealth, DR10 for small group). (bulky, shoddy)"},{name:"Machine Mind Dominator",description:"Test enemy Bot's Morale to turn them friendly. (bulky, shoddy)"},{name:"Devastator Fist",description:"Crush armor and tear bulkheads (D6 damage, ignores armor). Roll STR. On blunder, destroyed in energy blast (D8). (bulky, shoddy)"}],hyperFixations:["Hologram Emitters","Bot Optical Lenses","Space Suit Respirators","Hyperdrive Ignition Switches","High Explosives","Speeder Hood Ornaments"]},ON={tragedies:["Freak mechanical explosion took out auntie and uncle while scavenging components.","Gamgam and grampy caught in random blaster fire exchange during academy exams.","PL-84 caretaker bot took deadly midnight tumble off bridge where you were discovered.","Circus troupe that raised you were trampled in zanthadon stampede during market day.","Wise old healer who took custody of you was beheaded by unknown assailant.","AI that ran derelict moonbase contracted terminal virus and opened outside hatch."],heirlooms:[{name:"Magi Blazer Sword Hilt",description:"Left by your parent. 2D6 damage. (See Dragoon Test p.8)"},{name:"Polished Breastplate",description:"Ancient armor set with family crest engraved. Tier 2, -D4 armor."},{name:"Pair of Blaster Pistols",description:"Badge your mamma once worn to protect galaxy. 2D4 damage."},{name:"Disintegrator Rifle",description:"Your uncle used as freedom fighter. D8 damage, takes round to reload."},{name:"Coded Research Notes",description:"Your parents were working on before they disappeared. Reveals weak points on Legion Superweapon when analyzed."},{name:"Signet Ring",description:"Of your once noble house. Can still grant favor when shown to right nostalgic fool."}],knacks:[{name:"Burdogs Body",description:"Used to being bossed around. Roll with your highest stat when following another Rebel's bossy instructions."},{name:"Busker",description:"Never go anywhere without techno-harp. DR10 PRS test to cause obnoxious musical distraction."},{name:"Bootshiner",description:"Look average and unimportant. DR10 PRS test to blend in with the help."},{name:"Cutpurse",description:"Have sticky fingers. DR10 AGI to swipe item off unsuspecting mark."},{name:"Tinkerer",description:"Make friends with bots easily. Understand their machine speech. Roll PRS with advantage when being friendly to non-hostile bots."},{name:"Mucker",description:"At home in garbage and gutters of galaxy. DR10 AGI test to search for trinket."}]},_g={bot:TN,bountyHunter:EN,magiKnight:RN,smuggler:CN,technician:AN,youngster:ON};function DN({onSave:s,onCancel:a}){const{saveCharacter:i}=ar(),[o,u]=O.useState(1),[h,f]=O.useState(null),[p,m]=O.useState(null),[g,x]=O.useState(!1),[j,v]=O.useState(!1),[w,_]=O.useState(!1),S=Q=>Q>0?`+${Q}`:`${Q}`,E=Q=>{v(!0),u(2),setTimeout(()=>{const D=si[Q],N=Q==="bot",C={agi:D.statModifiers?.agi?ja(D.statModifiers.agi.count,D.statModifiers.agi.sides,D.statModifiers.agi.modifier):ja(3,6,0),knw:D.statModifiers?.knw?ja(D.statModifiers.knw.count,D.statModifiers.knw.sides,D.statModifiers.knw.modifier):ja(3,6,0),prs:D.statModifiers?.prs?ja(D.statModifiers.prs.count,D.statModifiers.prs.sides,D.statModifiers.prs.modifier):ja(3,6,0),str:D.statModifiers?.str?ja(D.statModifiers.str.count,D.statModifiers.str.sides,D.statModifiers.str.modifier):ja(3,6,0)},$=rN(C.str,D.hpDice),ae=iN(D.destinyDice),ce=N?"Bot":Pl[fe(10)-1].name,T=fe(10),V=la.rebelMotivations[T-1],F=fe(6)>=4?1:0,me=[la.bobsWeapons[fe(6)-1],la.bobsArmor[fe(6)-1],la.bobsGear[fe(6)-1]];Q==="magiKnight"&&me.unshift("Blazer Sword (2D6 damage)");const ve=q(Q),se={name:"",class:Q,className:D.name,species:ce,motivation:V,stats:C,hp_max:$,hp_current:$,destinyPoints:ae,bits:F,equipment:me,classFeatures:ve};m(se),v(!1),u(3)},1500)},q=Q=>{const D=_g[Q],N={};switch(Q){case"bot":{const C=fe(6),$=fe(6),ae=fe(6);N.function={roll:C,...D.functions[C-1]},N.malfunction={roll:$,...D.malfunctions[$-1]},N.upgrade={roll:ae,result:D.upgrades[ae-1]};break}case"bountyHunter":{const C=fe(6),$=fe(6),ae=fe(6);N.skill={roll:C,...D.skills[C-1]},N.heirloom={roll:$,...D.heirlooms[$-1]},N.softSpot={roll:ae,result:D.softSpots[ae-1]};break}case"magiKnight":{const C=fe(4),$=fe(6),ae=fe(6);if(N.art={roll:C,...D.arts[C-1]},$===6){const ce=fe(5);let T=fe(5);for(;T===ce;)T=fe(5);const V=D.dragoonNemeses[ce-1],W=D.dragoonNemeses[T-1];N.nemesis={roll:$,result:`${V} & ${W}`,multiple:!0,nemeses:[V,W]}}else N.nemesis={roll:$,result:D.dragoonNemeses[$-1]};N.identity={roll:ae,...D.burnerIdentities[ae-1]},N.dragoonThreshold=5;break}case"smuggler":{const C=fe(6),$=fe(6),ae=fe(6),ce=fe(6);N.trick={roll:C,result:D.tricks[C-1]},N.contraband={roll:$,...D.contraband[$-1]},N.containmentPoints=ce,N.crimeLord={roll:ae,result:D.crimeLords[ae-1]},N.ownsShip=!0;break}case"technician":{const C=fe(6),$=fe(6),ae=fe(4);N.scratchBuild={roll:C,...D.scratchBuilds[C-1]},N.hyperFixation={roll:$,result:D.hyperFixations[$-1]},N.junkDrawerSlots=ae;break}case"youngster":{const C=fe(6),$=fe(6),ae=fe(6);N.tragedy={roll:C,result:D.tragedies[C-1]},N.heirloom={roll:$,...D.heirlooms[$-1]},N.knack={roll:ae,...D.knacks[ae-1]};break}}return N},U=Q=>{f(Q),E(Q)},A=()=>{u(1),f(null),m(null),x(!1)},I=async()=>{if(p)try{_(!0),await i(p),s&&s(p)}catch(Q){console.error("Failed to save character:",Q),alert("Failed to save character. Please try again.")}finally{_(!1)}},L=(Q,D)=>{m(N=>({...N,[Q]:D}))},G=(Q,D)=>{const N=Math.max(-3,Math.min(3,parseInt(D)||0));m(C=>({...C,stats:{...C.stats,[Q]:N}}))},Z=()=>{let Q="";if(p.class==="bot"){const D=Ze.botNamePrefixes[fe(10)-1],N=Ze.botNameSuffixes[fe(10)-1];Q=`${D}-${N}`}else{const D=Ze.baselineFirst[fe(10)-1],N=Ze.familyNames[fe(10)-1];Q=`${D} ${N}`}L("name",Q)},X=Q=>{const N=si[p.class].statModifiers?.[Q],C=N?ja(N.count,N.sides,N.modifier):ja(3,6,0);G(Q,C)},xe=()=>{if(p.class==="bot")return;const Q=Pl[fe(10)-1].name;L("species",Q)},Le=()=>{m(Q=>({...Q,equipment:[...Q.equipment,"New Item"]}))},ht=Q=>{m(D=>({...D,equipment:D.equipment.filter((N,C)=>C!==Q)}))},Ye=(Q,D)=>{m(N=>({...N,equipment:N.equipment.map((C,$)=>$===Q?D:C)}))},ee=Q=>{const D=_g[p.class];let N,C;switch(Q){case"function":C=fe(6),N={roll:C,...D.functions[C-1]};break;case"malfunction":C=fe(6),N={roll:C,...D.malfunctions[C-1]};break;case"upgrade":C=fe(6),N={roll:C,result:D.upgrades[C-1]};break;case"skill":C=fe(6),N={roll:C,...D.skills[C-1]};break;case"heirloom":C=fe(6),N={roll:C,...D.heirlooms[C-1]};break;case"softSpot":C=fe(6),N={roll:C,result:D.softSpots[C-1]};break;case"art":C=fe(4),N={roll:C,...D.arts[C-1]};break;case"nemesis":{if(C=fe(6),C===6){const $=fe(5);let ae=fe(5);for(;ae===$;)ae=fe(5);const ce=D.dragoonNemeses[$-1],T=D.dragoonNemeses[ae-1];N={roll:C,result:`${ce} & ${T}`,multiple:!0,nemeses:[ce,T]}}else N={roll:C,result:D.dragoonNemeses[C-1]};break}case"identity":C=fe(6),N={roll:C,...D.burnerIdentities[C-1]};break;case"trick":C=fe(6),N={roll:C,result:D.tricks[C-1]};break;case"contraband":C=fe(6),N={roll:C,...D.contraband[C-1]};break;case"crimeLord":C=fe(6),N={roll:C,result:D.crimeLords[C-1]};break;case"scratchBuild":C=fe(6),N={roll:C,...D.scratchBuilds[C-1]};break;case"hyperFixation":C=fe(6),N={roll:C,result:D.hyperFixations[C-1]};break;case"tragedy":C=fe(6),N={roll:C,result:D.tragedies[C-1]};break;case"knack":C=fe(6),N={roll:C,...D.knacks[C-1]};break}m($=>({...$,classFeatures:{...$.classFeatures,[Q]:N}}))};return o===1?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h2",{className:"text-3xl font-orbitron font-bold text-accent-cyan text-glow-cyan",children:"CREATE REBEL CHARACTER"}),r.jsxs("p",{className:"text-text-secondary font-mono text-sm",children:[">"," SELECT YOUR CLASS"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(si).map(([Q,D])=>r.jsxs("button",{onClick:()=>U(Q),className:"bg-bg-secondary border-2 border-accent-cyan/30 p-4 rounded hover:border-accent-cyan hover:shadow-[0_0_20px_rgba(0,240,255,0.4)] transition-all duration-200 text-left group",children:[r.jsx("h3",{className:"font-orbitron font-bold text-accent-yellow text-lg mb-2 group-hover:text-glow-yellow",children:D.name}),r.jsx("p",{className:"text-text-secondary text-xs font-mono mb-3 line-clamp-3",children:D.description}),r.jsxs("div",{className:"text-accent-cyan text-xs font-mono space-y-1",children:[Object.entries(D.statModifiers||{}).map(([N,C])=>r.jsxs("div",{children:[N.toUpperCase(),": ",C.count,"d",C.sides,C.modifier!==0&&(C.modifier>0?`+${C.modifier}`:C.modifier)]},N)),r.jsxs("div",{className:"text-text-secondary",children:["HP: ",D.hpDice.count,"d",D.hpDice.sides,D.hpDice.modifier!==0&&`+${D.hpDice.modifier}`,Q!=="bot"&&" + STR"]})]})]},Q))}),a&&r.jsx("div",{className:"text-center",children:r.jsx(de,{onClick:a,variant:"ghost",children:"CANCEL"})})]}):o===2?r.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(Qn,{className:"w-16 h-16 text-accent-cyan mx-auto dice-rolling"}),r.jsx("div",{className:"text-2xl font-orbitron text-accent-cyan text-glow-cyan typewriter",children:"GENERATING CHARACTER"}),r.jsxs("div",{className:"flex justify-center gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-accent-cyan rounded-full animate-pulse",style:{animationDelay:"0ms"}}),r.jsx("span",{className:"w-2 h-2 bg-accent-cyan rounded-full animate-pulse",style:{animationDelay:"150ms"}}),r.jsx("span",{className:"w-2 h-2 bg-accent-cyan rounded-full animate-pulse",style:{animationDelay:"300ms"}})]})]})}):o===3&&p?r.jsxs("div",{className:"space-y-6 fade-in",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-orbitron font-bold text-accent-yellow text-glow-yellow",children:p.className||"CHARACTER"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{onClick:()=>x(!g),variant:g?"secondary":"ghost",className:"text-xs",children:g?"DONE EDITING":"EDIT MODE"}),r.jsx(de,{onClick:A,variant:"ghost",className:"text-xs",children:r.jsx(ug,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1",children:"NAME"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:p.name,onChange:Q=>L("name",Q.target.value),placeholder:"Enter rebel name...",className:"flex-1 bg-bg-secondary border border-accent-cyan/30 rounded px-3 py-2 text-text-primary font-mono focus:outline-none focus:border-accent-cyan focus:shadow-[0_0_10px_rgba(0,240,255,0.4)] transition-all"}),r.jsxs("button",{onClick:Z,className:"px-3 py-2 bg-transparent border-2 border-accent-yellow text-accent-yellow hover:bg-accent-yellow hover:text-bg-primary transition-all font-orbitron text-xs uppercase flex items-center gap-1",title:"Generate random name",children:[r.jsx(Qn,{className:"w-4 h-4"}),"Gen"]})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx("h3",{className:"text-sm font-orbitron text-accent-cyan uppercase",children:"Ability Scores"})}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(p.stats).map(([Q,D])=>r.jsxs("div",{className:"bg-bg-secondary border border-accent-cyan/30 rounded p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-xs font-mono text-text-secondary uppercase",children:Q}),r.jsx("button",{onClick:()=>X(Q),className:"text-accent-yellow hover:text-accent-yellow/80 transition-colors",title:"Reroll",children:r.jsx(Qn,{className:"w-3 h-3"})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[g&&r.jsx("button",{onClick:()=>G(Q,D-1),className:"text-accent-cyan hover:text-accent-cyan/80 text-lg font-bold",children:"-"}),g?r.jsx("input",{type:"number",value:D,onChange:N=>G(Q,N.target.value),min:"-3",max:"3",className:`w-full text-center text-xl font-orbitron font-bold ${D>=2?"text-accent-green":D>=1?"text-accent-cyan":D===0?"text-text-primary":D>=-1?"text-accent-yellow":"text-accent-red"} bg-transparent border-0 focus:outline-none cursor-text`}):r.jsx("div",{className:`w-full text-center text-xl font-orbitron font-bold ${D>=2?"text-accent-green":D>=1?"text-accent-cyan":D===0?"text-text-primary":D>=-1?"text-accent-yellow":"text-accent-red"}`,children:S(D)}),g&&r.jsx("button",{onClick:()=>G(Q,D+1),className:"text-accent-cyan hover:text-accent-cyan/80 text-lg font-bold",children:"+"})]})]},Q))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-bg-secondary border border-accent-cyan/30 rounded p-3",children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1",children:"HP MAX"}),r.jsx("input",{type:"number",value:p.hp_max,onChange:Q=>L("hp_max",Math.max(1,parseInt(Q.target.value)||1)),readOnly:!g,min:"1",className:"w-full text-2xl font-orbitron font-bold text-accent-red bg-transparent border-0 focus:outline-none"})]}),r.jsxs("div",{className:"bg-bg-secondary border border-accent-cyan/30 rounded p-3",children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1",children:"HP CURRENT"}),r.jsx("input",{type:"number",value:p.hp_current,onChange:Q=>L("hp_current",Math.max(0,parseInt(Q.target.value)||0)),readOnly:!g,min:"0",className:"w-full text-2xl font-orbitron font-bold text-accent-red bg-transparent border-0 focus:outline-none"})]}),r.jsxs("div",{className:"bg-bg-secondary border border-accent-cyan/30 rounded p-3",children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1",children:"DESTINY POINTS"}),r.jsx("input",{type:"number",value:p.destinyPoints,onChange:Q=>L("destinyPoints",Math.max(0,parseInt(Q.target.value)||0)),readOnly:!g,min:"0",className:"w-full text-2xl font-orbitron font-bold text-accent-yellow bg-transparent border-0 focus:outline-none"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("label",{className:"text-xs font-mono text-text-secondary",children:"SPECIES"}),!g&&p.class!=="bot"&&r.jsx("button",{onClick:xe,className:"text-accent-yellow hover:text-accent-yellow/80 transition-colors",title:"Reroll species",children:r.jsx(Qn,{className:"w-3 h-3"})})]}),g?r.jsx("select",{value:p.species,onChange:Q=>L("species",Q.target.value),className:"w-full bg-bg-secondary border border-accent-cyan/30 rounded px-3 py-2 text-text-primary font-mono focus:outline-none focus:border-accent-cyan [&>option]:bg-bg-secondary [&>option]:text-text-primary",children:p.class==="bot"?r.jsx("option",{value:"Bot",className:"bg-bg-secondary text-text-primary",children:"Bot"}):Pl.map(Q=>r.jsx("option",{value:Q.name,className:"bg-bg-secondary text-text-primary",children:Q.name},Q.id))}):r.jsx("div",{className:"bg-bg-secondary border border-accent-cyan/30 rounded px-3 py-2 text-text-primary font-mono",children:p.species})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-mono text-text-secondary mb-1",children:"BITS "}),r.jsx("input",{type:"number",value:p.bits,onChange:Q=>L("bits",Math.max(0,parseInt(Q.target.value)||0)),readOnly:!g,min:"0",className:"w-full bg-bg-secondary border border-accent-cyan/30 rounded px-3 py-2 text-text-primary font-mono focus:outline-none focus:border-accent-cyan"})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-orbitron text-accent-cyan uppercase",children:"Equipment"}),g&&r.jsx("button",{onClick:Le,className:"text-accent-yellow hover:text-accent-yellow/80 transition-colors",children:r.jsx(Fn,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"space-y-2",children:p.equipment.map((Q,D)=>r.jsxs("div",{className:"flex items-center gap-2",children:[g&&r.jsx("button",{onClick:()=>ht(D),className:"text-accent-red hover:text-accent-red/80 transition-colors",children:r.jsx(er,{className:"w-4 h-4"})}),r.jsx("input",{type:"text",value:Q,onChange:N=>Ye(D,N.target.value),readOnly:!g,className:`flex-1 bg-bg-secondary border ${g?"border-accent-cyan/50 border-dashed":"border-accent-cyan/30"} rounded px-3 py-2 text-text-primary font-mono text-sm focus:outline-none focus:border-accent-cyan`})]},D))})]}),p.classFeatures&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-orbitron text-accent-cyan uppercase mb-2",children:"Class Features"}),r.jsx("div",{className:"space-y-3",children:Object.entries(p.classFeatures).map(([Q,D])=>typeof D=="number"||typeof D=="boolean"?null:r.jsxs("div",{className:"bg-bg-secondary border border-accent-yellow/30 rounded p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("span",{className:"text-xs font-mono text-accent-yellow uppercase",children:[Q.replace(/([A-Z])/g," $1").trim(),D.roll&&` [${D.roll}]`]}),r.jsx("button",{onClick:()=>ee(Q),className:"text-accent-cyan hover:text-accent-cyan/80 transition-colors",title:"Reroll",children:r.jsx(Qn,{className:"w-3 h-3"})})]}),r.jsx("div",{className:"text-text-primary text-sm font-mono",children:D.name?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"font-bold text-accent-yellow",children:D.name}),r.jsx("div",{className:"text-text-secondary text-xs mt-1",children:D.description})]}):r.jsx("div",{className:"text-text-secondary text-xs",children:D.result||D})})]},Q))}),p.classFeatures.dragoonThreshold&&r.jsxs("div",{className:"bg-accent-red/10 border border-accent-red/30 rounded p-3 mt-3",children:[r.jsx("div",{className:"text-xs font-mono text-accent-red uppercase mb-1",children:"Dragoon Detection"}),r.jsxs("div",{className:"text-text-secondary text-xs",children:["Current Threshold: ",p.classFeatures.dragoonThreshold," or lower",r.jsx("br",{}),r.jsx("span",{className:"text-accent-yellow",children:" Roll D20 when using Magi Arts or Blazer Sword"})]})]}),p.classFeatures.containmentPoints&&r.jsxs("div",{className:"bg-accent-yellow/10 border border-accent-yellow/30 rounded p-3 mt-3",children:[r.jsx("div",{className:"text-xs font-mono text-accent-yellow uppercase mb-1",children:"Containment Points"}),r.jsxs("div",{className:"text-text-secondary text-xs",children:["Current: ",p.classFeatures.containmentPoints," / 6",r.jsx("br",{}),r.jsx("span",{className:"text-accent-red",children:"Reduces by 1 on each blunder"})]})]}),p.classFeatures.junkDrawerSlots&&r.jsxs("div",{className:"bg-accent-cyan/10 border border-accent-cyan/30 rounded p-3 mt-3",children:[r.jsx("div",{className:"text-xs font-mono text-accent-cyan uppercase mb-1",children:"Junk Drawer"}),r.jsxs("div",{className:"text-text-secondary text-xs",children:["Extra Inventory Slots: +",p.classFeatures.junkDrawerSlots,r.jsx("br",{}),r.jsx("span",{className:"text-text-secondary",children:"For small broken machines (Hack Job parts)"})]})]}),p.classFeatures.ownsShip&&r.jsxs("div",{className:"bg-accent-cyan/10 border border-accent-cyan/30 rounded p-3 mt-3",children:[r.jsx("div",{className:"text-xs font-mono text-accent-cyan uppercase mb-1",children:"Hunk of Junk"}),r.jsx("div",{className:"text-text-secondary text-xs",children:"You own a ramshackle but trustworthy ship"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-accent-cyan/20",children:[r.jsxs(de,{onClick:A,variant:"ghost",className:"flex-1",disabled:w,children:[r.jsx(ug,{className:"w-4 h-4 mr-2"}),"REROLL ALL"]}),r.jsxs(de,{onClick:I,variant:"primary",className:"flex-1",disabled:w||!p?.name,children:[r.jsx(Tj,{className:"w-4 h-4 mr-2"}),w?"SAVING...":"KEEP CHARACTER"]})]}),p&&!p.name&&r.jsxs("div",{className:"text-accent-yellow text-xs font-mono text-center mt-2",children:[">"," Enter a name to save character"]})]}):null}function MN(){const{session:s,loading:a,approved:i,checkingApproval:o}=Fl(),[u,h]=O.useState(null),[f,p]=O.useState(!0),[m,g]=O.useState(null);return O.useEffect(()=>{if(!s){p(!1);return}async function x(){try{let v=R1();if(v){const{data:w,error:_}=await Ke.from("sessions").select("room_code").eq("room_code",v).single();if(_&&_.code==="PGRST116")await j(v);else if(_)throw _;h(v)}else v=cy(),await j(v),C1(v),h(v)}catch(v){console.error("Error initializing room:",v),g(v.message)}finally{p(!1)}}async function j(v){const{error:w}=await Ke.from("rooms").insert({code:v,gm_id:s.user.id});if(w&&w.code!=="23505")throw w;const{error:_}=await Ke.from("sessions").insert({room_code:v,game_state:{threatDie:1,missions:[],dangerClocks:[],journal:"",log:[]}});if(_&&_.code!=="23505")throw _}x()},[s]),a?r.jsx(ri,{message:"AUTHENTICATING"}):s?o?r.jsx(ri,{message:"CHECKING ACCESS"}):i?f?r.jsx(ri,{message:"INITIALIZING SESSION",details:["Establishing secure connection...","Loading rebel systems...","Syncing mission data..."]}):m?r.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center",children:r.jsxs("div",{className:"text-accent-red text-2xl font-orbitron text-glow-red",children:["ERROR: ",m]})}):r.jsx(Aw,{userId:s.user.id,roomCode:u,children:r.jsx(Ow,{roomCode:u,children:r.jsx(UN,{roomCode:u})})}):r.jsx(kN,{}):r.jsx(_N,{})}function UN({roomCode:s}){const{character:a,loading:i}=ar();return i?r.jsx(ri,{message:"LOADING CHARACTER"}):!i&&a===null?r.jsx("div",{className:"min-h-screen bg-bg-primary p-4 md:p-8 scanlines",children:r.jsx("div",{className:"max-w-6xl mx-auto",children:r.jsx(DN,{})})}):r.jsx(Dw,{roomCode:s,children:r.jsx($w,{children:r.jsx(NN,{roomCode:s})})})}Wx.createRoot(document.getElementById("root")).render(r.jsx(O.StrictMode,{children:r.jsx(Cw,{children:r.jsx(MN,{})})}));
